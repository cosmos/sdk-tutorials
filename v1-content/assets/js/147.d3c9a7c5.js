(window.webpackJsonp=window.webpackJsonp||[]).push([[147],{763:function(e,t,c){"use strict";c.r(t);var s=c(1),d=Object(s.a)({},(function(){var e=this,t=e.$createElement,c=e._self._c||t;return c("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[c("h1",{attrs:{id:"custom-messages-for-your-checkers-blockchain"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#custom-messages-for-your-checkers-blockchain"}},[e._v("#")]),e._v(" Custom Messages for Your Checkers Blockchain")]),e._v(" "),c("HighlightBox",{attrs:{type:"prerequisite"}},[c("p",[e._v("Make sure you have all you need before proceeding:")]),e._v(" "),c("ul",[c("li",[e._v("You understand the concepts of "),c("RouterLink",{attrs:{to:"/academy/xl-cosmjs/intro.html"}},[e._v("CosmJS")]),e._v(".")],1),e._v(" "),c("li",[e._v("You have generated the necessary TypeScript types in "),c("RouterLink",{attrs:{to:"/academy/cosmjs-checkers-sections/cosmjs-objects.html"}},[e._v("the previous tutorial")]),e._v(".")],1),e._v(" "),c("li",[e._v("You have the finished the checkers blockchain exercise. If not, you can follow that tutorial "),c("RouterLink",{attrs:{to:"/academy/cosmjs-checkers-sections/"}},[e._v("here")]),e._v(" or just clone and checkout the "),c("a",{attrs:{href:"https://github.com/cosmos/b9-checkers-academy-draft/tree/v1-wager-denomination",target:"_blank",rel:"noopener noreferrer"}},[e._v("relevant branch"),c("OutboundLink")],1),e._v(" that contains the final version.")],1)])]),e._v(" "),c("p",[e._v("In the previous section, you created the objects that allow you to "),c("strong",[e._v("query")]),e._v(" your Checkers blockchain. Now, you will create the elements that allow you to "),c("strong",[e._v("send transactions")]),e._v(" to it.")]),e._v(" "),c("h2",{attrs:{id:"encodable-messages"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#encodable-messages"}},[e._v("#")]),e._v(" Encodable messages")]),e._v(" "),c("p",[e._v("Previously you defined in Protobuf three messages and their respective responses. You had Protobuf "),c("a",{attrs:{href:"https://github.com/cosmos/academy-checkers-ui/blob/generated/src/types/generated/checkers/tx.ts",target:"_blank",rel:"noopener noreferrer"}},[e._v("compile them"),c("OutboundLink")],1),e._v(". Now you will create a few instances of "),c("code",[e._v("EncodeObject")]),e._v(", similar to how this is done in CosmJS's "),c("a",{attrs:{href:"https://github.com/cosmos/cosmjs/blob/13ce43c/packages/stargate/src/modules/bank/messages.ts",target:"_blank",rel:"noopener noreferrer"}},[e._v("bank module"),c("OutboundLink")],1),e._v(". First, collect their names and Protobuf packages. Each Protobuf type identifier is assigned its encodable type:")]),e._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"typescript",base64:"ZXhwb3J0IGNvbnN0IHR5cGVVcmxNc2dDcmVhdGVHYW1lID0gJnF1b3Q7L2FsaWNlLmNoZWNrZXJzLmNoZWNrZXJzLk1zZ0NyZWF0ZUdhbWUmcXVvdDsKZXhwb3J0IGNvbnN0IHR5cGVVcmxNc2dDcmVhdGVHYW1lUmVzcG9uc2UgPSAmcXVvdDsvYWxpY2UuY2hlY2tlcnMuY2hlY2tlcnMuTXNnQ3JlYXRlR2FtZVJlc3BvbnNlJnF1b3Q7CmV4cG9ydCBjb25zdCB0eXBlVXJsTXNnUGxheU1vdmUgPSAmcXVvdDsvYWxpY2UuY2hlY2tlcnMuY2hlY2tlcnMuTXNnUGxheU1vdmUmcXVvdDsKZXhwb3J0IGNvbnN0IHR5cGVVcmxNc2dQbGF5TW92ZVJlc3BvbnNlID0gJnF1b3Q7L2FsaWNlLmNoZWNrZXJzLmNoZWNrZXJzLk1zZ1BsYXlNb3ZlUmVzcG9uc2UmcXVvdDsKZXhwb3J0IGNvbnN0IHR5cGVVcmxNc2dSZWplY3RHYW1lID0gJnF1b3Q7L2FsaWNlLmNoZWNrZXJzLmNoZWNrZXJzLk1zZ1JlamVjdEdhbWUmcXVvdDsKZXhwb3J0IGNvbnN0IHR5cGVVcmxNc2dSZWplY3RHYW1lUmVzcG9uc2UgPSAmcXVvdDsvYWxpY2UuY2hlY2tlcnMuY2hlY2tlcnMuTXNnUmVqZWN0R2FtZVJlc3BvbnNlJnF1b3Q7CgpleHBvcnQgY29uc3QgY2hlY2tlcnNUeXBlczogUmVhZG9ubHlBcnJheSZsdDtbc3RyaW5nLCBHZW5lcmF0ZWRUeXBlXSZndDsgPSBbCiAgICBbdHlwZVVybE1zZ0NyZWF0ZUdhbWUsIE1zZ0NyZWF0ZUdhbWVdLAogICAgW3R5cGVVcmxNc2dDcmVhdGVHYW1lUmVzcG9uc2UsIE1zZ0NyZWF0ZUdhbWVSZXNwb25zZV0sCiAgICBbdHlwZVVybE1zZ1BsYXlNb3ZlLCBNc2dQbGF5TW92ZV0sCiAgICBbdHlwZVVybE1zZ1BsYXlNb3ZlUmVzcG9uc2UsIE1zZ1BsYXlNb3ZlUmVzcG9uc2VdLAogICAgW3R5cGVVcmxNc2dSZWplY3RHYW1lLCBNc2dSZWplY3RHYW1lXSwKICAgIFt0eXBlVXJsTXNnUmVqZWN0R2FtZVJlc3BvbnNlLCBNc2dSZWplY3RHYW1lUmVzcG9uc2VdLApdCg==",url:"https://github.com/cosmos/academy-checkers-ui/blob/dab7dd4/src/types/checkers/messages.ts#L11-L25"}}),e._v(" "),c("p",[e._v("Next proceed with the declarations. As with CosmJS, you can add an "),c("code",[e._v("isMsgXX")]),e._v(" helper for each:")]),e._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"typescript",base64:"ZXhwb3J0IGludGVyZmFjZSBNc2dDcmVhdGVHYW1lRW5jb2RlT2JqZWN0IGV4dGVuZHMgRW5jb2RlT2JqZWN0IHsKICAgIHJlYWRvbmx5IHR5cGVVcmw6ICZxdW90Oy9hbGljZS5jaGVja2Vycy5jaGVja2Vycy5Nc2dDcmVhdGVHYW1lJnF1b3Q7CiAgICByZWFkb25seSB2YWx1ZTogUGFydGlhbCZsdDtNc2dDcmVhdGVHYW1lJmd0Owp9CgpleHBvcnQgZnVuY3Rpb24gaXNNc2dDcmVhdGVHYW1lRW5jb2RlT2JqZWN0KAogICAgZW5jb2RlT2JqZWN0OiBFbmNvZGVPYmplY3QsCik6IGVuY29kZU9iamVjdCBpcyBNc2dDcmVhdGVHYW1lRW5jb2RlT2JqZWN0IHsKICAgIHJldHVybiAoCiAgICAgICAgKGVuY29kZU9iamVjdCBhcyBNc2dDcmVhdGVHYW1lRW5jb2RlT2JqZWN0KS50eXBlVXJsID09PSB0eXBlVXJsTXNnQ3JlYXRlR2FtZQogICAgKQp9CgpleHBvcnQgaW50ZXJmYWNlIE1zZ0NyZWF0ZUdhbWVSZXNwb25zZUVuY29kZU9iamVjdC4uLiB7fQpleHBvcnQgZnVuY3Rpb24gaXNNc2dDcmVhdGVHYW1lUmVzcG9uc2VFbmNvZGVPYmplY3QoLi4uKS4uLgpleHBvcnQgaW50ZXJmYWNlIE1zZ1BsYXlNb3ZlRW5jb2RlT2JqZWN0Li4uIHt9Ci4uLgo=",url:"https://github.com/cosmos/academy-checkers-ui/blob/dab7dd4/src/types/checkers/messages.ts#L27-L47"}}),e._v(" "),c("p",[e._v("This needs to be repeated for each of the messages that you require. To refresh your memory, that is:")]),e._v(" "),c("ul",[c("li",[c("code",[e._v("MsgCreateGame")])]),e._v(" "),c("li",[c("code",[e._v("MsgCreateGameResponse")])]),e._v(" "),c("li",[c("code",[e._v("MsgPlayMove")])]),e._v(" "),c("li",[c("code",[e._v("MsgPlayMoveResponse")])]),e._v(" "),c("li",[c("code",[e._v("MsgRejectGame")])]),e._v(" "),c("li",[c("code",[e._v("MsgRejectGameResponse")])])]),e._v(" "),c("h2",{attrs:{id:"a-signing-stargate-for-checkers"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#a-signing-stargate-for-checkers"}},[e._v("#")]),e._v(" A signing Stargate for Checkers")]),e._v(" "),c("p",[e._v("This process again takes inspiration from "),c("a",{attrs:{href:"https://github.com/cosmos/cosmjs/blob/13ce43c/packages/stargate/src/signingstargateclient.ts#L53-L66",target:"_blank",rel:"noopener noreferrer"}},[c("code",[e._v("SigningStargateClient")]),c("OutboundLink")],1),e._v(". Prepare by registering your new types in addition to the others, so that your client knows them all:")]),e._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"typescript",base64:"aW1wb3J0IHsgZGVmYXVsdFJlZ2lzdHJ5VHlwZXMgfSBmcm9tICZxdW90O0Bjb3NtanMvc3RhcmdhdGUmcXVvdDsKCmV4cG9ydCBjb25zdCBjaGVja2Vyc0RlZmF1bHRSZWdpc3RyeVR5cGVzOiBSZWFkb25seUFycmF5Jmx0O1tzdHJpbmcsIEdlbmVyYXRlZFR5cGVdJmd0OyA9IFsKICAgIC4uLmRlZmF1bHRSZWdpc3RyeVR5cGVzLAogICAgLi4uY2hlY2tlcnNUeXBlcywKXQoKZnVuY3Rpb24gY3JlYXRlRGVmYXVsdFJlZ2lzdHJ5KCk6IFJlZ2lzdHJ5IHsKICAgIHJldHVybiBuZXcgUmVnaXN0cnkoY2hlY2tlcnNEZWZhdWx0UmVnaXN0cnlUeXBlcykKfQo=",url:"https://github.com/cosmos/academy-checkers-ui/blob/dab7dd4/src/checkers_signingstargateclient.ts#L24-L31"}}),e._v(" "),c("p",[e._v("Similar to the read-only "),c("code",[e._v("StargateClient")]),e._v(", create a "),c("code",[e._v("CheckersSigningStargateClient")]),e._v(" that inherits from "),c("code",[e._v("SigningStargateClient")]),e._v(":")]),e._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"typescript",base64:"ZXhwb3J0IGNsYXNzIENoZWNrZXJzU2lnbmluZ1N0YXJnYXRlQ2xpZW50IGV4dGVuZHMgU2lnbmluZ1N0YXJnYXRlQ2xpZW50IHsKICAgIHB1YmxpYyByZWFkb25seSBjaGVja2Vyc1F1ZXJ5Q2xpZW50OiBDaGVja2Vyc0V4dGVuc2lvbiB8IHVuZGVmaW5lZAoKICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgY29ubmVjdFdpdGhTaWduZXIoCiAgICAgICAgZW5kcG9pbnQ6IHN0cmluZywKICAgICAgICBzaWduZXI6IE9mZmxpbmVTaWduZXIsCiAgICAgICAgb3B0aW9uczogU2lnbmluZ1N0YXJnYXRlQ2xpZW50T3B0aW9ucyA9IHt9LAogICAgKTogUHJvbWlzZSZsdDtDaGVja2Vyc1NpZ25pbmdTdGFyZ2F0ZUNsaWVudCZndDsgewogICAgICAgIGNvbnN0IHRtQ2xpZW50ID0gYXdhaXQgVGVuZGVybWludDM0Q2xpZW50LmNvbm5lY3QoZW5kcG9pbnQpCiAgICAgICAgcmV0dXJuIG5ldyBDaGVja2Vyc1NpZ25pbmdTdGFyZ2F0ZUNsaWVudCh0bUNsaWVudCwgc2lnbmVyLCB7CiAgICAgICAgICAgIHJlZ2lzdHJ5OiBjcmVhdGVEZWZhdWx0UmVnaXN0cnkoKSwKICAgICAgICAgICAgLi4ub3B0aW9ucywKICAgICAgICB9KQogICAgfQoKICAgIHByb3RlY3RlZCBjb25zdHJ1Y3RvcigKICAgICAgICB0bUNsaWVudDogVGVuZGVybWludDM0Q2xpZW50IHwgdW5kZWZpbmVkLAogICAgICAgIHNpZ25lcjogT2ZmbGluZVNpZ25lciwKICAgICAgICBvcHRpb25zOiBTaWduaW5nU3RhcmdhdGVDbGllbnRPcHRpb25zLAogICAgKSB7CiAgICAgICAgc3VwZXIodG1DbGllbnQsIHNpZ25lciwgb3B0aW9ucykKICAgICAgICBpZiAodG1DbGllbnQpIHsKICAgICAgICAgICAgdGhpcy5jaGVja2Vyc1F1ZXJ5Q2xpZW50ID0gUXVlcnlDbGllbnQud2l0aEV4dGVuc2lvbnModG1DbGllbnQsIHNldHVwQ2hlY2tlcnNFeHRlbnNpb24pCiAgICAgICAgfQogICAgfQp9Cg==",url:"https://github.com/cosmos/academy-checkers-ui/blob/dab7dd4/src/checkers_signingstargateclient.ts#L33-L57"}}),e._v(" "),c("p",[e._v("Note the use of "),c("code",[e._v("createDefaultRegistry")]),e._v(" as the default registry, if nothing was passed via the options.")]),e._v(" "),c("h2",{attrs:{id:"the-action-methods"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#the-action-methods"}},[e._v("#")]),e._v(" The action methods")]),e._v(" "),c("p",[e._v("Finally you must add the methods that allow you to interact with the blockchain. Taking inspiration from "),c("a",{attrs:{href:"https://github.com/cosmos/cosmjs/blob/13ce43c/packages/stargate/src/signingstargateclient.ts#L176-L192",target:"_blank",rel:"noopener noreferrer"}},[c("code",[e._v("sendTokens")]),c("OutboundLink")],1),e._v(", create one function for each of your messages:")]),e._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"typescript",base64:"cHVibGljIGFzeW5jIGNyZWF0ZUdhbWUoCiAgICBjcmVhdG9yOiBzdHJpbmcsCiAgICBibGFjazogc3RyaW5nLAogICAgcmVkOiBzdHJpbmcsCiAgICB0b2tlbjogc3RyaW5nLAogICAgd2FnZXI6IExvbmcsCiAgICBmZWU6IFN0ZEZlZSB8ICZxdW90O2F1dG8mcXVvdDsgfCBudW1iZXIsCiAgICBtZW1vID0gJnF1b3Q7JnF1b3Q7LAopOiBQcm9taXNlJmx0O0RlbGl2ZXJUeFJlc3BvbnNlJmd0OyB7CiAgICBjb25zdCBjcmVhdGVNc2c6IE1zZ0NyZWF0ZUdhbWVFbmNvZGVPYmplY3QgPSB7CiAgICAgICAgdHlwZVVybDogdHlwZVVybE1zZ0NyZWF0ZUdhbWUsCiAgICAgICAgdmFsdWU6IHsKICAgICAgICAgICAgYmxhY2s6IGJsYWNrLAogICAgICAgICAgICByZWQ6IHJlZCwKICAgICAgICAgICAgY3JlYXRvcjogY3JlYXRvciwKICAgICAgICAgICAgdG9rZW46IHRva2VuLAogICAgICAgICAgICB3YWdlcjogd2FnZXIsCiAgICAgICAgfSwKICAgIH0KICAgIHJldHVybiB0aGlzLnNpZ25BbmRCcm9hZGNhc3QoY3JlYXRvciwgW2NyZWF0ZU1zZ10sIGZlZSwgbWVtbykKfQoKcHVibGljIGFzeW5jIHBsYXlNb3ZlKAogICAgY3JlYXRvcjogc3RyaW5nLAogICAgZ2FtZUlkOiBzdHJpbmcsCiAgICBmcm9tOiBQb3MsCiAgICB0bzogUG9zLAogICAgZmVlOiBTdGRGZWUgfCAmcXVvdDthdXRvJnF1b3Q7IHwgbnVtYmVyLAogICAgbWVtbyA9ICZxdW90OyZxdW90OywKKTogUHJvbWlzZSZsdDtEZWxpdmVyVHhSZXNwb25zZSZndDsgewogICAgY29uc3QgcGxheU1vdmVNc2c6IE1zZ1BsYXlNb3ZlRW5jb2RlT2JqZWN0ID0gewogICAgICAgIHR5cGVVcmw6IHR5cGVVcmxNc2dQbGF5TW92ZSwKICAgICAgICB2YWx1ZTogewogICAgICAgICAgICBjcmVhdG9yOiBjcmVhdG9yLAogICAgICAgICAgICBpZFZhbHVlOiBnYW1lSWQsCiAgICAgICAgICAgIGZyb21YOiBMb25nLmZyb21OdW1iZXIoZnJvbS54KSwKICAgICAgICAgICAgZnJvbVk6IExvbmcuZnJvbU51bWJlcihmcm9tLnkpLAogICAgICAgICAgICB0b1g6IExvbmcuZnJvbU51bWJlcih0by54KSwKICAgICAgICAgICAgdG9ZOiBMb25nLmZyb21OdW1iZXIodG8ueSksCiAgICAgICAgfSwKICAgIH0KICAgIHJldHVybiB0aGlzLnNpZ25BbmRCcm9hZGNhc3QoY3JlYXRvciwgW3BsYXlNb3ZlTXNnXSwgZmVlLCBtZW1vKQp9CgpwdWJsaWMgYXN5bmMgcmVqZWN0R2FtZSgKICAgIGNyZWF0b3I6IHN0cmluZywKICAgIGdhbWVJZDogc3RyaW5nLAogICAgZmVlOiBTdGRGZWUgfCAmcXVvdDthdXRvJnF1b3Q7IHwgbnVtYmVyLAogICAgbWVtbyA9ICZxdW90OyZxdW90OywKKTogUHJvbWlzZSZsdDtEZWxpdmVyVHhSZXNwb25zZSZndDsgewogICAgY29uc3QgcmVqZWN0R2FtZU1zZzogTXNnUmVqZWN0R2FtZUVuY29kZU9iamVjdCA9IHsKICAgICAgICB0eXBlVXJsOiB0eXBlVXJsTXNnUmVqZWN0R2FtZSwKICAgICAgICB2YWx1ZTogewogICAgICAgICAgICBjcmVhdG9yOiBjcmVhdG9yLAogICAgICAgICAgICBpZFZhbHVlOiBnYW1lSWQsCiAgICAgICAgfSwKICAgIH0KICAgIHJldHVybiB0aGlzLnNpZ25BbmRCcm9hZGNhc3QoY3JlYXRvciwgW3JlamVjdEdhbWVNc2ddLCBmZWUsIG1lbW8pCn0K",url:"https://github.com/cosmos/academy-checkers-ui/blob/dab7dd4/src/checkers_signingstargateclient.ts#L59-L117"}}),e._v(" "),c("h2",{attrs:{id:"test-your-signing-client"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#test-your-signing-client"}},[e._v("#")]),e._v(" Test your signing client")]),e._v(" "),c("p",[e._v("For live testing, reuse the "),c("code",[e._v("experiment.ts")]),e._v(" file created in the "),c("RouterLink",{attrs:{to:"/academy/cosmjs-checkers-sections/cosmjs-objects.html"}},[e._v("previous section")]),e._v(". This time you first need to provide a signer. You learned how to do this in the "),c("RouterLink",{attrs:{to:"/academy/xl-cosmjs/first-steps.html"}},[e._v("CosmJS introduction section")]),e._v(".")],1),e._v(" "),c("h3",{attrs:{id:"key-preparation-with-a-mnemonic"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#key-preparation-with-a-mnemonic"}},[e._v("#")]),e._v(" Key preparation with a mnemonic")]),e._v(" "),c("p",[e._v("If you do your experimentation while starting the chain with "),c("code",[e._v("ignite chain serve")]),e._v(", you can reuse the mnemonics that Ignite CLI gives you with this function:")]),e._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"typescript",base64:"Y29uc3QgZ2V0U2lnbmVyRnJvbU1uZW1vbmljID0gYXN5bmMgKGZpbGVQYXRoOiBzdHJpbmcpOiBQcm9taXNlJmx0O09mZmxpbmVEaXJlY3RTaWduZXImZ3Q7ID0mZ3Q7IHsKICAgIHJldHVybiBEaXJlY3RTZWNwMjU2azFIZFdhbGxldC5mcm9tTW5lbW9uaWMoKGF3YWl0IHJlYWRGaWxlKGZpbGVQYXRoKSkudG9TdHJpbmcoKSwgewogICAgICAgIHByZWZpeDogJnF1b3Q7Y29zbW9zJnF1b3Q7LAogICAgfSkKfQo=",url:"https://github.com/cosmos/academy-checkers-ui/blob/dab7dd4/test/live/experiment.ts#L14-L18"}}),e._v(" "),c("p",[e._v("Note that this works as long as you have a mnemonic. If you're running your chain locally over Ignite CLI, start the chain with:")]),e._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBpZ25pdGUgY2hhaW4gc2VydmUgLS1yZXNldC1vbmNlCg=="}}),e._v(" "),c("p",[e._v("Save the mnemonics of Alice and Bob in their own "),c("code",[e._v("alice.key")]),e._v(" and "),c("code",[e._v("bob.key")]),e._v(" right next to "),c("code",[e._v("experiment.ts")]),e._v(":")]),e._v(" "),c("ul",[c("li",[e._v("Do not add any "),c("a",{attrs:{href:"https://github.com/cosmos/b9-checkers-academy-draft/blob/dab7dd4/client/test/live/alice.key.sample",target:"_blank",rel:"noopener noreferrer"}},[e._v("extra character"),c("OutboundLink")],1),e._v(" in the files.")]),e._v(" "),c("li",[e._v("Add "),c("a",{attrs:{href:"https://github.com/cosmos/b9-checkers-academy-draft/blob/dab7dd4/.gitignore#L2",target:"_blank",rel:"noopener noreferrer"}},[c("code",[e._v("*.key")]),e._v(" to "),c("code",[e._v(".gitignore")]),c("OutboundLink")],1),e._v(" so as not to commit these test files by mistake.")])]),e._v(" "),c("h3",{attrs:{id:"key-preparation-with-a-private-key"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#key-preparation-with-a-private-key"}},[e._v("#")]),e._v(" Key preparation with a private key")]),e._v(" "),c("p",[e._v("If you do your experimentation in another way without a mnemonic (in particular if you only have access to the raw private key), use this function instead:")]),e._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"typescript",base64:"Y29uc3QgZ2V0U2lnbmVyRnJvbVByaUtleSA9IGFzeW5jIChmaWxlUGF0aDogc3RyaW5nKTogUHJvbWlzZSZsdDtPZmZsaW5lRGlyZWN0U2lnbmVyJmd0OyA9Jmd0OyB7CiAgICByZXR1cm4gRGlyZWN0U2VjcDI1NmsxV2FsbGV0LmZyb21LZXkoZnJvbUhleCgoYXdhaXQgcmVhZEZpbGUoZmlsZVBhdGgpKS50b1N0cmluZygpKSwgJnF1b3Q7Y29zbW9zJnF1b3Q7KQp9Cg==",url:"https://github.com/cosmos/academy-checkers-ui/blob/dab7dd4/test/live/experiment.ts#L20-L22"}}),e._v(" "),c("p",[e._v("Also use the "),c("code",[e._v(".gitignore")]),e._v(" file to avoid committing key files.")]),e._v(" "),c("h3",{attrs:{id:"client-preparation"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#client-preparation"}},[e._v("#")]),e._v(" Client preparation")]),e._v(" "),c("p",[e._v("In "),c("code",[e._v("experiment.ts")]),e._v(" create clients for Alice and Bob. For example, for Alice:")]),e._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"typescript",base64:"Y29uc3QgYWxpY2VTaWduZXI6IE9mZmxpbmVEaXJlY3RTaWduZXIgPSBhd2FpdCBnZXRTaWduZXJGcm9tTW5lbW9uaWMoYCR7X19kaXJuYW1lfS9hbGljZS5rZXlgKQpjb25zdCBhbGljZTogc3RyaW5nID0gKGF3YWl0IGFsaWNlU2lnbmVyLmdldEFjY291bnRzKCkpWzBdLmFkZHJlc3MKY29uc3QgYWxpY2VTaWduaW5nQ2xpZW50OiBDaGVja2Vyc1NpZ25pbmdTdGFyZ2F0ZUNsaWVudCA9CiAgICBhd2FpdCBDaGVja2Vyc1NpZ25pbmdTdGFyZ2F0ZUNsaWVudC5jb25uZWN0V2l0aFNpZ25lcihwcm9jZXNzLmVudi5SUENfVVJMLCBhbGljZVNpZ25lciwgewogICAgICAgIGdhc1ByaWNlOiBHYXNQcmljZS5mcm9tU3RyaW5nKCZxdW90OzFzdGFrZSZxdW90OyksCiAgICB9KQo=",url:"https://github.com/cosmos/academy-checkers-ui/blob/dab7dd4/test/live/experiment.ts#L42-L47"}}),e._v(" "),c("p",[e._v("Note the use of a default gas price so that you can use "),c("code",[e._v('"auto"')]),e._v(" later on. You do not need to input a high price because you are on your local machine or a test net for this "),c("code",[e._v("experiment.ts")]),e._v(".")]),e._v(" "),c("h3",{attrs:{id:"create-a-game"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#create-a-game"}},[e._v("#")]),e._v(" Create a game")]),e._v(" "),c("p",[e._v("Create a game with a small wager:")]),e._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"typescript",base64:"Y29uc3QgY3JlYXRlUmVzcG9uc2U6IERlbGl2ZXJUeFJlc3BvbnNlID0gYXdhaXQgYWxpY2VTaWduaW5nQ2xpZW50LmNyZWF0ZUdhbWUoCiAgICBhbGljZSwKICAgIGJvYiwKICAgIGFsaWNlLAogICAgJnF1b3Q7c3Rha2UmcXVvdDssCiAgICBMb25nLmZyb21OdW1iZXIoNSksCiAgICAmcXVvdDthdXRvJnF1b3Q7LAopCmNvbnNvbGUubG9nKGNyZWF0ZVJlc3BvbnNlKQo=",url:"https://github.com/cosmos/academy-checkers-ui/blob/dab7dd4/test/live/experiment.ts#L56-L64"}}),e._v(" "),c("p",[e._v("Which returns something like:")]),e._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"json",base64:"ewogIGNvZGU6IDAsCiAgaGVpZ2h0OiAzNDgsCiAgcmF3TG9nOiAnW3smcXVvdDtldmVudHMmcXVvdDs6W3smcXVvdDt0eXBlJnF1b3Q7OiZxdW90O21lc3NhZ2UmcXVvdDssJnF1b3Q7YXR0cmlidXRlcyZxdW90OzpbeyZxdW90O2tleSZxdW90OzomcXVvdDthY3Rpb24mcXVvdDssJnF1b3Q7dmFsdWUmcXVvdDs6JnF1b3Q7Q3JlYXRlR2FtZSZxdW90O30seyZxdW90O2tleSZxdW90OzomcXVvdDttb2R1bGUmcXVvdDssJnF1b3Q7dmFsdWUmcXVvdDs6JnF1b3Q7Y2hlY2tlcnMmcXVvdDt9LHsmcXVvdDtrZXkmcXVvdDs6JnF1b3Q7YWN0aW9uJnF1b3Q7LCZxdW90O3ZhbHVlJnF1b3Q7OiZxdW90O05ld0dhbWVDcmVhdGVkJnF1b3Q7fSx7JnF1b3Q7a2V5JnF1b3Q7OiZxdW90O0NyZWF0b3ImcXVvdDssJnF1b3Q7dmFsdWUmcXVvdDs6JnF1b3Q7Y29zbW9zMTl2dXBzcWNtZ2h3d240Y2Y4cWYyZWM5d2Q3dGRyejB2ZXR3NWZzJnF1b3Q7fSx7JnF1b3Q7a2V5JnF1b3Q7OiZxdW90O0luZGV4JnF1b3Q7LCZxdW90O3ZhbHVlJnF1b3Q7OiZxdW90OzEmcXVvdDt9LHsmcXVvdDtrZXkmcXVvdDs6JnF1b3Q7UmVkJnF1b3Q7LCZxdW90O3ZhbHVlJnF1b3Q7OiZxdW90O2Nvc21vczE5dnVwc3FjbWdod3duNGNmOHFmMmVjOXdkN3RkcnowdmV0dzVmcyZxdW90O30seyZxdW90O2tleSZxdW90OzomcXVvdDtCbGFjayZxdW90OywmcXVvdDt2YWx1ZSZxdW90OzomcXVvdDtjb3Ntb3MxZTBld3BuNWE0em1sdTk0NWVxZW04cDRxNGwwNHdwZ2x5NzBrdmomcXVvdDt9LHsmcXVvdDtrZXkmcXVvdDs6JnF1b3Q7V2FnZXImcXVvdDssJnF1b3Q7dmFsdWUmcXVvdDs6JnF1b3Q7NSZxdW90O30seyZxdW90O2tleSZxdW90OzomcXVvdDtUb2tlbiZxdW90OywmcXVvdDt2YWx1ZSZxdW90OzomcXVvdDtzdGFrZSZxdW90O31dfV19XScsCiAgdHJhbnNhY3Rpb25IYXNoOiAnNTBEMzM2MkFFNDZBMDRENEQ4NEMyNjY1MzVGODE2NUM5QzQyREFBOTQxREZFNURGM0VBNDdGOTU5MjM4QkE0OScsCiAgZ2FzVXNlZDogNjQxOTAsCiAgZ2FzV2FudGVkOiA3MTE1Mgp9Cg=="}}),e._v(" "),c("p",[e._v("You can also create a small utility to extract the index of the game just created:")]),e._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"typescript",base64:"ZXhwb3J0IGNvbnN0IGdldENyZWF0ZWRHYW1lSWQgPSAoY3JlYXRlUmVzcG9uc2U6IERlbGl2ZXJUeFJlc3BvbnNlLCBtc2dJbmRleDogbnVtYmVyKTogc3RyaW5nID0mZ3Q7IHsKICAgIHJldHVybiBKU09OLnBhcnNlKGNyZWF0ZVJlc3BvbnNlLnJhd0xvZyEpWzBdLmV2ZW50c1ttc2dJbmRleF0uYXR0cmlidXRlcy5maW5kKAogICAgICAgIChldmVudEluZm86IHsga2V5OiBzdHJpbmcgfSkgPSZndDsgZXZlbnRJbmZvLmtleSA9PSAmcXVvdDtJbmRleCZxdW90OywKICAgICkudmFsdWUKfQo=",url:"https://github.com/cosmos/academy-checkers-ui/blob/dab7dd4/src/types/checkers/events.ts#L3-L7"}}),e._v(" "),c("p",[e._v("Now use it:")]),e._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"typescript",base64:"Y29uc3QgY3JlYXRlZEdhbWVJZDogc3RyaW5nID0gZ2V0Q3JlYXRlZEdhbWVJZChjcmVhdGVSZXNwb25zZSwgMCkK",url:"https://github.com/cosmos/academy-checkers-ui/blob/dab7dd4/test/live/experiment.ts#L65"}}),e._v(" "),c("h3",{attrs:{id:"playing-a-move"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#playing-a-move"}},[e._v("#")]),e._v(" Playing a move")]),e._v(" "),c("p",[e._v("Before Bob plays it would be good to know if his move is possible. This query does not need any signer, so use the read-only client:")]),e._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"typescript",base64:"Y29uc3QgY2FuUGxheTogUXVlcnlDYW5QbGF5TW92ZVJlc3BvbnNlID0gYXdhaXQgY2xpZW50LmNoZWNrZXJzUXVlcnlDbGllbnQuY2hlY2tlcnMuY2FuUGxheU1vdmUoCiAgICBjcmVhdGVkR2FtZUlkLAogICAgJnF1b3Q7YiZxdW90OywKICAgIHsgeDogMSwgeTogMiB9LAogICAgeyB4OiAyLCB5OiAzIH0sCikKY29uc29sZS5sb2coY2FuUGxheSkK",url:"https://github.com/cosmos/academy-checkers-ui/blob/dab7dd4/test/live/experiment.ts#L68-L74"}}),e._v(" "),c("p",[e._v("Which prints:")]),e._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"json",base64:"eyBwb3NzaWJsZTogdHJ1ZSwgcmVhc29uOiAnb2snIH0K"}}),e._v(" "),c("p",[e._v("With this assurance, you can send the transaction:")]),e._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"typescript",base64:"Y29uc3QgcGxheVJlc3BvbnNlOiBEZWxpdmVyVHhSZXNwb25zZSA9IGF3YWl0IGJvYlNpZ25pbmdDbGllbnQucGxheU1vdmUoCiAgICBib2IsCiAgICBjcmVhdGVkR2FtZUlkLAogICAgeyB4OiAxLCB5OiAyIH0sCiAgICB7IHg6IDIsIHk6IDMgfSwKICAgICZxdW90O2F1dG8mcXVvdDssCikKY29uc29sZS5sb2cocGxheVJlc3BvbnNlKQo=",url:"https://github.com/cosmos/academy-checkers-ui/blob/dab7dd4/test/live/experiment.ts#L76-L83"}}),e._v(" "),c("p",[e._v("Which prints something like:")]),e._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"json",base64:"ewogIGNvZGU6IDAsCiAgaGVpZ2h0OiAzNTAsCiAgcmF3TG9nOiAnW3smcXVvdDtldmVudHMmcXVvdDs6W3smcXVvdDt0eXBlJnF1b3Q7OiZxdW90O21lc3NhZ2UmcXVvdDssJnF1b3Q7YXR0cmlidXRlcyZxdW90OzpbeyZxdW90O2tleSZxdW90OzomcXVvdDthY3Rpb24mcXVvdDssJnF1b3Q7dmFsdWUmcXVvdDs6JnF1b3Q7UGxheU1vdmUmcXVvdDt9LHsmcXVvdDtrZXkmcXVvdDs6JnF1b3Q7c2VuZGVyJnF1b3Q7LCZxdW90O3ZhbHVlJnF1b3Q7OiZxdW90O2Nvc21vczFlMGV3cG41YTR6bWx1OTQ1ZXFlbThwNHE0bDA0d3BnbHk3MGt2aiZxdW90O30seyZxdW90O2tleSZxdW90OzomcXVvdDttb2R1bGUmcXVvdDssJnF1b3Q7dmFsdWUmcXVvdDs6JnF1b3Q7Y2hlY2tlcnMmcXVvdDt9LHsmcXVvdDtrZXkmcXVvdDs6JnF1b3Q7YWN0aW9uJnF1b3Q7LCZxdW90O3ZhbHVlJnF1b3Q7OiZxdW90O01vdmVQbGF5ZWQmcXVvdDt9LHsmcXVvdDtrZXkmcXVvdDs6JnF1b3Q7Q3JlYXRvciZxdW90OywmcXVvdDt2YWx1ZSZxdW90OzomcXVvdDtjb3Ntb3MxZTBld3BuNWE0em1sdTk0NWVxZW04cDRxNGwwNHdwZ2x5NzBrdmomcXVvdDt9LHsmcXVvdDtrZXkmcXVvdDs6JnF1b3Q7SWRWYWx1ZSZxdW90OywmcXVvdDt2YWx1ZSZxdW90OzomcXVvdDsxJnF1b3Q7fSx7JnF1b3Q7a2V5JnF1b3Q7OiZxdW90O0NhcHR1cmVkWCZxdW90OywmcXVvdDt2YWx1ZSZxdW90OzomcXVvdDstMSZxdW90O30seyZxdW90O2tleSZxdW90OzomcXVvdDtDYXB0dXJlZFkmcXVvdDssJnF1b3Q7dmFsdWUmcXVvdDs6JnF1b3Q7LTEmcXVvdDt9LHsmcXVvdDtrZXkmcXVvdDs6JnF1b3Q7V2lubmVyJnF1b3Q7LCZxdW90O3ZhbHVlJnF1b3Q7OiZxdW90O05PX1BMQVlFUiZxdW90O31dfSx7JnF1b3Q7dHlwZSZxdW90OzomcXVvdDt0cmFuc2ZlciZxdW90OywmcXVvdDthdHRyaWJ1dGVzJnF1b3Q7Olt7JnF1b3Q7a2V5JnF1b3Q7OiZxdW90O3JlY2lwaWVudCZxdW90OywmcXVvdDt2YWx1ZSZxdW90OzomcXVvdDtjb3Ntb3MxNnh4MGU0NTdobThteXdkaHh0bXJhcjl0MDl6MG1xdDl4N3NybTMmcXVvdDt9LHsmcXVvdDtrZXkmcXVvdDs6JnF1b3Q7c2VuZGVyJnF1b3Q7LCZxdW90O3ZhbHVlJnF1b3Q7OiZxdW90O2Nvc21vczFlMGV3cG41YTR6bWx1OTQ1ZXFlbThwNHE0bDA0d3BnbHk3MGt2aiZxdW90O30seyZxdW90O2tleSZxdW90OzomcXVvdDthbW91bnQmcXVvdDssJnF1b3Q7dmFsdWUmcXVvdDs6JnF1b3Q7NXN0YWtlJnF1b3Q7fV19XX1dJywKICB0cmFuc2FjdGlvbkhhc2g6ICdEMEZEQzE1NEYzRTg0NjgzMTQ0MjI4M0Y0MTFCNkUxQjg2RTNFMEIyM0Q2MDIwRjYwMTkzNkMxQ0E3QUQ2NDFGJywKICBnYXNVc2VkOiA5MDI5NywKICBnYXNXYW50ZWQ6IDEwNDg2Ngp9Cg=="}}),e._v(" "),c("p",[e._v("Look carefully in the "),c("code",[e._v("rawLog")]),e._v(" and you can find the wager payment event:")]),e._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"json",base64:"ewogICAgJnF1b3Q7dHlwZSZxdW90OzogJnF1b3Q7dHJhbnNmZXImcXVvdDssCiAgICAmcXVvdDthdHRyaWJ1dGVzJnF1b3Q7OiBbCiAgICAgICAgewogICAgICAgICAgICAmcXVvdDtrZXkmcXVvdDs6ICZxdW90O3JlY2lwaWVudCZxdW90OywKICAgICAgICAgICAgJnF1b3Q7dmFsdWUmcXVvdDs6ICZxdW90O2Nvc21vczE2eHgwZTQ1N2htOG15d2RoeHRtcmFyOXQwOXowbXF0OXg3c3JtMyZxdW90OwogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgICAmcXVvdDtrZXkmcXVvdDs6ICZxdW90O3NlbmRlciZxdW90OywKICAgICAgICAgICAgJnF1b3Q7dmFsdWUmcXVvdDs6ICZxdW90O2Nvc21vczFlMGV3cG41YTR6bWx1OTQ1ZXFlbThwNHE0bDA0d3BnbHk3MGt2aiZxdW90OwogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgICAmcXVvdDtrZXkmcXVvdDs6ICZxdW90O2Ftb3VudCZxdW90OywKICAgICAgICAgICAgJnF1b3Q7dmFsdWUmcXVvdDs6ICZxdW90OzVzdGFrZSZxdW90OwogICAgICAgIH0KICAgIF0KfQo="}}),e._v(" "),c("p",[e._v("You can see that the escrow address of the checkers module is "),c("code",[e._v("cosmos16xx0e...7srm3")]),e._v(".")]),e._v(" "),c("h3",{attrs:{id:"reject-the-game"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#reject-the-game"}},[e._v("#")]),e._v(" Reject the game")]),e._v(" "),c("p",[e._v("To test this feature, have Alice reject the game:")]),e._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"typescript",base64:"Y29uc3QgcmVqZWN0UmVzcG9uc2U6IERlbGl2ZXJUeFJlc3BvbnNlID0gYXdhaXQgYWxpY2VTaWduaW5nQ2xpZW50LnJlamVjdEdhbWUoCiAgICBhbGljZSwKICAgIGNyZWF0ZWRHYW1lSWQsCiAgICAmcXVvdDthdXRvJnF1b3Q7LAopCmNvbnNvbGUubG9nKHJlamVjdFJlc3BvbnNlKQo=",url:"https://github.com/cosmos/academy-checkers-ui/blob/dab7dd4/test/live/experiment.ts#L86-L91"}}),e._v(" "),c("p",[e._v("In its print, you can also find the escrow refund event of the form:")]),e._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"json",base64:"ewogICAgJnF1b3Q7dHlwZSZxdW90OzogJnF1b3Q7dHJhbnNmZXImcXVvdDssCiAgICAmcXVvdDthdHRyaWJ1dGVzJnF1b3Q7OiBbCiAgICAgICAgewogICAgICAgICAgICAmcXVvdDtrZXkmcXVvdDs6ICZxdW90O3JlY2lwaWVudCZxdW90OywKICAgICAgICAgICAgJnF1b3Q7dmFsdWUmcXVvdDs6ICZxdW90O2Nvc21vczFlMGV3cG41YTR6bWx1OTQ1ZXFlbThwNHE0bDA0d3BnbHk3MGt2aiZxdW90OwogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgICAmcXVvdDtrZXkmcXVvdDs6ICZxdW90O3NlbmRlciZxdW90OywKICAgICAgICAgICAgJnF1b3Q7dmFsdWUmcXVvdDs6ICZxdW90O2Nvc21vczE2eHgwZTQ1N2htOG15d2RoeHRtcmFyOXQwOXowbXF0OXg3c3JtMyZxdW90OwogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgICAmcXVvdDtrZXkmcXVvdDs6ICZxdW90O2Ftb3VudCZxdW90OywKICAgICAgICAgICAgJnF1b3Q7dmFsdWUmcXVvdDs6ICZxdW90OzVzdGFrZSZxdW90OwogICAgICAgIH0KICAgIF0KfQo="}}),e._v(" "),c("p",[e._v("This is great news!")]),e._v(" "),c("p",[e._v("With the "),c("a",{attrs:{href:"https://github.com/cosmos/academy-checkers-ui/blob/dab7dd4/test/live/experiment.ts#L33",target:"_blank",rel:"noopener noreferrer"}},[c("code",[e._v("getAllStoredGames")]),e._v(" call"),c("OutboundLink")],1),e._v(" you can modify this test file, in particular by choosing not to reject the game but instead to list it in the next test run.")]),e._v(" "),c("h2",{attrs:{id:"next-up"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#next-up"}},[e._v("#")]),e._v(" Next up")]),e._v(" "),c("p",[e._v("You now included elements and messages that allow you to interact with the checkers blockchain. You confirmed this with a small Node.js experimentation file. The only things that remain to do are adding any "),c("RouterLink",{attrs:{to:"/academy/cosmjs-checkers-sections/server-side.html"}},[e._v("server-side scripts")]),e._v(" and plugging the elements you have created into "),c("RouterLink",{attrs:{to:"/academy/cosmjs-checkers-sections/external-gui.html"}},[e._v("a graphical user interface")]),e._v(".")],1),e._v(" "),c("p",[e._v("Head to the [next chapter](INCLUDE URL AFTER NEW STRUCTURE IS IMPLEMENTED) on CosmJS to work on the GUI and backend script for your checkers blockchain.")])],1)}),[],!1,null,null,null);t.default=d.exports}}]);