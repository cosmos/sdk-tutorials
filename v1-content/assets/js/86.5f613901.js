(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{705:function(e,t,o){"use strict";o.r(t);var a=o(1),n=Object(a.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h1",{attrs:{id:"consensus-in-distributed-networks"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#consensus-in-distributed-networks"}},[e._v("#")]),e._v(" Consensus in Distributed Networks")]),e._v(" "),o("p",[e._v("A known challenge in distributed computing, which is provably unsolvable but can nonetheless be mitigated, is how to reach "),o("strong",[e._v("consensus")]),e._v(" in a hierarchy-free, permissionless, and failure-prone network. In a distributed network without authorities, we need a process to reach consensus about what is to be considered the "),o("strong",[e._v("truth")]),e._v(". This is referred to as distributed consensus.")]),e._v(" "),o("p",[e._v("This problem is commonly known as the "),o("strong",[e._v("Byzantine Generals Problem")]),e._v(" and mitigation strategies for it are subsumed under the term "),o("strong",[e._v("Byzantine Fault Tolerance (BFT)")]),e._v(".")]),e._v(" "),o("p",[e._v("An overview of well-known blockchain solutions provides perspective and insight into the options Cosmos offers, because Cosmos allows a network designer to choose the consensus algorithm that is best suited to the developer's purpose.")]),e._v(" "),o("p",[e._v("In the traditional description of the problem, generals, whose armies are spread around a target city, need to reach consensus on a time to attack. The generals can only rely on "),o("strong",[e._v("unsecured communication channels")]),e._v(" to achieve this. A lack of acknowledgment can either be caused by a failure to deliver a message, by a dead general, or by a failure to deliver the acknowledgment. While there are variations of the problem description to adapt to varying real-world fault-tolerance situations, most descriptions include an element of catastrophe if the generals fail to coordinate their actions.")]),e._v(" "),o("p",[o("tm-image",{attrs:{src:"/academy/0.0-B9lab-Blockchains/images/00_06_byzantine_generals_dark_notitle-01.png"}})],1),e._v(" "),o("p",[e._v("Similar to the generals who must decide when to attack, the agreed transaction list in a distributed ledger has to be identified, and consensus on the correct order of transactions has to be reached.")]),e._v(" "),o("HighlightBox",{attrs:{type:"info"}},[o("p",[e._v("Remember, individual transactions are sent to the network from individual nodes. Each node must pass (or fail to pass) transactions to other nodes. Because of the time delay required for data to physically travel across the network (i.e. physical latencies), not all nodes will see the same transactions at the same time. Each node must therefore build its own order of transactions. Since all nodes participate equally, there is "),o("strong",[e._v("no authoritative order of transactions")]),e._v(". Nevertheless, the network must decide which node's version (or any version) of the truth will become the authoritative truth, also known as the canonical chain.")])]),e._v(" "),o("p",[e._v("In addition to the chain of blocks, one of the innovations introduced by Bitcoin was to use "),o("strong",[e._v("proof-of-work (PoW)")]),e._v(" to reach consensus. Since then, many other consensus algorithms have been proposed and employed. One should note that there were consensus algorithms presented in the academic community "),o("em",[e._v("before")]),e._v(" Bitcoin.")]),e._v(" "),o("p",[e._v("Many teams have experimented with distributed consensus using many algorithms deployed to different chains. The algorithms that exist can be compared in terms of the distribution of authority, expected performance, and transaction finality. Transaction finality can be categorized as:")]),e._v(" "),o("ul",[o("li",[o("strong",[e._v("Probabilistic:")]),e._v(" it is exponentially more improbable that a seen transaction will be reversed.")]),e._v(" "),o("li",[o("strong",[e._v("Deterministic:")]),e._v(" the protocol prevents alterations in a definite way.")])]),e._v(" "),o("p",[e._v("Let us look at some of the most popular consensus algorithms to keep in mind when diving into consensus in Cosmos.")]),e._v(" "),o("h2",{attrs:{id:"proof-of-work-pow"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#proof-of-work-pow"}},[e._v("#")]),e._v(" Proof-of-Work (PoW)")]),e._v(" "),o("p",[e._v("A user completes a task of "),o("strong",[e._v("arbitrary difficulty")]),e._v(". This is generally implemented as a search for a random number, which when combined with ordered transactions in a block yields a hash function result that matches certain criteria, such as a minimum number of leading zeroes. Finding such a solution is taken as evidence of considerable effort, meaning proof that considerable work "),o("strong",[e._v("must")]),e._v(" have been invested in the search.")]),e._v(" "),o("HighlightBox",{attrs:{type:"info"}},[o("p",[e._v('The idea of substantiating a claim through an arbitrary amount of work was previously suggested as a way to combat denial-of-service (DoS) attacks and spam in other contexts. "Work" is understood as the amount of specific computational effort used.')])]),e._v(" "),o("p",[e._v("The network's "),o("strong",[e._v("nodes")]),e._v(", also known as miners, conduct their searches independently. The successful node that announces a solution first receives an economic reward to encourage participation in the process.")]),e._v(" "),o("p",[e._v("If a node wishes to distort the ledger in a PoW system, it must first acquire an "),o("strong",[e._v("authoritative position")]),e._v(" or it will be unable to influence the ledger. Acquiring an authoritative position implies overcoming the "),o("em",[e._v("combined")]),e._v(" problem-solving capacity of the network and maintaining that lead over time. This known attack vector is called the 51%-attack. As the name suggests, if a single party acquires more than 50% of the total problem-solving capacity of the network, that party is theoretically able to alter the consensus.")]),e._v(" "),o("p",[e._v("The control mechanism for the amount of work is called "),o("strong",[e._v("difficulty")]),e._v(" and it guarantees a given average block creation time. PoW networks set a target average time for a solution to be found by "),o("em",[e._v("any")]),e._v(" node on the network. The difficulty adjusts to compensate for increasing/decreasing total network problem-solving capacity. Thus, PoW networks do not get faster as more computing capacity is added. They become more resilient by increasing difficulty, which raises the threshold a 51%-attacker needs to overcome.")]),e._v(" "),o("h2",{attrs:{id:"proof-of-authority-poa"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#proof-of-authority-poa"}},[e._v("#")]),e._v(" Proof-of-Authority (PoA)")]),e._v(" "),o("p",[o("strong",[e._v("Proof-of-Authority (PoA)")]),e._v(" is a simple mechanism that solves for faster block times by relying on validators that are pre-selected based on the belief that they are trustworthy. In other words, validators are allowed to produce blocks based solely on their pre-existing authority. A frequently cited criticism of PoA networks is that everyone needs to trust the validators in order to trust the overall network and blockchain.")]),e._v(" "),o("h2",{attrs:{id:"proof-of-stake-pos"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#proof-of-stake-pos"}},[e._v("#")]),e._v(" Proof-of-Stake (PoS)")]),e._v(" "),o("p",[o("strong",[e._v("Proof-of-stake (PoS)")]),e._v(" is another method of selecting the authoritative node for a given block. PoS is based on the assumption that those with the most to lose are the most incentivized to safeguard network integrity. Thus, block validators are selected based on their stake (i.e. the amount of cryptocurrency held).")]),e._v(" "),o("p",[e._v('A successful PoS system must address the problem of "nothing at stake". That is, randomly-selected validators must face a disincentive for bad behavior as well as a high probability that bad behavior will be detected. The burden of detection usually falls on the rest of the network, which can either accept or reject the validator\'s opinion. A solution to mitigate the "nothing at stake" problem is to extract a penalty for emitting opinions that are ultimately rejected by the network: validators face economic penalties when they generate blocks that are rejected by sizable numbers of other nodes. A validator is thus incentivized to generate blocks that are likely to be accepted by the network and faces economic punishment when it fails to do so. Validators place funds (i.e. '),o("strong",[e._v("the stake")]),e._v(") at risk.")]),e._v(" "),o("p",[e._v("For any given block, a validator is selected in a pseudo-random fashion. The validator with a larger stake has a higher probability of being selected to generate a block. While PoS systems generally reward validators with new coins for honest behavior, so-called "),o("strong",[e._v("block rewards")]),e._v(", validators also receive transaction fees in return for generating blocks that the rest of the network accepts.")]),e._v(" "),o("h2",{attrs:{id:"delegated-proof-of-stake-dpos"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#delegated-proof-of-stake-dpos"}},[e._v("#")]),e._v(" Delegated-Proof-of-Stake (DPoS)")]),e._v(" "),o("p",[e._v("An extension of Proof-of-Stake algorithms is called Delegated-Proof-of-Stake (DPoS). It is used for example in BitShares, EOS, Steem, Lisk, and Tron.")]),e._v(" "),o("p",[e._v("The algorithm is called DPoS because, as in PoS, the value of a vote is determined by the stake (i.e. tokens held by a user). However, there is a fixed validator set in DPoS systems. For example, in EOS, there are only 21 validators that participate in consensus. In pure PoS systems, there is no fixed validator set and the number of potential validators that can participate in the consensus mechanism is dependent on the total supply of tokens in circulation.")]),e._v(" "),o("p",[e._v("In this type of consensus mechanism, so-called "),o("strong",[e._v("witnesses")]),e._v(" are elected by the stakeholders of the network to secure the network. Afterward, several witnesses are chosen for the block creation so that they represent at least 50% of the stakeholders' votes.")]),e._v(" "),o("p",[o("tm-image",{attrs:{src:"/academy/0.0-B9lab-Blockchains/images/00_07_delegated_pos-01.png"}})],1),e._v(" "),o("p",[e._v("Witnesses are paid for their services, receiving fees for creating and validating blocks. This economic incentivization to become a witness also leads to competition potentially increasing with each new member, because the number of witnesses is limited.")]),e._v(" "),o("p",[e._v("In case a witness misbehaves, the network's community can withdraw their votes for a single witness (i.e. they fire the witness). Witnesses that no longer hold enough votes lose their income basis.")]),e._v(" "),o("p",[e._v("Alongside ascribing the role of witnesses to some participants, DPoS networks also elect "),o("strong",[e._v("delegates")]),e._v(". Delegates are a group of participants that supervise network governance and performance, and propose changes that are then voted on by the entire network.")]),e._v(" "),o("p",[e._v("Many consider DPoS algorithms superior to PoW and PoS because of their fast block creation, high degree of security, energy efficiency, level of integrity, and democratic structure. However, DPoS systems are less decentralized than PoW and PoS systems because they have fixed validator sets and higher barriers to entry.")]),e._v(" "),o("h2",{attrs:{id:"practical-byzantine-fault-tolerance-pbft-and-tendermint"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#practical-byzantine-fault-tolerance-pbft-and-tendermint"}},[e._v("#")]),e._v(" Practical Byzantine Fault Tolerance (pBFT) and Tendermint")]),e._v(" "),o("ExpansionPanel",{attrs:{title:"What is Byzantine Fault Tolerance?"}},[o("p",[e._v("When a distributed network reaches consensus even with nodes failing to respond or responding with wrong information (i.e. faulty nodes), it has Byzantine Fault Tolerance (BFT). BFT ensures that a distributed network can continue to work even with faulty nodes, as the consensus is a result of collective decision-making.")]),e._v(" "),o("p",[e._v("Failures in a Byzantine sense are:")]),e._v(" "),o("ul",[o("li",[o("strong",[e._v("Fail-stop failures:")]),e._v(" the node fails and stops operating.")]),e._v(" "),o("li",[o("strong",[e._v("Arbitrary node failures:")]),e._v(" the node fails to return a result, responds with an incorrect result deliberately or not, or responds with a result different from other results in the network.")])]),e._v(" "),o("p",[e._v("The term BFT is derived from the Byzantine Generals Problem.")])]),e._v(" "),o("p",[e._v("Practical Byzantine Fault Tolerance (pBFT) was first introduced in 1999 and arose from academia.")]),e._v(" "),o("HighlightBox",{attrs:{type:"tip"}},[o("p",[e._v("You can access the 1999 paper by Miguel Castro and Barbara Liskov on pBFT "),o("a",{attrs:{href:"http://pmg.csail.mit.edu/papers/osdi99.pdf",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),o("OutboundLink")],1),e._v(". There is also an intuitive "),o("a",{attrs:{href:"http://www.comp.nus.edu.sg/~rahul/allfiles/cs6234-16-pbft.pdf",target:"_blank",rel:"noopener noreferrer"}},[e._v("presentation"),o("OutboundLink")],1),e._v(" you can look at.")])]),e._v(" "),o("p",[e._v("In pBFT, a replica is a network node that maintains a full copy of the ledger state. pBFT is a three-phase protocol, in which the client sends a request to a so-called primary. In the first phase, the primary broadcasts the request with a sequence number to the replicas. Then the replicas agree on the sequence number and create a message.")]),e._v(" "),o("p",[e._v("When a threshold of agreement is reached by the replicas, which is akin to sufficient co-signers, the message is verified. The replicas agree on the overall order of transactions within a view. The broader network is informed about transaction blocks when they are finalized. That is to say, they are signed by sufficient replicas.")]),e._v(" "),o("p",[e._v("pBFT brings two main advantages to consensus on blockchains:")]),e._v(" "),o("ul",[o("li",[o("strong",[e._v("Energy efficiency:")]),e._v(" consensus is achieved without having to conduct expensive computations such as in PoW algorithms.")]),e._v(" "),o("li",[o("strong",[e._v("Transaction finality:")]),e._v(" once a block is finalized, it is immutable and with it all included transactions.")])]),e._v(" "),o("p",[e._v("This of course is a very simplified presentation.")]),e._v(" "),o("p",[e._v("While most consensus implementations are tightly coupled with a particular blockchain project, "),o("strong",[e._v("Tendermint")]),e._v(" is a toolkit that focuses on simplifying the process of creating blockchains (among others) by offering a decentralized consensus mechanism called Tendermint Core. Tendermint's decentralized consensus engine runs its own public blockchain. It differs from Ethereum on its consensus protocol, as it uses the concept of validators who need to bind funds to validate, and who then validate blocks over the course of a certain number of rounds.")]),e._v(" "),o("p",[e._v("As the reader might guess, Cosmos relies on Tendermint Core. It offers the most mature Byzantine Fault Tolerance, transaction finality, and a great deal of flexibility - flexibility that is passed to the developers of custom blockchains built with the Cosmos SDK.")]),e._v(" "),o("HighlightBox",{attrs:{type:"info"}},[o("p",[e._v("Tendermint will be explored in detail in the "),o("RouterLink",{attrs:{to:"/academy/2-main-concepts/"}},[e._v("Main Concepts")]),e._v(" section.")],1)]),e._v(" "),o("HighlightBox",{attrs:{type:"reading"}},[o("p",[o("strong",[e._v("Further readings")])]),e._v(" "),o("ul",[o("li",[o("a",{attrs:{href:"http://pmg.csail.mit.edu/papers/osdi99.pdf",target:"_blank",rel:"noopener noreferrer"}},[e._v("Castro, M. & Liskov, B. (1999): Practical Byzantine Fault Tolerance"),o("OutboundLink")],1)]),e._v(" "),o("li",[o("a",{attrs:{href:"https://www.comp.nus.edu.sg/~rahul/allfiles/cs6234-16-pbft.pdf",target:"_blank",rel:"noopener noreferrer"}},[e._v("Castro, M. & Liskov, B.: Practical Byzantine Fault Tolerance presentation"),o("OutboundLink")],1)]),e._v(" "),o("li",[o("a",{attrs:{href:"https://blockonomi.com/practical-byzantine-fault-tolerance/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Curran, B. (2018): What is Pracictcal Byzantine Fault Tolerance? Complete Beginner's Guide"),o("OutboundLink")],1)]),e._v(" "),o("li",[o("a",{attrs:{href:"http://tendermint.com/docs/tendermint.pdf",target:"_blank",rel:"noopener noreferrer"}},[e._v("Kwon, Jae (2014): Tendermint: Consensus without Mining"),o("OutboundLink")],1)]),e._v(" "),o("li",[o("a",{attrs:{href:"https://hackernoon.com/consensuspedia-an-encyclopedia-of-29-consensus-algorithms-e9c4b4b7d08f",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vasa (2018): ConsensusPedia: An Encyclopedia of 30 Consensus Algorithms. A complete list of all consensus algorithms"),o("OutboundLink")],1)]),e._v(" "),o("li",[o("a",{attrs:{href:"https://blog.ethereum.org/2016/05/09/on-settlement-finality/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vitalik Buterin (2016): On Settlement Finality"),o("OutboundLink")],1)]),e._v(" "),o("li",[o("a",{attrs:{href:"https://hackernoon.com/a-hitchhikers-guide-to-consensus-algorithms-d81aae3eb0e3",target:"_blank",rel:"noopener noreferrer"}},[e._v("Witherspoon, Z. (2013): A Hitchhiker’s Guide to Consensus Algorithms. A quick classification of cryptocurrency consensus types"),o("OutboundLink")],1)])])])],1)}),[],!1,null,null,null);t.default=n.exports}}]);