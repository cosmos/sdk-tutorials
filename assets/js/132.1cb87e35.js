(window.webpackJsonp=window.webpackJsonp||[]).push([[132],{749:function(e,t,a){"use strict";a.r(t);var o=a(1),c=Object(o.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"auto-expiring-games"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#auto-expiring-games"}},[e._v("#")]),e._v(" Auto-Expiring Games")]),e._v(" "),a("HighlightBox",{attrs:{type:"prerequisite"}},[a("p",[e._v("Make sure you have everything you need before proceeding:")]),e._v(" "),a("ul",[a("li",[e._v("You understand the concepts of "),a("RouterLink",{attrs:{to:"/academy/2-cosmos-concepts/1-architecture.html"}},[e._v("ABCI")]),e._v(".")],1),e._v(" "),a("li",[e._v("Go is installed.")]),e._v(" "),a("li",[e._v("You have the checkers blockchain codebase with the elements necessary for forfeit. If not, follow the "),a("RouterLink",{attrs:{to:"/hands-on-exercise/2-ignite-cli-adv/3-game-fifo.html"}},[e._v("previous steps")]),e._v(" or check out "),a("a",{attrs:{href:"https://github.com/cosmos/b9-checkers-academy-draft/tree/game-fifo",target:"_blank",rel:"noopener noreferrer"}},[e._v("the relevant version"),a("OutboundLink")],1),e._v(".")],1)])]),e._v(" "),a("HighlightBox",{attrs:{type:"learning"}},[a("p",[e._v("In this section, you will:")]),e._v(" "),a("ul",[a("li",[e._v("Do begin block and end block operations.")]),e._v(" "),a("li",[e._v("Forfeit games automatically.")]),e._v(" "),a("li",[e._v("Do garbage collection.")])])]),e._v(" "),a("p",[e._v("In the "),a("RouterLink",{attrs:{to:"/hands-on-exercise/2-ignite-cli-adv/3-game-fifo.html"}},[e._v("previous section")]),e._v(" you prepared the expiration of games:")],1),e._v(" "),a("ul",[a("li",[e._v("A First-In-First-Out (FIFO) that always has old games at its head and freshly updated games at its tail.")]),e._v(" "),a("li",[e._v("A deadline field to guide the expiration.")]),e._v(" "),a("li",[e._v("A winner field to further assist with forfeiting.")]),e._v(" "),a("li",[e._v("A move count field to inform the action to take when forfeiting.")])]),e._v(" "),a("h2",{attrs:{id:"new-information"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#new-information"}},[e._v("#")]),e._v(" New information")]),e._v(" "),a("p",[e._v("A game expires in two different situations:")]),e._v(" "),a("ol",[a("li",[e._v("It was never really played, so it is removed quietly. That includes a single move by a single player.")]),e._v(" "),a("li",[e._v("Moves were played by both players, making it a proper game, and forfeit is the outcome because a player then failed to play a move in time.")])]),e._v(" "),a("p",[e._v("In the latter case, you want to emit a new event which differentiates forfeiting a game from a win involving a move. Therefore you define new error constants:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Y29uc3QgKAogICAgR2FtZUZvcmZlaXRlZEV2ZW50VHlwZSAgICAgID0gJnF1b3Q7Z2FtZS1mb3JmZWl0ZWQmcXVvdDsKICAgIEdhbWVGb3JmZWl0ZWRFdmVudEdhbWVJbmRleCA9ICZxdW90O2dhbWUtaW5kZXgmcXVvdDsKICAgIEdhbWVGb3JmZWl0ZWRFdmVudFdpbm5lciAgICA9ICZxdW90O3dpbm5lciZxdW90OwogICAgR2FtZUZvcmZlaXRlZEV2ZW50Qm9hcmQgICAgID0gJnF1b3Q7Ym9hcmQmcXVvdDsKKQo=",url:"https://github.com/cosmos/b9-checkers-academy-draft/blob/forfeit-game/x/checkers/types/keys.go#L57-L62"}}),e._v(" "),a("h2",{attrs:{id:"putting-callbacks-in-place"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#putting-callbacks-in-place"}},[e._v("#")]),e._v(" Putting callbacks in place")]),e._v(" "),a("p",[e._v("When you use Ignite CLI to scaffold your module, it creates the "),a("a",{attrs:{href:"https://github.com/cosmos/b9-checkers-academy-draft/blob/forfeit-game/x/checkers/module.go",target:"_blank",rel:"noopener noreferrer"}},[a("code",[e._v("x/checkers/module.go")]),a("OutboundLink")],1),e._v(" file with a lot of functions to accommodate your application. In particular, the function that "),a("strong",[e._v("may")]),e._v(" be called on your module on "),a("code",[e._v("EndBlock")]),e._v(" is named "),a("code",[e._v("EndBlock")]),e._v(":")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"ZnVuYyAoYW0gQXBwTW9kdWxlKSBFbmRCbG9jayhfIHNkay5Db250ZXh0LCBfIGFiY2kuUmVxdWVzdEVuZEJsb2NrKSBbXWFiY2kuVmFsaWRhdG9yVXBkYXRlIHsKICAgIHJldHVybiBbXWFiY2kuVmFsaWRhdG9yVXBkYXRle30KfQo=",url:"https://github.com/cosmos/b9-checkers-academy-draft/blob/game-fifo/x/checkers/module.go#L173-L175"}}),e._v(" "),a("p",[e._v("Ignite CLI left this empty. It is here that you add what you need done right before the block gets sealed. Create a new file named "),a("code",[e._v("x/checkers/keeper/end_block_server_game.go")]),e._v(" to encapsulate the knowledge about game expiry. Leave your function empty for now:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"ZnVuYyAoayBLZWVwZXIpIEZvcmZlaXRFeHBpcmVkR2FtZXMoZ29DdHggY29udGV4dC5Db250ZXh0KSB7CiAgICAvLyBUT0RPCn0K",url:"https://github.com/cosmos/b9-checkers-academy-draft/blob/forfeit-game/x/checkers/keeper/end_block_server_game.go#L12"}}),e._v(" "),a("p",[e._v("In "),a("code",[e._v("x/checkers/module.go")]),e._v(" update "),a("code",[e._v("EndBlock")]),e._v(" with:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"diff-go",base64:"ICAgIGZ1bmMgKGFtIEFwcE1vZHVsZSkgRW5kQmxvY2soY3R4IHNkay5Db250ZXh0LCBfIGFiY2kuUmVxdWVzdEVuZEJsb2NrKSBbXWFiY2kuVmFsaWRhdG9yVXBkYXRlIHsKKyAgICAgIGFtLmtlZXBlci5Gb3JmZWl0RXhwaXJlZEdhbWVzKHNkay5XcmFwU0RLQ29udGV4dChjdHgpKQogICAgICAgIHJldHVybiBbXWFiY2kuVmFsaWRhdG9yVXBkYXRle30KICAgIH0K",url:"https://github.com/cosmos/b9-checkers-academy-draft/blob/forfeit-game/x/checkers/module.go#L174"}}),e._v(" "),a("p",[e._v("This ensures that "),a("strong",[e._v("if")]),e._v(" your module's "),a("code",[e._v("EndBlock")]),e._v(" function is called the expired games will be handled. For the "),a("strong",[e._v("whole application to call your module")]),e._v(" you have to instruct it to do so. This takes place in "),a("code",[e._v("app/app.go")]),e._v(", where the application is initialized with the proper order to call the "),a("code",[e._v("EndBlock")]),e._v(" functions in different modules. In fact, yours has already been placed at the end by Ignite:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"diff-go",base64:"ICAgIGFwcC5tbS5TZXRPcmRlckVuZEJsb2NrZXJzKAogICAgICAgIGNyaXNpc3R5cGVzLk1vZHVsZU5hbWUsCiAgICAgICAgLi4uCisgICAgICBjaGVja2Vyc21vZHVsZXR5cGVzLk1vZHVsZU5hbWUsCiAgICApCg==",url:"https://github.com/cosmos/b9-checkers-academy-draft/blob/forfeit-game/app/app.go#L493"}}),e._v(" "),a("p",[e._v("Your "),a("code",[e._v("ForfeitExpiredGames")]),e._v(" function will now be called at the end of each block.")]),e._v(" "),a("p",[e._v("Also prepare a new error:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"diff-go",base64:"ICAgIHZhciAoCiAgICAgICAgLi4uCisgICAgICBFcnJDYW5ub3RGaW5kV2lubmVyQnlDb2xvciA9IHNka2Vycm9ycy5SZWdpc3RlcihNb2R1bGVOYW1lLCAxMTEyLCAmcXVvdDtjYW5ub3QgZmluZCB3aW5uZXIgYnkgY29sb3I6ICVzJnF1b3Q7KQogICAgKQo=",url:"https://github.com/cosmos/b9-checkers-academy-draft/blob/forfeit-game/x/checkers/types/errors.go#L23"}}),e._v(" "),a("h2",{attrs:{id:"expire-games-handler"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#expire-games-handler"}},[e._v("#")]),e._v(" Expire games handler")]),e._v(" "),a("p",[e._v("With the callbacks in place, it is time to code the expiration properly.")]),e._v(" "),a("h3",{attrs:{id:"prepare-the-main-loop"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#prepare-the-main-loop"}},[e._v("#")]),e._v(" Prepare the main loop")]),e._v(" "),a("p",[e._v("In "),a("code",[e._v("ForfeitExpiredGames")]),e._v(", it is a matter of looping through the FIFO, starting from the head, and handling games that are expired. You can stop at the first active game, as all those that come after are also active thanks to the careful updating of the FIFO.")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Prepare useful information:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Y3R4IDo9IHNkay5VbndyYXBTREtDb250ZXh0KGdvQ3R4KQoKb3Bwb25lbnRzIDo9IG1hcFtzdHJpbmddc3RyaW5newogICAgcnVsZXMuUGllY2VTdHJpbmdzW3J1bGVzLkJMQUNLX1BMQVlFUl06IHJ1bGVzLlBpZWNlU3RyaW5nc1tydWxlcy5SRURfUExBWUVSXSwKICAgIHJ1bGVzLlBpZWNlU3RyaW5nc1tydWxlcy5SRURfUExBWUVSXTogICBydWxlcy5QaWVjZVN0cmluZ3NbcnVsZXMuQkxBQ0tfUExBWUVSXSwKfQo=",url:"https://github.com/cosmos/b9-checkers-academy-draft/blob/forfeit-game/x/checkers/keeper/end_block_server_game.go#L13-L18"}})],1),e._v(" "),a("li",[a("p",[e._v("Initialize the parameters before entering the loop:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"c3lzdGVtSW5mbywgZm91bmQgOj0gay5HZXRTeXN0ZW1JbmZvKGN0eCkKaWYgIWZvdW5kIHsKICAgIHBhbmljKCZxdW90O1N5c3RlbUluZm8gbm90IGZvdW5kJnF1b3Q7KQp9CgpnYW1lSW5kZXggOj0gc3lzdGVtSW5mby5GaWZvSGVhZEluZGV4CnZhciBzdG9yZWRHYW1lIHR5cGVzLlN0b3JlZEdhbWUK",url:"https://github.com/cosmos/b9-checkers-academy-draft/blob/forfeit-game/x/checkers/keeper/end_block_server_game.go#L21-L27"}})],1),e._v(" "),a("li",[a("p",[e._v("Enter the loop:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Zm9yIHsKICAgIC8vIFRPRE8KfQo=",url:"https://github.com/cosmos/b9-checkers-academy-draft/blob/forfeit-game/x/checkers/keeper/end_block_server_game.go#L28"}}),e._v(" "),a("p",[e._v("See below for what replaces this "),a("code",[e._v("TODO")]),e._v(".")])],1),e._v(" "),a("li",[a("p",[e._v("After the loop has ended do not forget to save the latest FIFO state:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"ay5TZXRTeXN0ZW1JbmZvKGN0eCwgc3lzdGVtSW5mbykK",url:"https://github.com/cosmos/b9-checkers-academy-draft/blob/forfeit-game/x/checkers/keeper/end_block_server_game.go#L71"}})],1)]),e._v(" "),a("p",[e._v("So what goes in the "),a("code",[e._v("for { TODO }")]),e._v("?")]),e._v(" "),a("h3",{attrs:{id:"identify-an-expired-game"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#identify-an-expired-game"}},[e._v("#")]),e._v(" Identify an expired game")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Start with a loop breaking condition, if your cursor has reached the end of the FIFO:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"aWYgZ2FtZUluZGV4ID09IHR5cGVzLk5vRmlmb0luZGV4IHsKICAgIGJyZWFrCn0K",url:"https://github.com/cosmos/b9-checkers-academy-draft/blob/forfeit-game/x/checkers/keeper/end_block_server_game.go#L30-L32"}})],1),e._v(" "),a("li",[a("p",[e._v("Fetch the expired game candidate and its deadline:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"c3RvcmVkR2FtZSwgZm91bmQgPSBrLkdldFN0b3JlZEdhbWUoY3R4LCBnYW1lSW5kZXgpCmlmICFmb3VuZCB7CiAgICBwYW5pYygmcXVvdDtGaWZvIGhlYWQgZ2FtZSBub3QgZm91bmQgJnF1b3Q7ICsgc3lzdGVtSW5mby5GaWZvSGVhZEluZGV4KQp9CmRlYWRsaW5lLCBlcnIgOj0gc3RvcmVkR2FtZS5HZXREZWFkbGluZUFzVGltZSgpCmlmIGVyciAhPSBuaWwgewogICAgcGFuaWMoZXJyKQp9Cg==",url:"https://github.com/cosmos/b9-checkers-academy-draft/blob/forfeit-game/x/checkers/keeper/end_block_server_game.go#L33-L40"}})],1),e._v(" "),a("li",[a("p",[e._v("Test for expiration:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"aWYgZGVhZGxpbmUuQmVmb3JlKGN0eC5CbG9ja1RpbWUoKSkgewogICAgLy8gVE9ETwp9IGVsc2UgewogICAgLy8gQWxsIG90aGVyIGdhbWVzIGFmdGVyIGFyZSBhY3RpdmUgYW55d2F5CiAgICBicmVhawp9Cg==",url:"https://github.com/cosmos/b9-checkers-academy-draft/blob/forfeit-game/x/checkers/keeper/end_block_server_game.go#L41"}})],1)]),e._v(" "),a("p",[e._v("Now, what goes into this "),a("code",[e._v('if "expired" { TODO }')]),e._v("?")]),e._v(" "),a("h3",{attrs:{id:"handle-an-expired-game"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#handle-an-expired-game"}},[e._v("#")]),e._v(" Handle an expired game")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("If the game has expired, remove it from the FIFO:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"ay5SZW1vdmVGcm9tRmlmbyhjdHgsICZhbXA7c3RvcmVkR2FtZSwgJmFtcDtzeXN0ZW1JbmZvKQo=",url:"https://github.com/cosmos/b9-checkers-academy-draft/blob/forfeit-game/x/checkers/keeper/end_block_server_game.go#L43"}})],1),e._v(" "),a("li",[a("p",[e._v("Check whether the game is worth keeping. If it is, set the winner as the opponent of the player whose turn it is, remove the board, and save:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"bGFzdEJvYXJkIDo9IHN0b3JlZEdhbWUuQm9hcmQKaWYgc3RvcmVkR2FtZS5Nb3ZlQ291bnQgJmx0Oz0gMSB7CiAgICAvLyBObyBwb2ludCBpbiBrZWVwaW5nIGEgZ2FtZSB0aGF0IHdhcyBuZXZlciByZWFsbHkgcGxheWVkCiAgICBrLlJlbW92ZVN0b3JlZEdhbWUoY3R4LCBnYW1lSW5kZXgpCn0gZWxzZSB7CiAgICBzdG9yZWRHYW1lLldpbm5lciwgZm91bmQgPSBvcHBvbmVudHNbc3RvcmVkR2FtZS5UdXJuXQogICAgaWYgIWZvdW5kIHsKICAgICAgICBwYW5pYyhmbXQuU3ByaW50Zih0eXBlcy5FcnJDYW5ub3RGaW5kV2lubmVyQnlDb2xvci5FcnJvcigpLCBzdG9yZWRHYW1lLlR1cm4pKQogICAgfQogICAgc3RvcmVkR2FtZS5Cb2FyZCA9ICZxdW90OyZxdW90OwogICAgay5TZXRTdG9yZWRHYW1lKGN0eCwgc3RvcmVkR2FtZSkKfQo=",url:"https://github.com/cosmos/b9-checkers-academy-draft/blob/forfeit-game/x/checkers/keeper/end_block_server_game.go#L44-L55"}})],1),e._v(" "),a("li",[a("p",[e._v("Emit the relevant event:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Y3R4LkV2ZW50TWFuYWdlcigpLkVtaXRFdmVudCgKICAgIHNkay5OZXdFdmVudCh0eXBlcy5HYW1lRm9yZmVpdGVkRXZlbnRUeXBlLAogICAgICAgIHNkay5OZXdBdHRyaWJ1dGUodHlwZXMuR2FtZUZvcmZlaXRlZEV2ZW50R2FtZUluZGV4LCBnYW1lSW5kZXgpLAogICAgICAgIHNkay5OZXdBdHRyaWJ1dGUodHlwZXMuR2FtZUZvcmZlaXRlZEV2ZW50V2lubmVyLCBzdG9yZWRHYW1lLldpbm5lciksCiAgICAgICAgc2RrLk5ld0F0dHJpYnV0ZSh0eXBlcy5HYW1lRm9yZmVpdGVkRXZlbnRCb2FyZCwgbGFzdEJvYXJkKSwKICAgICksCikK",url:"https://github.com/cosmos/b9-checkers-academy-draft/blob/forfeit-game/x/checkers/keeper/end_block_server_game.go#L56-L62"}})],1),e._v(" "),a("li",[a("p",[e._v("Move along the FIFO for the next run of the loop:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Z2FtZUluZGV4ID0gc3lzdGVtSW5mby5GaWZvSGVhZEluZGV4Cg==",url:"https://github.com/cosmos/b9-checkers-academy-draft/blob/forfeit-game/x/checkers/keeper/end_block_server_game.go#L64"}})],1)]),e._v(" "),a("HighlightBox",{attrs:{type:"tip"}},[a("p",[e._v("For an explanation as to why this setup is resistant to an attack from an unbounded number of expired games, see the "),a("RouterLink",{attrs:{to:"/hands-on-exercise/2-ignite-cli-adv/3-game-fifo.html"}},[e._v("section on the game's FIFO")]),e._v(".")],1)]),e._v(" "),a("h2",{attrs:{id:"unit-tests"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#unit-tests"}},[e._v("#")]),e._v(" Unit tests")]),e._v(" "),a("p",[e._v("How do you test something that is supposed to happen during the "),a("code",[e._v("EndBlock")]),e._v(" event? You call the function that will be called within "),a("code",[e._v("EndBlock")]),e._v(" (i.e. "),a("code",[e._v("Keeper.ForfeitExpiredGames")]),e._v("). Create a new test file "),a("code",[e._v("end_block_server_game_test.go")]),e._v(" for your tests. The situations that you can test are:")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("A game was never played, while alone in the state "),a("a",{attrs:{href:"https://github.com/cosmos/b9-checkers-academy-draft/blob/forfeit-game/x/checkers/keeper/end_block_server_game_test.go#L44-L79",target:"_blank",rel:"noopener noreferrer"}},[e._v("or not"),a("OutboundLink")],1),e._v(". Or "),a("a",{attrs:{href:"https://github.com/cosmos/b9-checkers-academy-draft/blob/forfeit-game/x/checkers/keeper/end_block_server_game_test.go#L81-L130",target:"_blank",rel:"noopener noreferrer"}},[e._v("two games"),a("OutboundLink")],1),e._v(" were never played. In this case, you need to confirm that the game was fully deleted, and that an event was emitted with no winners:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"ZnVuYyBUZXN0Rm9yZmVpdFVucGxheWVkKHQgKnRlc3RpbmcuVCkgewogICAgXywga2VlcGVyLCBjb250ZXh0IDo9IHNldHVwTXNnU2VydmVyV2l0aE9uZUdhbWVGb3JQbGF5TW92ZSh0KQogICAgY3R4IDo9IHNkay5VbndyYXBTREtDb250ZXh0KGNvbnRleHQpCiAgICBnYW1lMSwgZm91bmQgOj0ga2VlcGVyLkdldFN0b3JlZEdhbWUoY3R4LCAmcXVvdDsxJnF1b3Q7KQogICAgcmVxdWlyZS5UcnVlKHQsIGZvdW5kKQogICAgZ2FtZTEuRGVhZGxpbmUgPSB0eXBlcy5Gb3JtYXREZWFkbGluZShjdHguQmxvY2tUaW1lKCkuQWRkKHRpbWUuRHVyYXRpb24oLTEpKSkKICAgIGtlZXBlci5TZXRTdG9yZWRHYW1lKGN0eCwgZ2FtZTEpCiAgICBrZWVwZXIuRm9yZmVpdEV4cGlyZWRHYW1lcyhjb250ZXh0KQoKICAgIF8sIGZvdW5kID0ga2VlcGVyLkdldFN0b3JlZEdhbWUoY3R4LCAmcXVvdDsxJnF1b3Q7KQogICAgcmVxdWlyZS5GYWxzZSh0LCBmb3VuZCkKCiAgICBzeXN0ZW1JbmZvLCBmb3VuZCA6PSBrZWVwZXIuR2V0U3lzdGVtSW5mbyhjdHgpCiAgICByZXF1aXJlLlRydWUodCwgZm91bmQpCiAgICByZXF1aXJlLkVxdWFsVmFsdWVzKHQsIHR5cGVzLlN5c3RlbUluZm97CiAgICAgICAgTmV4dElkOiAgICAgICAgMiwKICAgICAgICBGaWZvSGVhZEluZGV4OiAmcXVvdDstMSZxdW90OywKICAgICAgICBGaWZvVGFpbEluZGV4OiAmcXVvdDstMSZxdW90OywKICAgIH0sIHN5c3RlbUluZm8pCiAgICBldmVudHMgOj0gc2RrLlN0cmluZ2lmeUV2ZW50cyhjdHguRXZlbnRNYW5hZ2VyKCkuQUJDSUV2ZW50cygpKQogICAgcmVxdWlyZS5MZW4odCwgZXZlbnRzLCAyKQogICAgZXZlbnQgOj0gZXZlbnRzWzBdCiAgICByZXF1aXJlLkVxdWFsVmFsdWVzKHQsIHNkay5TdHJpbmdFdmVudHsKICAgICAgICBUeXBlOiAmcXVvdDtnYW1lLWZvcmZlaXRlZCZxdW90OywKICAgICAgICBBdHRyaWJ1dGVzOiBbXXNkay5BdHRyaWJ1dGV7CiAgICAgICAgICAgIHtLZXk6ICZxdW90O2dhbWUtaW5kZXgmcXVvdDssIFZhbHVlOiAmcXVvdDsxJnF1b3Q7fSwKICAgICAgICAgICAge0tleTogJnF1b3Q7d2lubmVyJnF1b3Q7LCBWYWx1ZTogJnF1b3Q7KiZxdW90O30sCiAgICAgICAgICAgIHtLZXk6ICZxdW90O2JvYXJkJnF1b3Q7LCBWYWx1ZTogJnF1b3Q7KmIqYipiKmJ8YipiKmIqYip8KmIqYipiKmJ8KioqKioqKip8KioqKioqKip8cipyKnIqcip8KnIqcipyKnJ8cipyKnIqciomcXVvdDt9LAogICAgICAgIH0sCiAgICB9LCBldmVudCkKfQo=",url:"https://github.com/cosmos/b9-checkers-academy-draft/blob/forfeit-game/x/checkers/keeper/end_block_server_game_test.go#L12-L42"}})],1),e._v(" "),a("li",[a("p",[e._v("A game was played with only one move, while alone in the state "),a("a",{attrs:{href:"https://github.com/cosmos/b9-checkers-academy-draft/blob/forfeit-game/x/checkers/keeper/end_block_server_game_test.go#L172-L215",target:"_blank",rel:"noopener noreferrer"}},[e._v("or not"),a("OutboundLink")],1),e._v(". Or "),a("a",{attrs:{href:"https://github.com/cosmos/b9-checkers-academy-draft/blob/forfeit-game/x/checkers/keeper/end_block_server_game_test.go#L217-L283",target:"_blank",rel:"noopener noreferrer"}},[e._v("two games"),a("OutboundLink")],1),e._v(" were played in this way. In this case, you need to confirm that the game was fully deleted, and that an event was emitted with no winners:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"ZnVuYyBUZXN0Rm9yZmVpdFBsYXllZE9uY2UodCAqdGVzdGluZy5UKSB7CiAgICBtc2dTZXJ2ZXIsIGtlZXBlciwgY29udGV4dCA6PSBzZXR1cE1zZ1NlcnZlcldpdGhPbmVHYW1lRm9yUGxheU1vdmUodCkKICAgIGN0eCA6PSBzZGsuVW53cmFwU0RLQ29udGV4dChjb250ZXh0KQogICAgbXNnU2VydmVyLlBsYXlNb3ZlKGNvbnRleHQsICZhbXA7dHlwZXMuTXNnUGxheU1vdmV7CiAgICAgICAgQ3JlYXRvcjogICBib2IsCiAgICAgICAgR2FtZUluZGV4OiAmcXVvdDsxJnF1b3Q7LAogICAgICAgIEZyb21YOiAgICAgMSwKICAgICAgICBGcm9tWTogICAgIDIsCiAgICAgICAgVG9YOiAgICAgICAyLAogICAgICAgIFRvWTogICAgICAgMywKICAgIH0pCiAgICBnYW1lMSwgZm91bmQgOj0ga2VlcGVyLkdldFN0b3JlZEdhbWUoY3R4LCAmcXVvdDsxJnF1b3Q7KQogICAgcmVxdWlyZS5UcnVlKHQsIGZvdW5kKQogICAgZ2FtZTEuRGVhZGxpbmUgPSB0eXBlcy5Gb3JtYXREZWFkbGluZShjdHguQmxvY2tUaW1lKCkuQWRkKHRpbWUuRHVyYXRpb24oLTEpKSkKICAgIGtlZXBlci5TZXRTdG9yZWRHYW1lKGN0eCwgZ2FtZTEpCiAgICBrZWVwZXIuRm9yZmVpdEV4cGlyZWRHYW1lcyhjb250ZXh0KQoKICAgIF8sIGZvdW5kID0ga2VlcGVyLkdldFN0b3JlZEdhbWUoY3R4LCAmcXVvdDsxJnF1b3Q7KQogICAgcmVxdWlyZS5GYWxzZSh0LCBmb3VuZCkKCiAgICBzeXN0ZW1JbmZvLCBmb3VuZCA6PSBrZWVwZXIuR2V0U3lzdGVtSW5mbyhjdHgpCiAgICByZXF1aXJlLlRydWUodCwgZm91bmQpCiAgICByZXF1aXJlLkVxdWFsVmFsdWVzKHQsIHR5cGVzLlN5c3RlbUluZm97CiAgICAgICAgTmV4dElkOiAgICAgICAgMiwKICAgICAgICBGaWZvSGVhZEluZGV4OiAmcXVvdDstMSZxdW90OywKICAgICAgICBGaWZvVGFpbEluZGV4OiAmcXVvdDstMSZxdW90OywKICAgIH0sIHN5c3RlbUluZm8pCiAgICBldmVudHMgOj0gc2RrLlN0cmluZ2lmeUV2ZW50cyhjdHguRXZlbnRNYW5hZ2VyKCkuQUJDSUV2ZW50cygpKQogICAgcmVxdWlyZS5MZW4odCwgZXZlbnRzLCAzKQogICAgZXZlbnQgOj0gZXZlbnRzWzBdCiAgICByZXF1aXJlLkVxdWFsVmFsdWVzKHQsIHNkay5TdHJpbmdFdmVudHsKICAgICAgICBUeXBlOiAmcXVvdDtnYW1lLWZvcmZlaXRlZCZxdW90OywKICAgICAgICBBdHRyaWJ1dGVzOiBbXXNkay5BdHRyaWJ1dGV7CiAgICAgICAgICAgIHtLZXk6ICZxdW90O2dhbWUtaW5kZXgmcXVvdDssIFZhbHVlOiAmcXVvdDsxJnF1b3Q7fSwKICAgICAgICAgICAge0tleTogJnF1b3Q7d2lubmVyJnF1b3Q7LCBWYWx1ZTogJnF1b3Q7KiZxdW90O30sCiAgICAgICAgICAgIHtLZXk6ICZxdW90O2JvYXJkJnF1b3Q7LCBWYWx1ZTogJnF1b3Q7KmIqYipiKmJ8YipiKmIqYip8KioqYipiKmJ8KipiKioqKip8KioqKioqKip8cipyKnIqcip8KnIqcipyKnJ8cipyKnIqciomcXVvdDt9LAogICAgICAgIH0sCiAgICB9LCBldmVudCkKfQo=",url:"https://github.com/cosmos/b9-checkers-academy-draft/blob/forfeit-game/x/checkers/keeper/end_block_server_game_test.go#L132-L170"}})],1),e._v(" "),a("li",[a("p",[e._v("A game was played with at least two moves, while alone in the state "),a("a",{attrs:{href:"https://github.com/cosmos/b9-checkers-academy-draft/blob/forfeit-game/x/checkers/keeper/end_block_server_game_test.go#L346-L410",target:"_blank",rel:"noopener noreferrer"}},[e._v("or not"),a("OutboundLink")],1),e._v(". Or "),a("a",{attrs:{href:"https://github.com/cosmos/b9-checkers-academy-draft/blob/forfeit-game/x/checkers/keeper/end_block_server_game_test.go#L412-L520",target:"_blank",rel:"noopener noreferrer"}},[e._v("two games"),a("OutboundLink")],1),e._v(" were played in this way. In this case, you need to confirm the game was not deleted, and instead that a winner was announced, including in events:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"ZnVuYyBUZXN0Rm9yZmVpdFBsYXllZFR3aWNlKHQgKnRlc3RpbmcuVCkgewogICAgbXNnU2VydmVyLCBrZWVwZXIsIGNvbnRleHQgOj0gc2V0dXBNc2dTZXJ2ZXJXaXRoT25lR2FtZUZvclBsYXlNb3ZlKHQpCiAgICBjdHggOj0gc2RrLlVud3JhcFNES0NvbnRleHQoY29udGV4dCkKICAgIG1zZ1NlcnZlci5QbGF5TW92ZShjb250ZXh0LCAmYW1wO3R5cGVzLk1zZ1BsYXlNb3ZlewogICAgICAgIENyZWF0b3I6ICAgYm9iLAogICAgICAgIEdhbWVJbmRleDogJnF1b3Q7MSZxdW90OywKICAgICAgICBGcm9tWDogICAgIDEsCiAgICAgICAgRnJvbVk6ICAgICAyLAogICAgICAgIFRvWDogICAgICAgMiwKICAgICAgICBUb1k6ICAgICAgIDMsCiAgICB9KQogICAgbXNnU2VydmVyLlBsYXlNb3ZlKGNvbnRleHQsICZhbXA7dHlwZXMuTXNnUGxheU1vdmV7CiAgICAgICAgQ3JlYXRvcjogICBjYXJvbCwKICAgICAgICBHYW1lSW5kZXg6ICZxdW90OzEmcXVvdDssCiAgICAgICAgRnJvbVg6ICAgICAwLAogICAgICAgIEZyb21ZOiAgICAgNSwKICAgICAgICBUb1g6ICAgICAgIDEsCiAgICAgICAgVG9ZOiAgICAgICA0LAogICAgfSkKICAgIGdhbWUxLCBmb3VuZCA6PSBrZWVwZXIuR2V0U3RvcmVkR2FtZShjdHgsICZxdW90OzEmcXVvdDspCiAgICByZXF1aXJlLlRydWUodCwgZm91bmQpCiAgICBvbGREZWFkbGluZSA6PSB0eXBlcy5Gb3JtYXREZWFkbGluZShjdHguQmxvY2tUaW1lKCkuQWRkKHRpbWUuRHVyYXRpb24oLTEpKSkKICAgIGdhbWUxLkRlYWRsaW5lID0gb2xkRGVhZGxpbmUKICAgIGtlZXBlci5TZXRTdG9yZWRHYW1lKGN0eCwgZ2FtZTEpCiAgICBrZWVwZXIuRm9yZmVpdEV4cGlyZWRHYW1lcyhjb250ZXh0KQoKICAgIGdhbWUxLCBmb3VuZCA9IGtlZXBlci5HZXRTdG9yZWRHYW1lKGN0eCwgJnF1b3Q7MSZxdW90OykKICAgIHJlcXVpcmUuVHJ1ZSh0LCBmb3VuZCkKICAgIHJlcXVpcmUuRXF1YWxWYWx1ZXModCwgdHlwZXMuU3RvcmVkR2FtZXsKICAgICAgICBJbmRleDogICAgICAgJnF1b3Q7MSZxdW90OywKICAgICAgICBCb2FyZDogICAgICAgJnF1b3Q7JnF1b3Q7LAogICAgICAgIFR1cm46ICAgICAgICAmcXVvdDtiJnF1b3Q7LAogICAgICAgIEJsYWNrOiAgICAgICBib2IsCiAgICAgICAgUmVkOiAgICAgICAgIGNhcm9sLAogICAgICAgIFdpbm5lcjogICAgICAmcXVvdDtyJnF1b3Q7LAogICAgICAgIERlYWRsaW5lOiAgICBvbGREZWFkbGluZSwKICAgICAgICBNb3ZlQ291bnQ6ICAgdWludDY0KDIpLAogICAgICAgIEJlZm9yZUluZGV4OiAmcXVvdDstMSZxdW90OywKICAgICAgICBBZnRlckluZGV4OiAgJnF1b3Q7LTEmcXVvdDssCiAgICB9LCBnYW1lMSkKCiAgICBzeXN0ZW1JbmZvLCBmb3VuZCA6PSBrZWVwZXIuR2V0U3lzdGVtSW5mbyhjdHgpCiAgICByZXF1aXJlLlRydWUodCwgZm91bmQpCiAgICByZXF1aXJlLkVxdWFsVmFsdWVzKHQsIHR5cGVzLlN5c3RlbUluZm97CiAgICAgICAgTmV4dElkOiAgICAgICAgMiwKICAgICAgICBGaWZvSGVhZEluZGV4OiAmcXVvdDstMSZxdW90OywKICAgICAgICBGaWZvVGFpbEluZGV4OiAmcXVvdDstMSZxdW90OywKICAgIH0sIHN5c3RlbUluZm8pCiAgICBldmVudHMgOj0gc2RrLlN0cmluZ2lmeUV2ZW50cyhjdHguRXZlbnRNYW5hZ2VyKCkuQUJDSUV2ZW50cygpKQogICAgcmVxdWlyZS5MZW4odCwgZXZlbnRzLCAzKQogICAgZXZlbnQgOj0gZXZlbnRzWzBdCiAgICByZXF1aXJlLkVxdWFsVmFsdWVzKHQsIHNkay5TdHJpbmdFdmVudHsKICAgICAgICBUeXBlOiAmcXVvdDtnYW1lLWZvcmZlaXRlZCZxdW90OywKICAgICAgICBBdHRyaWJ1dGVzOiBbXXNkay5BdHRyaWJ1dGV7CiAgICAgICAgICAgIHtLZXk6ICZxdW90O2dhbWUtaW5kZXgmcXVvdDssIFZhbHVlOiAmcXVvdDsxJnF1b3Q7fSwKICAgICAgICAgICAge0tleTogJnF1b3Q7d2lubmVyJnF1b3Q7LCBWYWx1ZTogJnF1b3Q7ciZxdW90O30sCiAgICAgICAgICAgIHtLZXk6ICZxdW90O2JvYXJkJnF1b3Q7LCBWYWx1ZTogJnF1b3Q7KmIqYipiKmJ8YipiKmIqYip8KioqYipiKmJ8KipiKioqKip8KnIqKioqKip8KipyKnIqcip8KnIqcipyKnJ8cipyKnIqciomcXVvdDt9LAogICAgICAgIH0sCiAgICB9LCBldmVudCkKfQo=",url:"https://github.com/cosmos/b9-checkers-academy-draft/blob/forfeit-game/x/checkers/keeper/end_block_server_game_test.go#L285-L344"}})],1)]),e._v(" "),a("HighlightBox",{attrs:{type:"note"}},[a("p",[e._v("Note how all the attributes of an event of a given type (such as "),a("code",[e._v('"game-forfeited"')]),e._v(") aggregate in a single array. The context is not reset on a new transaction, so when testing attributes you either have to compare the full array or take slices to compare what matters.")])]),e._v(" "),a("h2",{attrs:{id:"interact-via-the-cli"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#interact-via-the-cli"}},[e._v("#")]),e._v(" Interact via the CLI")]),e._v(" "),a("p",[e._v("Currently, the game expiry is one day in the future. This is too long to test with the CLI. Temporarily set it to 5 minutes:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"TWF4VHVybkR1cmF0aW9uID0gdGltZS5EdXJhdGlvbig1ICogNjAgKiAxMDAwXzAwMF8wMDApIC8vIDUgbWludXRlcwo=",url:"https://github.com/cosmos/b9-checkers-academy-draft/blob/forfeit-game/x/checkers/types/keys.go#L49"}}),e._v(" "),a("p",[e._v("Avoid having games in the FIFO that expire in a day because of your earlier tests:")]),e._v(" "),a("CodeGroup",[a("CodeGroupItem",{attrs:{title:"Local",active:""}},[a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBpZ25pdGUgY2hhaW4gc2VydmUgLS1yZXNldC1vbmNlCg=="}})],1),e._v(" "),a("CodeGroupItem",{attrs:{title:"Docker"}},[a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBkb2NrZXIgcnVuIC0tcm0gLWl0IFwKICAgIC0tbmFtZSBjaGVja2VycyBcCiAgICAtdiAkKHB3ZCk6L2NoZWNrZXJzIFwKICAgIC13IC9jaGVja2VycyBcCiAgICBjaGVja2Vyc19pIFwKICAgIGlnbml0ZSBjaGFpbiBzZXJ2ZSAtLXJlc2V0LW9uY2UK"}})],1)],1),e._v(" "),a("p",[e._v("Export your aliases again:")]),e._v(" "),a("CodeGroup",[a("CodeGroupItem",{attrs:{title:"Local",active:""}},[a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBleHBvcnQgYWxpY2U9JChjaGVja2Vyc2Qga2V5cyBzaG93IGFsaWNlIC1hKQokIGV4cG9ydCBib2I9JChjaGVja2Vyc2Qga2V5cyBzaG93IGJvYiAtYSkK"}})],1),e._v(" "),a("CodeGroupItem",{attrs:{title:"Docker"}},[a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBleHBvcnQgYWxpY2U9JChkb2NrZXIgZXhlYyBjaGVja2VycyBjaGVja2Vyc2Qga2V5cyBzaG93IGFsaWNlIC1hKQokIGV4cG9ydCBib2I9JChkb2NrZXIgZXhlYyBjaGVja2VycyBjaGVja2Vyc2Qga2V5cyBzaG93IGJvYiAtYSkK"}})],1)],1),e._v(" "),a("p",[e._v("Create three games one minute apart. Have Alice play the middle one, and both Alice and Bob play the last one:")]),e._v(" "),a("PanelList",[a("PanelListItem",{attrs:{number:"1"}},[a("p",[e._v("First game:")]),e._v(" "),a("CodeGroup",[a("CodeGroupItem",{attrs:{title:"Local",active:""}},[a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBjaGVja2Vyc2QgdHggY2hlY2tlcnMgY3JlYXRlLWdhbWUgJGFsaWNlICRib2IgLS1mcm9tICRhbGljZQo="}})],1),e._v(" "),a("CodeGroupItem",{attrs:{title:"Docker"}},[a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBkb2NrZXIgZXhlYyAtaXQgY2hlY2tlcnMgXAogICAgY2hlY2tlcnNkIHR4IGNoZWNrZXJzIGNyZWF0ZS1nYW1lICRhbGljZSAkYm9iIC0tZnJvbSAkYWxpY2UK"}})],1)],1)],1),e._v(" "),a("PanelListItem",{attrs:{number:"2"}},[a("p",[e._v("Wait a minute, then create your second game and play it:")]),e._v(" "),a("CodeGroup",[a("CodeGroupItem",{attrs:{title:"Local",active:""}},[a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBjaGVja2Vyc2QgdHggY2hlY2tlcnMgY3JlYXRlLWdhbWUgJGFsaWNlICRib2IgLS1mcm9tICRib2IKJCBjaGVja2Vyc2QgdHggY2hlY2tlcnMgcGxheS1tb3ZlIDIgMSAyIDIgMyAtLWZyb20gJGFsaWNlCg=="}})],1),e._v(" "),a("CodeGroupItem",{attrs:{title:"Docker"}},[a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBkb2NrZXIgZXhlYyAtaXQgY2hlY2tlcnMgXAogICAgY2hlY2tlcnNkIHR4IGNoZWNrZXJzIGNyZWF0ZS1nYW1lICRhbGljZSAkYm9iIC0tZnJvbSAkYm9iCiQgZG9ja2VyIGV4ZWMgLWl0IGNoZWNrZXJzIFwKICAgIGNoZWNrZXJzZCB0eCBjaGVja2VycyBwbGF5LW1vdmUgMiAxIDIgMiAzIC0tZnJvbSAkYWxpY2UK"}})],1)],1)],1),e._v(" "),a("PanelListItem",{attrs:{number:"3",last:!0}},[a("p",[e._v("Wait another minute, then create your third game and play on it:")]),e._v(" "),a("CodeGroup",[a("CodeGroupItem",{attrs:{title:"Local",active:""}},[a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBjaGVja2Vyc2QgdHggY2hlY2tlcnMgY3JlYXRlLWdhbWUgJGFsaWNlICRib2IgLS1mcm9tICRhbGljZQokIGNoZWNrZXJzZCB0eCBjaGVja2VycyBwbGF5LW1vdmUgMyAxIDIgMiAzIC0tZnJvbSAkYWxpY2UKJCBjaGVja2Vyc2QgdHggY2hlY2tlcnMgcGxheS1tb3ZlIDMgMCA1IDEgNCAtLWZyb20gJGJvYgo="}})],1),e._v(" "),a("CodeGroupItem",{attrs:{title:"Docker"}},[a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBkb2NrZXIgZXhlYyAtaXQgY2hlY2tlcnMgXAogICAgY2hlY2tlcnNkIHR4IGNoZWNrZXJzIGNyZWF0ZS1nYW1lICRhbGljZSAkYm9iIC0tZnJvbSAkYWxpY2UKJCBkb2NrZXIgZXhlYyAtaXQgY2hlY2tlcnMgXAogICAgY2hlY2tlcnNkIHR4IGNoZWNrZXJzIHBsYXktbW92ZSAzIDEgMiAyIDMgLS1mcm9tICRhbGljZQokIGRvY2tlciBleGVjIC1pdCBjaGVja2VycyBcCiAgICBjaGVja2Vyc2QgdHggY2hlY2tlcnMgcGxheS1tb3ZlIDMgMCA1IDEgNCAtLWZyb20gJGJvYgo="}})],1)],1)],1)],1),e._v(" "),a("p",[e._v("Space each "),a("code",[e._v("tx")]),e._v(" command from a given account by a couple of seconds so that they each go into a different block - by default "),a("code",[e._v("checkersd")]),e._v(" is limited because it uses the account's transaction sequence number by fetching it from the current state.")]),e._v(" "),a("HighlightBox",{attrs:{type:"tip"}},[a("p",[e._v("If you want to overcome this limitation, look at "),a("code",[e._v("checkersd")]),e._v("'s "),a("code",[e._v("--sequence")]),e._v(" flag:")]),e._v(" "),a("CodeGroup",[a("CodeGroupItem",{attrs:{title:"Local",active:""}},[a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBjaGVja2Vyc2QgdHggY2hlY2tlcnMgY3JlYXRlLWdhbWUgLS1oZWxwCg=="}})],1),e._v(" "),a("CodeGroupItem",{attrs:{title:"Docker"}},[a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBkb2NrZXIgZXhlYyAtaXQgY2hlY2tlcnMgXAogICAgY2hlY2tlcnNkIHR4IGNoZWNrZXJzIGNyZWF0ZS1nYW1lIC0taGVscAo="}})],1)],1),e._v(" "),a("p",[e._v("And at your account's current sequence. For instance:")]),e._v(" "),a("CodeGroup",[a("CodeGroupItem",{attrs:{title:"Local",active:""}},[a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBjaGVja2Vyc2QgcXVlcnkgYWNjb3VudCAkYWxpY2UgLS1vdXRwdXQganNvbiB8IGpxIC1yICcuc2VxdWVuY2UnCg=="}})],1),e._v(" "),a("CodeGroupItem",{attrs:{title:"Docker"}},[a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBkb2NrZXIgZXhlYyAtaXQgY2hlY2tlcnMgXAogICAgYmFzaCAtYyAmcXVvdDtjaGVja2Vyc2QgcXVlcnkgYWNjb3VudCAkYWxpY2UgLS1vdXRwdXQganNvbiB8IGpxIC1yICcuc2VxdWVuY2UnJnF1b3Q7Cg=="}})],1)],1),e._v(" "),a("p",[e._v("Which returns something like:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"json",base64:"OQo="}})],1),e._v(" "),a("p",[e._v("With three games in, confirm that you see them all:")]),e._v(" "),a("CodeGroup",[a("CodeGroupItem",{attrs:{title:"Local",active:""}},[a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBjaGVja2Vyc2QgcXVlcnkgY2hlY2tlcnMgbGlzdC1zdG9yZWQtZ2FtZQo="}})],1),e._v(" "),a("CodeGroupItem",{attrs:{title:"Docker"}},[a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBkb2NrZXIgZXhlYyAtaXQgY2hlY2tlcnMgXAogICAgY2hlY2tlcnNkIHF1ZXJ5IGNoZWNrZXJzIGxpc3Qtc3RvcmVkLWdhbWUK"}})],1)],1),e._v(" "),a("p",[e._v("List them again after two, three, four, and five minutes. You should see games "),a("code",[e._v("1")]),e._v(" and "),a("code",[e._v("2")]),e._v(" disappear, and game "),a("code",[e._v("3")]),e._v(" being forfeited by Alice, i.e. "),a("code",[e._v("red")]),e._v(" Bob wins:")]),e._v(" "),a("CodeGroup",[a("CodeGroupItem",{attrs:{title:"Local",active:""}},[a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBjaGVja2Vyc2QgcXVlcnkgY2hlY2tlcnMgc2hvdy1zdG9yZWQtZ2FtZSAzIC0tb3V0cHV0IGpzb24gfCBqcSAnLnN0b3JlZEdhbWUud2lubmVyJwo="}})],1),e._v(" "),a("CodeGroupItem",{attrs:{title:"Docker"}},[a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBkb2NrZXIgZXhlYyAtaXQgY2hlY2tlcnMgXAogICAgYmFzaCAtYyAmcXVvdDtjaGVja2Vyc2QgcXVlcnkgY2hlY2tlcnMgc2hvdy1zdG9yZWQtZ2FtZSAzIC0tb3V0cHV0IGpzb24gfCBqcSAnLnN0b3JlZEdhbWUud2lubmVyJyZxdW90Owo="}})],1)],1),e._v(" "),a("p",[e._v("This prints:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"json",base64:"JnF1b3Q7ciZxdW90Owo="}}),e._v(" "),a("p",[e._v("Confirm that the FIFO no longer references the removed games nor the forfeited game:")]),e._v(" "),a("CodeGroup",[a("CodeGroupItem",{attrs:{title:"Local",active:""}},[a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBjaGVja2Vyc2QgcXVlcnkgY2hlY2tlcnMgc2hvdy1zeXN0ZW0taW5mbwo="}})],1),e._v(" "),a("CodeGroupItem",{attrs:{title:"Docker"}},[a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBkb2NrZXIgZXhlYyAtaXQgY2hlY2tlcnMgXAogICAgY2hlY2tlcnNkIHF1ZXJ5IGNoZWNrZXJzIHNob3ctc3lzdGVtLWluZm8K"}})],1)],1),e._v(" "),a("p",[e._v("This should show:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"txt",base64:"U3lzdGVtSW5mbzoKICBmaWZvSGVhZEluZGV4OiAmcXVvdDstMSZxdW90OwogIGZpZm9UYWlsSW5kZXg6ICZxdW90Oy0xJnF1b3Q7CiAgbmV4dElkOiAmcXVvdDs0JnF1b3Q7Cg=="}}),e._v(" "),a("HighlightBox",{attrs:{type:"synopsis"}},[a("p",[e._v("To summarize, this section has explored:")]),e._v(" "),a("ul",[a("li",[e._v("How games can expire under two conditions: when the game never really begins or only one player makes an opening move, in which case it is removed; or when both players have participated but one has since failed to play a move in time, in which case the game is forfeited.")]),e._v(" "),a("li",[e._v("What new information and functions need to be created, and to update "),a("code",[e._v("EndBlock")]),e._v(" to call the "),a("code",[e._v("ForfeitExpiredGames")]),e._v(" function at the end of each block.")]),e._v(" "),a("li",[e._v("The correct coding for how to prepare the main loop through the FIFO, identify an expired game, and handle an expired game.")]),e._v(" "),a("li",[e._v("How to test your code to ensure that it functions as desired.")]),e._v(" "),a("li",[e._v("How to interact with the CLI to check the effectiveness of your code for handling expired games.")])])])],1)}),[],!1,null,null,null);t.default=c.exports}}]);