(window.webpackJsonp=window.webpackJsonp||[]).push([[171],{786:function(e,t,o){"use strict";o.r(t);var n=o(1),a=Object(n.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h1",{attrs:{id:"understand-ibc-denoms"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#understand-ibc-denoms"}},[e._v("#")]),e._v(" Understand IBC Denoms")]),e._v(" "),o("p",[e._v("The Interchain vision set out by the original "),o("a",{attrs:{href:"https://v1.cosmos.network/resources/whitepaper",target:"_blank",rel:"noopener noreferrer"}},[e._v("Cosmos whitepaper"),o("OutboundLink")],1),e._v(" was one of sovereign, application-specific, Proof-of-Stake blockchains. A crucial component of this vision was the "),o("strong",[e._v("Inter-Blockchain Communication Protocol")]),e._v(" or simply "),o("strong",[e._v("IBC")]),e._v(". With IBC, chains can maintain their sovereignty while still being able to permissionlessly inter-operate with other chains (that also enable IBC), thus paving the way towards an "),o("em",[e._v("internet of blockchains")]),e._v(".")]),e._v(" "),o("p",[o("em",[e._v("Sounds great, right? But wait, what does that actually mean?")])]),e._v(" "),o("p",[e._v("Well, IBC enables arbitrary message passing between chains (in fact, even more generalized state machines like a "),o("a",{attrs:{href:"https://interchain-io.medium.com/ibc-beyond-light-clients-solo-machine-5af93618ef63",target:"_blank",rel:"noopener noreferrer"}},[e._v("solo machine"),o("OutboundLink")],1),e._v("), so developers can go ahead and create all sorts of IBC applications that exchange packets of data over IBC to enable application logic.")]),e._v(" "),o("p",[e._v("However, the first and still most dominant example to date is to transfer a (fungible) token from a source chain to a destination chain.")]),e._v(" "),o("p",[e._v("Take this example: you have some ATOM on the Cosmos Hub but would like to swap this for some other token on a DEX ("),o("strong",[e._v("D")]),e._v("ecentralized "),o("strong",[e._v("Ex")]),e._v("change) like "),o("a",{attrs:{href:"https://app.osmosis.zone/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Osmosis"),o("OutboundLink")],1),e._v(". This can be illustrated with a random IBC transfer between the Hub and Osmosis using Mintscan, a popular block explorer.")]),e._v(" "),o("p",[o("tm-image",{attrs:{src:"/tutorials/6-ibc-dev/images/ibc_token.png"}})],1),e._v(" "),o("p",[o("em",[e._v("Sending token from blockchain A to blockchain B")])]),e._v(" "),o("p",[e._v("Take the "),o("a",{attrs:{href:"https://www.mintscan.io/cosmos/txs/F7196B37828BAAF5C55E499D62A58E2927542CB2FB57B587BA77BF5BB044FFBF",target:"_blank",rel:"noopener noreferrer"}},[e._v("following transaction"),o("OutboundLink")],1),e._v(". There you see some general information about the transaction, as well as data, particularly on the IBC transfer message that was included in the transaction. Dropping sender and receiver you find:")]),e._v(" "),o("table",[o("thead",[o("tr",[o("th",[e._v("Key")]),e._v(" "),o("th",[e._v("Value")])])]),e._v(" "),o("tbody",[o("tr",[o("td",[e._v("Source Channel")]),e._v(" "),o("td",[e._v("channel-141")])]),e._v(" "),o("tr",[o("td",[e._v("Port")]),e._v(" "),o("td",[e._v("transfer")])]),e._v(" "),o("tr",[o("td",[e._v("Sequence")]),e._v(" "),o("td",[e._v("1,269,133")])]),e._v(" "),o("tr",[o("td",[e._v("Amount")]),e._v(" "),o("td",[e._v("0.020000 ATOM")])]),e._v(" "),o("tr",[o("td",[e._v("Origin Amount")]),e._v(" "),o("td",[e._v("20,000")])]),e._v(" "),o("tr",[o("td",[e._v("Origin Denom")]),e._v(" "),o("td",[e._v("uatom")])])])]),e._v(" "),o("p",[e._v("If you are familiar with the "),o("RouterLink",{attrs:{to:"/academy/3-ibc/1-what-is-ibc.html"}},[e._v("basics of IBC")]),e._v(", you will know what to make of these terms.")],1),e._v(" "),o("p",[e._v("Now, what if you want to send some ATOM back from Osmosis to the Hub? An example would be "),o("a",{attrs:{href:"https://www.mintscan.io/osmosis/txs/9721FE816ABEE87D25259F87BA816EB53651194DD871C3F6B0A5B00434429A80",target:"_blank",rel:"noopener noreferrer"}},[e._v("this transaction"),o("OutboundLink")],1)]),e._v(" "),o("table",[o("thead",[o("tr",[o("th",[e._v("Key")]),e._v(" "),o("th",[e._v("Value")])])]),e._v(" "),o("tbody",[o("tr",[o("td",[e._v("Source Channel")]),e._v(" "),o("td",[e._v("channel-0")])]),e._v(" "),o("tr",[o("td",[e._v("Port")]),e._v(" "),o("td",[e._v("transfer")])]),e._v(" "),o("tr",[o("td",[e._v("Sequence")]),e._v(" "),o("td",[e._v("1,265,787")])]),e._v(" "),o("tr",[o("td",[e._v("Amount")]),e._v(" "),o("td",[e._v("1.850271 ATOM")])]),e._v(" "),o("tr",[o("td",[e._v("Origin Amount")]),e._v(" "),o("td",[e._v("1,850,271")])]),e._v(" "),o("tr",[o("td",[e._v("Origin Denom")]),e._v(" "),o("td",[e._v("?")])])])]),e._v(" "),o("p",[e._v("Now instead of seeing "),o("code",[e._v("uatom")]),e._v(" in the "),o("code",[e._v("Origin Denom")]),e._v(" field, you see: "),o("code",[e._v("IBC/27394FB092D2ECCD56123C74F36E4C1F926001CEADA9CA97EA622B25F41E5EB2")]),e._v(".")]),e._v(" "),o("p",[e._v("This is what is called an "),o("strong",[e._v("IBC denom")]),e._v(", and this is the way assets sent over IBC will be represented on-chain.")]),e._v(" "),o("HighlightBox",{attrs:{type:"learning"}},[o("p",[e._v("In this tutorial you will:")]),e._v(" "),o("ul",[o("li",[e._v("Look at the context of ICS-20.")]),e._v(" "),o("li",[e._v("Explain how the IBC denom is derived.")]),e._v(" "),o("li",[e._v("Learn how to trace back the original denom.")]),e._v(" "),o("li",[e._v("Find out what chain denoms are coming from.")])])]),e._v(" "),o("h2",{attrs:{id:"ics-20-token-transfer"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#ics-20-token-transfer"}},[e._v("#")]),e._v(" ICS-20 - token transfer")]),e._v(" "),o("HighlightBox",{attrs:{type:"info"}},[o("p",[e._v("Token transfers or ICS-20 is discussed in detail in the "),o("RouterLink",{attrs:{to:"/academy/3-ibc/7-token-transfer.html"}},[e._v("IBC section")]),e._v('. The "ICS" in ICS-20 is shorthand for '),o("em",[e._v("Interchain standards")]),e._v(". In the section, you can find an in-depth look at how IBC enables the transfer of (fungible) tokens across chains. For the purposes of this tutorial, here comes a brief and simplified summary.")],1)]),e._v(" "),o("p",[e._v("Imagine two blockchains, blockchain A and blockchain B. As a starting point, you have some tokens on blockchain A you want to send to blockchain B. You can follow the steps in the image below:")]),e._v(" "),o("p",[o("tm-image",{attrs:{src:"/tutorials/6-ibc-dev/images/ibc_token.png"}})],1),e._v(" "),o("p",[o("em",[e._v("Sending tokens from blockchain A to blockchain B")])]),e._v(" "),o("p",[e._v("When sending the tokens to another blockchain with IBC:")]),e._v(" "),o("ol",[o("li",[e._v("A packet commitment is stored on blockchain A and the tokens to be sent are escrowed on chain A (top left of the image).")]),e._v(" "),o("li",[e._v("A relayer takes note of the packet to be sent and submits a "),o("code",[e._v("MsgRecvPacket")]),e._v(" on the destination chain, along with a proof to be verified by the chain A light client on chain B (middle of the image).")]),e._v(" "),o("li",[o("strong",[e._v("With IBC, the value that the tokens represent can be transferred across chains, but the token itself cannot.")]),e._v(" Therefore, blockchain B mints its own representative tokens in the form of "),o("em",[e._v("voucher")]),e._v(" replacement tokens. These will be characterized by the IBC denoms "),o("code",[e._v("IBC/...")]),e._v(" (bottom right of the image).")])]),e._v(" "),o("HighlightBox",{attrs:{type:"note"}},[o("p",[e._v("Note that this only considers the "),o("em",[e._v("happy path")]),e._v(" where the token transfer is successful and the respective proofs can be verified.")])]),e._v(" "),o("p",[e._v("When sending the tokens back with IBC to the source blockchain:")]),e._v(" "),o("ol",{attrs:{start:"4"}},[o("li",[e._v("Blockchain B sends the voucher tokens back to blockchain A.")]),e._v(" "),o("li",[e._v("The "),o("code",[e._v("voucher")]),e._v(" tokens are destroyed (burned) on blockchain B.")]),e._v(" "),o("li",[e._v("The locked tokens on blockchain A are unlocked.")])]),e._v(" "),o("HighlightBox",{attrs:{type:"info"}},[o("p",[e._v("The only way to unlock the locked tokens on blockchain A is to send the "),o("code",[e._v("voucher")]),e._v(" tokens back from blockchain B. The result is that the voucher tokens on blockchain B are burned. The burn process purposefully takes the vouchers out of circulation.")])]),e._v(" "),o("h2",{attrs:{id:"how-are-ibc-denoms-derived"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#how-are-ibc-denoms-derived"}},[e._v("#")]),e._v(" How are IBC denoms derived?")]),e._v(" "),o("p",[e._v("IBC is a protocol that allows for permissionless creation of clients, connections, and channels by relayers. Again, refer to the "),o("RouterLink",{attrs:{to:"/academy/3-ibc/7-token-transfer.html"}},[e._v("IBC section")]),e._v(" for more in-depth information. As explained there, "),o("strong",[e._v("a consequence of the permissionless creation of clients, connections, and channels is that tokens that have traveled different paths have different security guarantees")]),e._v(". To account for this, the IBC protocol makes sure to prepend the path information to a base denomination when representing the "),o("code",[e._v("voucher")]),e._v("s minted on the sink chain when transferring tokens over IBC.")],1),e._v(" "),o("HighlightBox",{attrs:{type:"best-practice"}},[o("p",[e._v("Taking once more the example of Osmosis and the Cosmos Hub, when sending some OSMO from Osmosis to the Hub the "),o("code",[e._v("channelEnd")]),e._v(" on the Hub side is characterized by:")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Y2hhbm5lbEVuZHsKICAuLi4KICBjb3VudGVycGFydHlDaGFubmVsSWRlbnRpZmllcjogJ2NoYW5uZWwtMTQxJywKICBjb3VudGVycGFydHlQb3J0SWRlbnRpZmllcjogJ3RyYW5zZmVyJwogIC4uLgp9Cg=="}}),e._v(" "),o("p",[e._v("This is prepended according to the format:\n"),o("code",[e._v("{portID}/{channelID}/base_denom")])]),e._v(" "),o("p",[e._v("In this particular example: "),o("code",[e._v("transfer/channel-141/uosmo")]),e._v(".")])],1),e._v(" "),o("p",[e._v("This representation of an IBC asset (where the path information is prepended to the base denomination the asset is representing) is a valid representation of the asset and can be found on some user interfaces. However, it is not quite the previously cited IBC denom "),o("code",[e._v("IBC/...")]),e._v(".")]),e._v(" "),o("p",[e._v("In fact, there is one more step required to arrive at the IBC denom. You take the hash of the "),o("code",[e._v("base_denom")]),e._v(" prepended with the path information, using the SHA256 hashing function. This gives the following for the IBC denom:")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8gaGFzaCgpIHJlcHJlc2VudGluZyBhIFNIQTI1NiBoYXNoaW5nIGZ1bmN0aW9uIHJldHVybmluZyBhIHN0cmluZwppYmNfZGVub20gOj0gJ2liYy8nICsgaGFzaCgncGF0aCcgKyAnYmFzZV9kZW5vbScpCg=="}}),e._v(" "),o("HighlightBox",{attrs:{type:"best-practice"}},[o("p",[e._v("In the example from earlier, with "),o("code",[e._v("transfer/channel-141/uosmo")]),e._v(", the corresponding IBC denom is: "),o("code",[e._v("ibc/14F9BC3E44B8A9C1BE1FB08980FAB87034C9905EF17CF2F5008FC085218811CC")]),e._v(".\n"),o("br"),o("br"),e._v("\nNote that the assets transferred over IBC are stored on-chain as IBC denoms. It is however up to developers of frontends and user interfaces to decide whether they will use the human-readable form instead to fit their UX needs.")])]),e._v(" "),o("p",[e._v("It is possible to use a query to find the hash based on the path information of the IBC asset, as will be described; however, you can always calculate it using a "),o("a",{attrs:{href:"https://xorbin.com/tools/sha256-hash-calculator",target:"_blank",rel:"noopener noreferrer"}},[e._v("SHA256 hash generator"),o("OutboundLink")],1),e._v(" as well.")]),e._v(" "),o("HighlightBox",{attrs:{type:"info"}},[o("p",[o("strong",[e._v("So...why use a hash?")])]),e._v(" "),o("p",[e._v("Hashing functions have many desirable properties that make them often used in cryptography. The property most useful in this discussion is that the hashed output is always reduced to a fixed length (256 bits in the case of SHA256), no matter the length of the input.\n"),o("br"),o("br"),e._v("\nConsider the following:")]),e._v(" "),o("ul",[o("li",[e._v("The hash could contain paths that track the token on multiple hops from chain to chain.")]),e._v(" "),o("li",[e._v("This could potentially be unbearably long when directly printing the path.")]),e._v(" "),o("li",[e._v("The Cosmos SDK has a 64-character limit on the denomination of the token.")])]),e._v(" "),o("p",[e._v("This is why a hash was preferred. More information on the design decisions can be found "),o("a",{attrs:{href:"https://ibc.cosmos.network/main/architecture/adr-001-coin-source-tracing.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),o("OutboundLink")],1),e._v(".")])]),e._v(" "),o("p",[e._v("The trade-off when using a hash is that you cannot compute the input given the output (hashing is an irreversible operation). Therefore, the ICS-20 module keeps a mapping of IBC denominations it has encountered in order to look up the original "),o("code",[e._v("path")]),e._v(" and "),o("code",[e._v("base_denom")]),e._v(". Therefore, you are required to query a node to find out what the actual path and denomination are. This query is called the "),o("em",[e._v("denomtrace")]),e._v(".")]),e._v(" "),o("HighlightBox",{attrs:{type:"docs"}},[o("p",[e._v("With IBC denoms, there is a special meaning for the "),o("code",[e._v("/")]),e._v(" character. It is used to parse port and channel identifiers from the base denom. Hence it was initially forbidden to use forward slashes in the base denomination of tokens.\n"),o("br"),o("br"),e._v("\nHowever, due to a requirement from the Evmos chain (which uses forward slashes in contract-based denoms), support for base denominations containing "),o("code",[e._v("/")]),e._v(" has been added. For more information, check the "),o("a",{attrs:{href:"https://ibc.cosmos.network/main/migrations/support-denoms-with-slashes.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("ibc-go documentation"),o("OutboundLink")],1),e._v(".")])]),e._v(" "),o("h2",{attrs:{id:"practical-example-denom-trace"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#practical-example-denom-trace"}},[e._v("#")]),e._v(" Practical example: "),o("code",[e._v("denom_trace")])]),e._v(" "),o("p",[e._v("You can distinguish two cases of interacting with IBC denoms:")]),e._v(" "),o("ol",[o("li",[e._v("Calculating the IBC denom for a given path.")]),e._v(" "),o("li",[e._v("Tracing the path information and base denom when encountering an IBC denom.")])]),e._v(" "),o("p",[e._v("The "),o("code",[e._v("transfer")]),e._v(" IBC module exposes queries for both of these cases. In order to query, you will have to interact with a node of the blockchain network.")]),e._v(" "),o("p",[e._v("These queries are:")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"MS4gJCAmbHQ7YmluYXJ5Jmd0OyBxdWVyeSBpYmMtdHJhbnNmZXIgZGVub20taGFzaCBbdHJhY2VdIFtmbGFnc10KMi4gJCAmbHQ7YmluYXJ5Jmd0OyBxdWVyeSBpYmMtdHJhbnNmZXIgZGVub20tdHJhY2UgW2hhc2hdIFtmbGFnc10K"}}),e._v(" "),o("p",[e._v("This tutorial uses the "),o("code",[e._v("gaiad")]),e._v(" binary from the Cosmos Hub, continuing with the previous example where some OSMO is transferred from Osmosis to the Hub.")]),e._v(" "),o("HighlightBox",{attrs:{type:"note"}},[o("p",[e._v("Despite using "),o("code",[e._v("gaiad")]),e._v(" as an example here, you should use the chain binary of "),o("em",[e._v("the chain where the asset you are interested in is present")]),e._v(". The "),o("code",[e._v("transfer")]),e._v(" IBC module needs to look up the mapping it stores when querying "),o("em",[e._v("denom_trace")]),e._v(".")])]),e._v(" "),o("p",[e._v("Install the Gaia binary:")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBnaXQgY2xvbmUgaHR0cHM6Ly9naXRodWIuY29tL2Nvc21vcy9nYWlhLmdpdAokIGNkIGdhaWEKJCBnaXQgY2hlY2tvdXQgdjcuMC4wCiQgbWFrZSBpbnN0YWxsCgokIGdhaWFkIHZlcnNpb24K"}}),e._v(" "),o("p",[e._v("The output of "),o("code",[e._v("gaiad version")]),e._v(" should print:")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"undefined",base64:"djcuMC4wCg=="}}),e._v(" "),o("p",[e._v("Follow along with the "),o("code",[e._v("gaiad")]),e._v(" subcommands to query the denom and learn about the channel the tokens came from:")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBnYWlhZCBxdWVyeSBpYmMtdHJhbnNmZXIgZGVub20tdHJhY2UgMTRGOUJDM0U0NEI4QTlDMUJFMUZCMDg5ODBGQUI4NzAzNEM5OTA1RUYxN0NGMkY1MDA4RkMwODUyMTg4MTFDQyAtLW5vZGUgaHR0cHM6Ly9ycGMuY29zbW9zLm5ldHdvcms6NDQzCg=="}}),e._v(" "),o("p",[e._v("Response:")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"undefined",base64:"ZGVub21fdHJhY2U6CiAgYmFzZV9kZW5vbTogdW9zbW8KICBwYXRoOiB0cmFuc2Zlci9jaGFubmVsLTE0MQo="}}),e._v(" "),o("HighlightBox",{attrs:{type:"info"}},[o("p",[e._v("It happens that an endpoint cannot be reached. If you do not receive an appropriate response, take a look at the "),o("a",{attrs:{href:"https://github.com/cosmos/chain-registry/blob/master/cosmoshub/chain.json",target:"_blank",rel:"noopener noreferrer"}},[e._v("chain registry"),o("OutboundLink")],1),e._v(" and try to use another node for the commands, e.g. to test against the testnet:")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBnYWlhZCBxdWVyeSBpYmMtdHJhbnNmZXIgZGVub20tdHJhY2UgMTRGOUJDM0U0NEI4QTlDMUJFMUZCMDg5ODBGQUI4NzAzNEM5OTA1RUYxN0NGMkY1MDA4RkMwODUyMTg4MTFDQyAtLW5vZGUgaHR0cHM6Ly9jb3Ntb3MtdGVzdG5ldC1ycGMuYWxsdGhhdG5vZGUuY29tOjI2NjU3Cg=="}})],1),e._v(" "),o("p",[e._v("From the terminal output, you now know that there is an IBC port "),o("code",[e._v("transfer")]),e._v(" and channel "),o("code",[e._v("channel-141")]),e._v(" that corresponds to the IBC connection between the Hub and Osmosis. To learn the IBC light client behind the port and channel, you need to perform another query.")]),e._v(" "),o("HighlightBox",{attrs:{type:"info"}},[o("p",[e._v("How do light clients get their name? These are on-chain clients that only keep track of the block hashes of a "),o("em",[e._v("counterparty")]),e._v(" chain. This allows the chain to create a trustless connection over IBC "),o("em",[e._v("without the client duplicating the counterparty chain in full")]),e._v(', making such clients "light" rather than "heavy".')])]),e._v(" "),o("p",[e._v("The "),o("code",[e._v("ibc channel client-state transfer")]),e._v(" query lists the client details for a specified path:")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBnYWlhZCBxdWVyeSBpYmMgY2hhbm5lbCBjbGllbnQtc3RhdGUgdHJhbnNmZXIgY2hhbm5lbC0xNDEgLS1ub2RlIGh0dHBzOi8vcnBjLmNvc21vcy5uZXR3b3JrOjQ0Mwo="}}),e._v(" "),o("p",[e._v("Click the expansion panel to see the detailed response:")]),e._v(" "),o("ExpansionPanel",{attrs:{title:"Response"}},[o("tm-code-block",{staticClass:"codeblock",attrs:{language:"yml",base64:"Y2xpZW50X2lkOiAwNy10ZW5kZXJtaW50LTI1OQpjbGllbnRfc3RhdGU6CiAgJnF1b3Q7QHR5cGUmcXVvdDs6IC9pYmMubGlnaHRjbGllbnRzLnRlbmRlcm1pbnQudjEuQ2xpZW50U3RhdGUKICBhbGxvd191cGRhdGVfYWZ0ZXJfZXhwaXJ5OiB0cnVlCiAgYWxsb3dfdXBkYXRlX2FmdGVyX21pc2JlaGF2aW91cjogdHJ1ZQogIGNoYWluX2lkOiBvc21vc2lzLTEKICBmcm96ZW5faGVpZ2h0OgogICAgcmV2aXNpb25faGVpZ2h0OiAmcXVvdDswJnF1b3Q7CiAgICByZXZpc2lvbl9udW1iZXI6ICZxdW90OzAmcXVvdDsKICBsYXRlc3RfaGVpZ2h0OgogICAgcmV2aXNpb25faGVpZ2h0OiAmcXVvdDs1OTAxMjA4JnF1b3Q7CiAgICByZXZpc2lvbl9udW1iZXI6ICZxdW90OzEmcXVvdDsKICBtYXhfY2xvY2tfZHJpZnQ6IDYwMHMKICBwcm9vZl9zcGVjczoKICAgIC0gaW5uZXJfc3BlYzoKICAgICAgICBjaGlsZF9vcmRlcjoKICAgICAgICAgIC0gMAogICAgICAgICAgLSAxCiAgICAgICAgY2hpbGRfc2l6ZTogMzMKICAgICAgICBlbXB0eV9jaGlsZDogbnVsbAogICAgICAgIGhhc2g6IFNIQTI1NgogICAgICAgIG1heF9wcmVmaXhfbGVuZ3RoOiAxMgogICAgICAgIG1pbl9wcmVmaXhfbGVuZ3RoOiA0CiAgICAgIGxlYWZfc3BlYzoKICAgICAgICBoYXNoOiBTSEEyNTYKICAgICAgICBsZW5ndGg6IFZBUl9QUk9UTwogICAgICAgIHByZWZpeDogQUE9PQogICAgICAgIHByZWhhc2hfa2V5OiBOT19IQVNICiAgICAgICAgcHJlaGFzaF92YWx1ZTogU0hBMjU2CiAgICAgIG1heF9kZXB0aDogMAogICAgICBtaW5fZGVwdGg6IDAKICAgIC0gaW5uZXJfc3BlYzoKICAgICAgICBjaGlsZF9vcmRlcjoKICAgICAgICAgIC0gMAogICAgICAgICAgLSAxCiAgICAgICAgY2hpbGRfc2l6ZTogMzIKICAgICAgICBlbXB0eV9jaGlsZDogbnVsbAogICAgICAgIGhhc2g6IFNIQTI1NgogICAgICAgIG1heF9wcmVmaXhfbGVuZ3RoOiAxCiAgICAgICAgbWluX3ByZWZpeF9sZW5ndGg6IDEKICAgICAgbGVhZl9zcGVjOgogICAgICAgIGhhc2g6IFNIQTI1NgogICAgICAgIGxlbmd0aDogVkFSX1BST1RPCiAgICAgICAgcHJlZml4OiBBQT09CiAgICAgICAgcHJlaGFzaF9rZXk6IE5PX0hBU0gKICAgICAgICBwcmVoYXNoX3ZhbHVlOiBTSEEyNTYKICAgICAgbWF4X2RlcHRoOiAwCiAgICAgIG1pbl9kZXB0aDogMAogIHRydXN0X2xldmVsOgogICAgZGVub21pbmF0b3I6ICZxdW90OzMmcXVvdDsKICAgIG51bWVyYXRvcjogJnF1b3Q7MSZxdW90OwogIHRydXN0aW5nX3BlcmlvZDogMTIwNjAwMHMKICB1bmJvbmRpbmdfcGVyaW9kOiAxMjA5NjAwcwogIHVwZ3JhZGVfcGF0aDoKICAgIC0gdXBncmFkZQogICAgLSB1cGdyYWRlZElCQ1N0YXRlCg=="}})],1),e._v(" "),o("HighlightBox",{attrs:{type:"docs"}},[o("p",[e._v("This tutorial only discusses a "),o("code",[e._v("denom_trace")]),e._v(" of a single "),o("em",[e._v("hop")]),e._v(". For information on multiple hops and the consequences for frontend services, refer to the "),o("a",{attrs:{href:"https://ibc.cosmos.network/main/apps/transfer/overview.html#multiple-hops",target:"_blank",rel:"noopener noreferrer"}},[e._v("ibc-go docs"),o("OutboundLink")],1),e._v(".")])]),e._v(" "),o("p",[e._v("That is a lot of information, but it does not answer the question: "),o("em",[e._v("how do you know if this IBC client can be relied upon?")])]),e._v(" "),o("h3",{attrs:{id:"the-chain-id-and-the-client-id"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#the-chain-id-and-the-client-id"}},[e._v("#")]),e._v(" The chain ID and the client ID")]),e._v(" "),o("p",[e._v("Take a minute to consider this question: "),o("em",[e._v("how would you identify a chain?")])]),e._v(" "),o("p",[e._v("An initial response might be the "),o("strong",[e._v("chain ID")]),e._v(". After all, this is literally the chain identifier. However, the chain ID is "),o("strong",[e._v("not")]),e._v(" a unique identifier. Anybody can start a chain with the same chain ID, so this is not a good parameter by which to verify the identity of the chain you want to connect with.")]),e._v(" "),o("p",[e._v("However, the IBC client ID is generated by the "),o("a",{attrs:{href:"https://github.com/cosmos/ibc-go/blob/e012a4af5614f8774bcb595962012455667db2cf/modules/core/02-client/keeper/keeper.go#L56",target:"_blank",rel:"noopener noreferrer"}},[e._v("Cosmos SDK IBC Keeper module"),o("OutboundLink")],1),e._v(" (ICS-02 does not specify a standard for IBC client IDs). "),o("strong",[e._v("This means that in the eyes of IBC, a chain is identified by virtue of the "),o("code",[e._v("client_id")]),e._v(".")])]),e._v(" "),o("p",[e._v("A type of "),o("em",[e._v("Chain Name Service")]),e._v(" can verify the combination of the chain ID and the client ID. There are a few options that are being used at the moment or in development:")]),e._v(" "),o("ul",[o("li",[o("p",[o("strong",[e._v("Chain Name Service (on-chain, decentralized):")])]),e._v(" "),o("p",[e._v("The "),o("a",{attrs:{href:"https://github.com/tendermint/cns",target:"_blank",rel:"noopener noreferrer"}},[e._v("CNS"),o("OutboundLink")],1),e._v(" aims to be a Cosmos SDK module that the Cosmos Hub will one day run. As a hub through which cross-chain transactions go, it only makes sense for the Cosmos Hub to host critical information on how to reach other chain IDs. CNS is currently under development, with more information to follow.")])]),e._v(" "),o("li",[o("p",[o("strong",[e._v("Chain Registry (off-chain, semi-decentralized):")])]),e._v(" "),o("p",[e._v("The "),o("a",{attrs:{href:"https://github.com/cosmos/chain-registry",target:"_blank",rel:"noopener noreferrer"}},[e._v("chain registry"),o("OutboundLink")],1),e._v(" repo is a stopgap solution. Each chain ID has a folder describing its genesis and a list of peers. To claim their chain ID, a blockchain operator must fork the "),o("code",[e._v("registry")]),e._v(" repo, create a branch with their chain ID, and submit a pull request to include their chain ID in the official "),o("code",[e._v("cosmos/registry")]),e._v(" of chain IDs.")]),e._v(" "),o("p",[e._v("Every chain ID is represented by a folder, and within that folder, a "),o("code",[e._v("peers.json")]),e._v(" file contains a list of nodes that you can connect to.")])])]),e._v(" "),o("p",[e._v("Being able to list all possible blockchain paths is still an unsolved problem. Some ecosystem efforts are already being developed to help bridge this gap. Take for example this "),o("a",{attrs:{href:"https://github.com/PulsarDefi/IBC-Cosmos",target:"_blank",rel:"noopener noreferrer"}},[e._v("IBC-Cosmos repo by Pulsar"),o("OutboundLink")],1),e._v(": it attempts to aggregate all known IBC denoms on all IBC connected chains. They use the following data schema:")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"json",base64:"ewogICAgJnF1b3Q7aWJjL0hBU0hfX0NIQUlOJnF1b3Q7OiB7CiAgICAgICAgJnF1b3Q7Y2hhaW4mcXVvdDs6IFN0cmluZywKICAgICAgICAmcXVvdDtoYXNoJnF1b3Q7OiBTdHJpbmcsCiAgICAgICAgJnF1b3Q7c3VwcGx5JnF1b3Q7OiBTdHJpbmcsCiAgICAgICAgJnF1b3Q7cGF0aCZxdW90OzogU3RyaW5nLAogICAgICAgICZxdW90O29yaWdpbiZxdW90OzogewogICAgICAgICAgICAmcXVvdDtkZW5vbSZxdW90OzogU3RyaW5nLAogICAgICAgICAgICAmcXVvdDtjaGFpbiZxdW90OzogU3RyaW5nIHwgTGlzdFtTdHJpbmddIHwgbnVsbAogICAgICAgICAgICAvLyBudWxsIGlmIHdlIGNhbm5vdCBmaW5kIHRoaXMgZGVub20gb24gbmF0aXZlX3Rva2VuX2RhdGEuanNvbgogICAgICAgICAgICAvLyBsaXN0IGlmIHdlIGNvdWxkIG5vdCBwaWNrIGNvcnJlY3QgY2hhaW4gZS5nOiBbdGVycmEsIHRlcnJhMl0gZm9yIHVsdW5hCiAgICAgICAgfQogICAgfQp9Cg=="}}),e._v(" "),o("p",[e._v("Using this data as a source, one could write an API that allows querying for the path, base denom without querying a node.")]),e._v(" "),o("p",[e._v("A relayer can create a new "),o("code",[e._v("channel")]),e._v(" from a newly created blockchain (without an established identity) to another blockchain without revealing too much of its information. Storing path information in the IBC denom that you can trace back and checking the associated client from the channel allows us to estimate of the security guarantees of the asset.")]),e._v(" "),o("h3",{attrs:{id:"ensure-the-ibc-client-is-not-expired"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#ensure-the-ibc-client-is-not-expired"}},[e._v("#")]),e._v(" Ensure the IBC client is not expired")]),e._v(" "),o("p",[e._v("Next to verifying the identity of the chain (or rather of the light client), another thing to consider is whether the light client is expired.")]),e._v(" "),o("p",[e._v("Light clients can expire or become "),o("em",[e._v("frozen")]),e._v(" if they do not get updated within the "),o("code",[e._v("TrustingPeriod")]),e._v(", or when evidence of misbehavior has been submitted. For example, in the event that the Tendermint consensus fails (if more than 1/3 of validators produce a conflicting block, also known as "),o("em",[e._v("double signing")]),e._v("), "),o("em",[e._v("and")]),e._v(" proof of this consensus failure is submitted on-chain, the IBC client becomes frozen, with a "),o("code",[e._v("frozen_height")]),e._v(" that is nonzero.")]),e._v(" "),o("p",[e._v("In the previous example, the output of "),o("code",[e._v("gaiad query ibc channel client-state")]),e._v(" confirms the client status so you know the IBC client is not expired.")]),e._v(" "),o("HighlightBox",{attrs:{type:"docs"}},[o("p",[e._v("To find out how to recover clients that have become expired through submitting a governance proposal, check out the "),o("a",{attrs:{href:"https://ibc.cosmos.network/main/ibc/proposals.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("ibc-go docs"),o("OutboundLink")],1),e._v(".")])]),e._v(" "),o("p",[e._v("The "),o("code",[e._v("latest_height.revision_height")]),e._v(" is the block height when the IBC client was last updated. In the previous example, to ensure that the block height is still up to date, you would have to query the blockchain itself for the block height 5901208 (or the latest block height when you perform the query), and ensure that the timestamp of that block + the "),o("code",[e._v("trusting_period")]),e._v(" of 1209600s/336h/14d is after the current time.")]),e._v(" "),o("p",[e._v("For example, you can verify the IBC client status using the query:")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBnYWlhZCBxdWVyeSBibG9jayA1OTAxMjA4IC0tbm9kZSBodHRwczovL3JwYy5jb3Ntb3MubmV0d29yazo0NDMK"}}),e._v(" "),o("h2",{attrs:{id:"🎉congratulations-🎉"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#🎉congratulations-🎉"}},[e._v("#")]),e._v(" 🎉Congratulations!🎉")]),e._v(" "),o("p",[e._v("You have made it all the way through this tutorial and will now be unfazed when encountering an IBC denom in the wild!")]),e._v(" "),o("HighlightBox",{attrs:{type:"synopsis"}},[o("p",[e._v("To summarize, this section has explored:")]),e._v(" "),o("ul",[o("li",[e._v("The basics of ICS-20 token transfer over IBC.")]),e._v(" "),o("li",[e._v("How you might encounter the IBC denom notation "),o("code",[e._v("ibc/...")]),e._v(" containing a hash of the path information when you interact with assets that were transferred over IBC.")]),e._v(" "),o("li",[e._v("How to derive an IBC denom, or perform a "),o("em",[e._v("denomtrace")]),e._v(" query to retrieve the path information and base denom of the asset.")]),e._v(" "),o("li",[e._v("How to query from the path information to identify chain IDs associated with a light client, making use of the chain registry (and soon CNS).")]),e._v(" "),o("li",[e._v("How to reason about the security of an IBC asset based on the path information contained in the IBC denom.")])])]),e._v(" "),o("HighlightBox",{attrs:{type:"tip"}},[o("p",[e._v("If your interest in IBC has been piqued, go to the IBC introduction and learn the intricacies of the IBC protocol and IBC applications, start "),o("RouterLink",{attrs:{to:"/academy/3-ibc/"}},[e._v("here")]),e._v(".")],1)])],1)}),[],!1,null,null,null);t.default=a.exports}}]);