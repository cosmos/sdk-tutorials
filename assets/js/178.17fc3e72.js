(window.webpackJsonp=window.webpackJsonp||[]).push([[178],{795:function(t,e,a){"use strict";a.r(e);var o=a(1),s=Object(o.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"understand-the-authz-module"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#understand-the-authz-module"}},[t._v("#")]),t._v(" Understand the Authz Module")]),t._v(" "),a("p",[t._v("The "),a("a",{attrs:{href:"https://docs.cosmos.network/main/modules/authz",target:"_blank",rel:"noopener noreferrer"}},[t._v("authz"),a("OutboundLink")],1),t._v(" (authorization) module enables one user (the granter) to authorize another (the grantee) to execute messages on their behalf. The authz module is different from the "),a("a",{attrs:{href:"https://docs.cosmos.network/main/modules/auth",target:"_blank",rel:"noopener noreferrer"}},[t._v("auth"),a("OutboundLink")],1),t._v(" (authentication) module that is responsible for specifying the base transaction and account types.")]),t._v(" "),a("h2",{attrs:{id:"use-authz-to-grant-authorizations"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#use-authz-to-grant-authorizations"}},[t._v("#")]),t._v(" Use authz to grant authorizations")]),t._v(" "),a("p",[t._v("By implementing the authz module, Cosmos SDK application developers give users the ability to grant certain privileges to other users. For example, a user might want another user to vote on their behalf and so, rather than giving the other user access to their account, the user would grant an authorization that allows the other user to execute "),a("code",[t._v("MsgVote")]),t._v(" on their behalf.")]),t._v(" "),a("p",[t._v("How users decide to use the authz module is up to them. In one case, a validator might want to create a separate account for voting in order to keep their validator key more secure. In another case, a decentralized autonomous organization (DAO) might want to distribute authorizations to members of the DAO, in which case a multisig account would grant authorizations to individual accounts and members of the DAO would be able to execute messages without requiring signatures from all the other members.")]),t._v(" "),a("p",[t._v("In this tutorial, you will spin up a single node network using the simulation application in the Cosmos SDK ("),a("code",[t._v("simapp")]),t._v("), grant an authorization to another account, and then execute a message on behalf of the granter as the grantee.")]),t._v(" "),a("h2",{attrs:{id:"requirements"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#requirements"}},[t._v("#")]),t._v(" Requirements")]),t._v(" "),a("p",[t._v("Before you start the tutorial, you need to install the "),a("code",[t._v("simd")]),t._v(" binary.")]),t._v(" "),a("p",[t._v("Clone the "),a("code",[t._v("cosmos-sdk")]),t._v(" repository:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBnaXQgY2xvbmUgaHR0cHM6Ly9naXRodWIuY29tL2Nvc21vcy9jb3Ntb3Mtc2RrCg=="}}),t._v(" "),a("p",[t._v("Change directories and check out "),a("code",[t._v("v0.44.0")]),t._v(":")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBjZCBjb3Ntb3Mtc2RrICZhbXA7JmFtcDsgZ2l0IGNoZWNrb3V0IHYwLjQ0LjAK"}}),t._v(" "),a("p",[t._v("Install the "),a("code",[t._v("simd")]),t._v(" binary:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBtYWtlIGluc3RhbGwK"}}),t._v(" "),a("p",[t._v("Check to make sure the installation was successful:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBzaW1kIHZlcnNpb24K"}}),t._v(" "),a("p",[t._v("You should see "),a("code",[t._v("0.44.0")]),t._v(" printed on the console.")]),t._v(" "),a("h2",{attrs:{id:"configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configuration"}},[t._v("#")]),t._v(" Configuration")]),t._v(" "),a("HighlightBox",{attrs:{type:"tip"}},[a("p",[t._v("If you have used "),a("code",[t._v("simd")]),t._v(" before, you might already have a "),a("code",[t._v(".simapp")]),t._v(" directory in your home directory. To keep the previous data, either save the directory to another location or use the "),a("code",[t._v("--home")]),t._v(" flag and specify a different directory for each command in the following instructions. If you do not want to keep the previous data, remove the previous directory ("),a("code",[t._v("rm -rf ~/.simapp")]),t._v(").")])]),t._v(" "),a("p",[t._v("Run the following commands to configure the "),a("code",[t._v("simd")]),t._v(" binary.")]),t._v(" "),a("p",[t._v("Set the chain ID:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBzaW1kIGNvbmZpZyBjaGFpbi1pZCBkZW1vCg=="}}),t._v(" "),a("p",[t._v("Set the keyring backend:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBzaW1kIGNvbmZpZyBrZXlyaW5nLWJhY2tlbmQgdGVzdAo="}}),t._v(" "),a("h2",{attrs:{id:"key-setup"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#key-setup"}},[t._v("#")]),t._v(" Key setup")]),t._v(" "),a("p",[t._v("Create a couple of test keys. Use the "),a("code",[t._v("--recover")]),t._v(" option so that the addresses used in the following example commands are consistent.")]),t._v(" "),a("p",[t._v("Add a key for Alice:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBzaW1kIGtleXMgYWRkIGFsaWNlIC0tcmVjb3Zlcgo="}}),t._v(" "),a("p",[t._v("Enter the following mnemonic:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"txt",base64:"cGx1bmdlIGh1bmRyZWQgaGVhbHRoIGVsZWN0cmljIHZpY3RvcnkgZm9pbCBtYXJpbmUgZWxpdGUgc2hpdmVyIHRvbmlnaHQgYXdheSB2ZXJpZnkgdmFjdXVtIGdpYW50IHBlbmNpbCBvY2VhbiBuZXN0IHBsZWRnZSBva2F5IGVuZGxlc3MgdHJ5IHNwaXJpdCBzcGVjaWFsIHN0YXJ0Cg=="}}),t._v(" "),a("p",[t._v("Add a key for Bob:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBzaW1kIGtleXMgYWRkIGJvYiAtLXJlY292ZXIK"}}),t._v(" "),a("p",[t._v("Enter the following mnemonic:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"txt",base64:"c2h1ZmZsZSBvcHBvc2UgZGlhZ3JhbSB3aXJlIHJ1YmJlciBhcGFydCBibGFtZSBlbnRpcmUgdGhvdWdodCBmaXJtIGNhcnJ5IHN3aW0gb2xkIGhlYWQgcG9saWNlIHBhbnRoZXIgbHlyaWNzIHJvYWQgbXVzdCBzaWxseSBzdGluZyBkaXJ0IGhhcmQgb3JnYW4K"}}),t._v(" "),a("h2",{attrs:{id:"chain-setup"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#chain-setup"}},[t._v("#")]),t._v(" Chain setup")]),t._v(" "),a("p",[t._v("The following commands set up a chain using the simulation application ("),a("code",[t._v("simapp")]),t._v(").")]),t._v(" "),a("p",[t._v("Initialize the node:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBzaW1kIGluaXQgdGVzdCAtLWNoYWluLWlkIGRlbW8K"}}),t._v(" "),a("p",[t._v("Add Alice and an initial balance to the genesis file:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBzaW1kIGFkZC1nZW5lc2lzLWFjY291bnQgYWxpY2UgNTAwMDAwMDAwMHN0YWtlIC0ta2V5cmluZy1iYWNrZW5kIHRlc3QK"}}),t._v(" "),a("p",[t._v("Add Bob and an initial balance to the genesis file:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBzaW1kIGFkZC1nZW5lc2lzLWFjY291bnQgYm9iIDUwMDAwMDAwMDBzdGFrZSAtLWtleXJpbmctYmFja2VuZCB0ZXN0Cg=="}}),t._v(" "),a("p",[t._v("Generate a transaction to add Alice to the initial validator set:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBzaW1kIGdlbnR4IGFsaWNlIDEwMDAwMDBzdGFrZSAtLWNoYWluLWlkIGRlbW8K"}}),t._v(" "),a("p",[t._v("Add the validator transaction to the genesis file:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBzaW1kIGNvbGxlY3QtZ2VudHhzCg=="}}),t._v(" "),a("h2",{attrs:{id:"start-chain"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#start-chain"}},[t._v("#")]),t._v(" Start chain")]),t._v(" "),a("p",[t._v("You are now ready to start a single-node network on your local machine.")]),t._v(" "),a("p",[t._v("Start the chain:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBzaW1kIHN0YXJ0Cg=="}}),t._v(" "),a("h2",{attrs:{id:"submit-s-proposal"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#submit-s-proposal"}},[t._v("#")]),t._v(" Submit s proposal")]),t._v(" "),a("p",[t._v("To demonstrate authorization to vote on a governance proposal, you must first create a governance proposal. The following command creates a text proposal that includes the minimum deposit, which allows the governance proposal to immediately enter the voting period. For more information about the command and the flag options, run "),a("code",[t._v("simd tx gov submit-proposal --help")]),t._v(".")]),t._v(" "),a("p",[t._v("Create proposal:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBzaW1kIHR4IGdvdiBzdWJtaXQtcHJvcG9zYWwgLS10aXRsZT0mcXVvdDtUZXN0IEF1dGhvcml6YXRpb24mcXVvdDsgLS1kZXNjcmlwdGlvbj0mcXVvdDtJcyBCb2IgYXV0aG9yaXplZCB0byB2b3RlPyZxdW90OyAtLXR5cGU9JnF1b3Q7VGV4dCZxdW90OyAtLWRlcG9zaXQ9JnF1b3Q7MTAwMDAwMDBzdGFrZSZxdW90OyAtLWZyb20gYWxpY2UK"}}),t._v(" "),a("p",[t._v("View proposal:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBzaW1kIHF1ZXJ5IGdvdiBwcm9wb3NhbCAxCg=="}}),t._v(" "),a("h2",{attrs:{id:"grant-authorization"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#grant-authorization"}},[t._v("#")]),t._v(" Grant authorization")]),t._v(" "),a("p",[t._v("Next, the granter must "),a("code",[t._v("grant")]),t._v(" an authorization to the grantee.")]),t._v(" "),a("p",[t._v('The authorization is a "generic" authorization, which is one that takes a message type (such as '),a("code",[t._v("MsgVote")]),t._v(") as a parameter and allows the grantee unlimited authorization to execute that message on behalf of the granter. Other "),a("a",{attrs:{href:"https://docs.cosmos.network/v0.45/modules/authz/01_concepts.html#built-in-authorizations",target:"_blank",rel:"noopener noreferrer"}},[t._v("authorization types"),a("OutboundLink")],1),t._v(' include "send", "delegate", "unbond", and "redelegate" in which case a limit on the number of tokens can be set by the granter. In this case, the grantee can vote as many times as they want until the granter revokes the authorization.')]),t._v(" "),a("p",[t._v("Create authorization:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBzaW1kIHR4IGF1dGh6IGdyYW50IGNvc21vczFraGxqemFnZG5jZnMwM3g1ZzZyZjlxcDVwOTN6OXFnYzN3NWR3dCBnZW5lcmljIC0tbXNnLXR5cGUgL2Nvc21vcy5nb3YudjFiZXRhMS5Nc2dWb3RlIC0tZnJvbSBhbGljZQo="}}),t._v(" "),a("p",[t._v("View authorization:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBzaW1kIHF1ZXJ5IGF1dGh6IGdyYW50cyBjb3Ntb3MxanhkMnVoeDBqNmU1OTMwNmpxM2pmcXM3cmhzN2NuaHZleTRscWggY29zbW9zMWtobGp6YWdkbmNmczAzeDVnNnJmOXFwNXA5M3o5cWdjM3c1ZHd0IC9jb3Ntb3MuZ292LnYxYmV0YTEuTXNnVm90ZQo="}}),t._v(" "),a("h2",{attrs:{id:"generate-transaction"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#generate-transaction"}},[t._v("#")]),t._v(" Generate transaction")]),t._v(" "),a("p",[t._v("In order for the grantee to execute a message on behalf of the granter, the grantee must first generate an unsigned transaction where the transaction author (the "),a("code",[t._v("--from")]),t._v(" address) is the granter.")]),t._v(" "),a("p",[t._v("Create unsigned transaction:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBzaW1kIHR4IGdvdiB2b3RlIDEgeWVzIC0tZnJvbSBjb3Ntb3MxanhkMnVoeDBqNmU1OTMwNmpxM2pmcXM3cmhzN2NuaHZleTRscWggLS1nZW5lcmF0ZS1vbmx5ICZndDsgdHguanNvbgo="}}),t._v(" "),a("p",[t._v("View transaction:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBjYXQgdHguanNvbgo="}}),t._v(" "),a("h2",{attrs:{id:"execute-transaction"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#execute-transaction"}},[t._v("#")]),t._v(" Execute transaction")]),t._v(" "),a("p",[t._v("Finally, the grantee can sign and send the transaction using the "),a("code",[t._v("exec")]),t._v(" command. The author of the transaction (the "),a("code",[t._v("--from")]),t._v(" address) is the grantee.")]),t._v(" "),a("p",[t._v("Sign and send transaction:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBzaW1kIHR4IGF1dGh6IGV4ZWMgdHguanNvbiAtLWZyb20gYm9iCg=="}}),t._v(" "),a("p",[t._v("View vote:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBzaW1kIHF1ZXJ5IGdvdiB2b3RlIDEgY29zbW9zMWp4ZDJ1aHgwajZlNTkzMDZqcTNqZnFzN3Joczdjbmh2ZXk0bHFoCg=="}}),t._v(" "),a("h2",{attrs:{id:"revoke-authorization"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#revoke-authorization"}},[t._v("#")]),t._v(" Revoke authorization")]),t._v(" "),a("p",[t._v("The granter can revoke the authorization from the grantee using the "),a("code",[t._v("revoke")]),t._v(" command.")]),t._v(" "),a("p",[t._v("Revoke authorization:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBzaW1kIHR4IGF1dGh6IHJldm9rZSBjb3Ntb3Mxa2hsanphZ2RuY2ZzMDN4NWc2cmY5cXA1cDkzejlxZ2MzdzVkd3QgL2Nvc21vcy5nb3YudjFiZXRhMS5Nc2dWb3RlIC0tZnJvbSBhbGljZQo="}}),t._v(" "),a("p",[t._v("View authorization:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBzaW1kIHF1ZXJ5IGF1dGh6IGdyYW50cyBjb3Ntb3MxanhkMnVoeDBqNmU1OTMwNmpxM2pmcXM3cmhzN2NuaHZleTRscWggY29zbW9zMWtobGp6YWdkbmNmczAzeDVnNnJmOXFwNXA5M3o5cWdjM3c1ZHd0IC9jb3Ntb3MuZ292LnYxYmV0YTEuTXNnVm90ZQo="}}),t._v(" "),a("h2",{attrs:{id:"🎉-congratulations-🎉"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🎉-congratulations-🎉"}},[t._v("#")]),t._v(" 🎉 Congratulations 🎉")]),t._v(" "),a("p",[t._v("By completing this tutorial, you have learned how to use the authz module!")]),t._v(" "),a("HighlightBox",{attrs:{type:"synopsis"}},[a("p",[t._v("To summarize, this section has explored:")]),t._v(" "),a("ul",[a("li",[t._v("How to configure and use the simulation application (simapp).")]),t._v(" "),a("li",[t._v("How to create a governance proposal.")]),t._v(" "),a("li",[t._v("How to create a voting authorization.")]),t._v(" "),a("li",[t._v("How to generate an unsigned transaction.")]),t._v(" "),a("li",[t._v("How to sign and execute a transaction.")]),t._v(" "),a("li",[t._v("How to revoke a voting authorization.")])])]),t._v(" "),a("p",[t._v("To learn more about the authorization module and different types of authorizations, check out the "),a("a",{attrs:{href:"https://docs.cosmos.network/main/modules/authz",target:"_blank",rel:"noopener noreferrer"}},[t._v("authz module documentation"),a("OutboundLink")],1),t._v(".")])],1)}),[],!1,null,null,null);e.default=s.exports}}]);