(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{715:function(e,t,o){"use strict";o.r(t);var a=o(1),s=Object(a.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h1",{attrs:{id:"messages"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#messages"}},[e._v("#")]),e._v(" Messages")]),e._v(" "),o("HighlightBox",{attrs:{type:"prerequisite"}},[o("p",[e._v("It is recommended to take a look at the following previous sections to better understand messages:")]),e._v(" "),o("ul",[o("li",[o("RouterLink",{attrs:{to:"/academy/2-cosmos-concepts/1-architecture.html"}},[e._v("A Blockchain App Architecture")])],1),e._v(" "),o("li",[o("RouterLink",{attrs:{to:"/academy/2-cosmos-concepts/2-accounts.html"}},[e._v("Accounts")])],1),e._v(" "),o("li",[o("RouterLink",{attrs:{to:"/academy/2-cosmos-concepts/3-transactions.html"}},[e._v("Transactions")])],1)])]),e._v(" "),o("HighlightBox",{attrs:{type:"learning"}},[o("p",[e._v("In this section, you will take a closer look at messages, "),o("code",[e._v("Msg")]),e._v(". At the end of the section, you can find a code example that illustrates message creation and the inclusion of messages in transactions for your checkers blockchain.\n"),o("br"),o("br"),e._v("\nUnderstanding "),o("code",[e._v("Msg")]),e._v(" will help you prepare for the next section, on "),o("RouterLink",{attrs:{to:"/academy/2-cosmos-concepts/5-modules.html"}},[e._v("modules in the Cosmos SDK")]),e._v(", as messages are a primary object handled by modules.")],1)]),e._v(" "),o("p",[e._v("Messages are one of two primary objects handled by a module in the Cosmos SDK. The other primary object handled by modules is queries. While messages inform the state and have the potential to alter it, queries inspect the module state and are always read-only.")]),e._v(" "),o("p",[e._v("In the Cosmos SDK, a "),o("strong",[e._v("transaction")]),e._v(" contains "),o("strong",[e._v("one or more messages")]),e._v(". The module processes the messages after the transaction is included in a block by the consensus layer.")]),e._v(" "),o("ExpansionPanel",{attrs:{title:"Signing a message"}},[o("p",[e._v("Remember from the "),o("RouterLink",{attrs:{to:"/academy/2-cosmos-concepts/3-transactions.html"}},[e._v("previous section on transactions")]),e._v(" that transactions must be signed before a validator includes them in a block. Every message in a transaction must be signed by the addresses as specified by "),o("code",[e._v("GetSigners")]),e._v(".\n"),o("br"),o("br"),e._v("\nThe Cosmos SDK currently allows signing transactions with either "),o("code",[e._v("SIGN_MODE_DIRECT")]),e._v(" or "),o("code",[e._v("SIGN_MODE_LEGACY_AMINO_JSON")]),e._v(" methods.\n"),o("br"),o("br"),e._v("\nWhen an account signs a message it signs an array of bytes. This array of bytes is the outcome of serializing the message. For the signature to be verifiable at a later date, this conversion needs to be deterministic. For this reason, you define a canonical bytes-representation of the message, typically with the parameters ordered alphabetically.")],1)]),e._v(" "),o("h2",{attrs:{id:"messages-and-the-transaction-lifecycle"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#messages-and-the-transaction-lifecycle"}},[e._v("#")]),e._v(" Messages and the transaction lifecycle")]),e._v(" "),o("p",[e._v("Transactions containing one or more valid messages are serialized and confirmed by CometBFT. As you might recall, CometBFT is agnostic to the transaction interpretation and has absolute finality. When a transaction is included in a block, it is confirmed and finalized with no possibility of chain re-organization or cancellation.")]),e._v(" "),o("p",[e._v("The confirmed transaction is relayed to the Cosmos SDK application for interpretation. Each message is routed to the appropriate module via "),o("code",[e._v("BaseApp")]),e._v(" using "),o("code",[e._v("MsgServiceRouter")]),e._v(". "),o("code",[e._v("BaseApp")]),e._v(" decodes each message contained in the transaction. Each module has its own "),o("code",[e._v("MsgService")]),e._v(" that processes each received message.")]),e._v(" "),o("h2",{attrs:{id:"msgservice"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#msgservice"}},[e._v("#")]),e._v(" "),o("code",[e._v("MsgService")])]),e._v(" "),o("p",[e._v("Although it is technically feasible to proceed to create a novel "),o("code",[e._v("MsgService")]),e._v(", the recommended approach is to define a Protobuf "),o("code",[e._v("Msg")]),e._v(" service. Each module has exactly one Protobuf "),o("code",[e._v("Msg")]),e._v(" service defined in "),o("code",[e._v("tx.proto")]),e._v(" and there is an RPC service method for each message type in the module. The Protobuf message service implicitly defines the interface layer of the state, mutating processes contained within the module.")]),e._v(" "),o("p",[e._v("How does all of this translate into code? Here is an example "),o("code",[e._v("MsgService")]),e._v(" from the "),o("a",{attrs:{href:"https://docs.cosmos.network/v0.46/modules/bank/",target:"_blank",rel:"noopener noreferrer"}},[o("code",[e._v("bank")]),e._v(" module"),o("OutboundLink")],1),e._v(":")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"protobuf",base64:"Ly8gTXNnIGRlZmluZXMgdGhlIGJhbmsgTXNnIHNlcnZpY2UuCnNlcnZpY2UgTXNnIHsKICAvLyBTZW5kIGRlZmluZXMgYSBtZXRob2QgZm9yIHNlbmRpbmcgY29pbnMgZnJvbSBvbmUgYWNjb3VudCB0byBhbm90aGVyIGFjY291bnQuCiAgcnBjIFNlbmQoTXNnU2VuZCkgcmV0dXJucyAoTXNnU2VuZFJlc3BvbnNlKTsKCiAgLy8gTXVsdGlTZW5kIGRlZmluZXMgYSBtZXRob2QgZm9yIHNlbmRpbmcgY29pbnMgZnJvbSBzb21lIGFjY291bnRzIHRvIG90aGVyIGFjY291bnRzLgogIHJwYyBNdWx0aVNlbmQoTXNnTXVsdGlTZW5kKSByZXR1cm5zIChNc2dNdWx0aVNlbmRSZXNwb25zZSk7Cn0K"}}),e._v(" "),o("p",[e._v("In this example:")]),e._v(" "),o("ul",[o("li",[e._v("Each "),o("code",[e._v("Msg")]),e._v(" service method has exactly "),o("strong",[e._v("one argument")]),e._v(", such as "),o("code",[e._v("MsgSend")]),e._v(", which must implement the "),o("code",[e._v("sdk.Msg")]),e._v(" interface and a Protobuf response.")]),e._v(" "),o("li",[e._v("The "),o("strong",[e._v("standard naming convention")]),e._v(" is to call the RPC argument "),o("code",[e._v("Msg<service-rpc-name>")]),e._v(" and the RPC response "),o("code",[e._v("Msg<service-rpc-name>Response")]),e._v(".")])]),e._v(" "),o("h2",{attrs:{id:"client-and-server-code-generation"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#client-and-server-code-generation"}},[e._v("#")]),e._v(" Client and server code generation")]),e._v(" "),o("p",[e._v("The Cosmos SDK uses Protobuf definitions to generate client and server code:")]),e._v(" "),o("ul",[o("li",[e._v("The "),o("code",[e._v("MsgServer")]),e._v(" interface defines the server API for the "),o("code",[e._v("Msg")]),e._v(" service. Its implementation is described in the "),o("a",{attrs:{href:"https://docs.cosmos.network/main/building-modules/msg-services.html",target:"_blank",rel:"noopener noreferrer"}},[o("code",[e._v("Msg")]),e._v(" services documentation"),o("OutboundLink")],1),e._v(".")]),e._v(" "),o("li",[e._v("Structures are generated for all RPC requests and response types.")])]),e._v(" "),o("HighlightBox",{attrs:{type:"docs"}},[o("p",[e._v("If you want to dive deeper when it comes to messages, the "),o("code",[e._v("Msg")]),e._v(" service, and modules, see:")]),e._v(" "),o("ul",[o("li",[e._v("The Cosmos SDK documentation on "),o("a",{attrs:{href:"https://docs.cosmos.network/main/building-modules/msg-services.html",target:"_blank",rel:"noopener noreferrer"}},[o("code",[e._v("Msg")]),e._v(" service"),o("OutboundLink")],1),e._v(".")]),e._v(" "),o("li",[e._v("The Cosmos SDK documentation on messages and queries, addressing how to define messages using "),o("code",[e._v("Msg")]),e._v(" services - "),o("a",{attrs:{href:"https://docs.cosmos.network/main/building-modules/messages-and-queries.html#legacy-amino-legacymsgs",target:"_blank",rel:"noopener noreferrer"}},[e._v("Amino "),o("code",[e._v("LegacyMsg")]),o("OutboundLink")],1),e._v(".")])])]),e._v(" "),o("h2",{attrs:{id:"code-example"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#code-example"}},[e._v("#")]),e._v(" Code example")]),e._v(" "),o("ExpansionPanel",{attrs:{title:"Show me some code for my checkers blockchain - Including messages"}},[o("p",[e._v("In the "),o("RouterLink",{attrs:{to:"/academy/2-cosmos-concepts/3-transactions.html"}},[e._v("previous")]),e._v(" design exercise's code examples, the ABCI application was aware of a single transaction type: that of a checkers move with four "),o("code",[e._v("int")]),e._v(" values. With multiple games, this is no longer sufficient. Additionally, you need to conform to the SDK's way of handling "),o("code",[e._v("Tx")]),e._v(", which means "),o("strong",[e._v("creating messages that are then included in a transaction")]),e._v(".\n"),o("br")],1),e._v(" "),o("p",[e._v("If you want the guided coding exercise instead of design and implementation considerations, see the links at the bottom of the page.")]),e._v(" "),o("p",[o("br"),o("br"),e._v(" "),o("strong",[e._v("What you need")])]),e._v(" "),o("p",[e._v("Begin by describing the messages you need for your checkers application to have a solid starting point before diving into the code:")]),e._v(" "),o("ol",[o("li",[e._v("In the former "),o("em",[e._v("Play")]),e._v(" transaction, your four integers need to move from the transaction to an "),o("code",[e._v("sdk.Msg")]),e._v(", wrapped in said transaction. Four flat "),o("code",[e._v("int")]),e._v(" values are no longer sufficient, as you need to follow the "),o("code",[e._v("sdk.Msg")]),e._v(" interface, identify the game for which a move is meant, and distinguish a move message from other message types.")]),e._v(" "),o("li",[e._v("You need to add a message type for creating a new game. When this is done, a player can create a new game which mentions other players. A generated (possibly) ID identifies this newly created game and is returned to the message creator.")]),e._v(" "),o("li",[e._v("It would be a good feature for the other person to be able to reject the challenge. This would have the added benefit of clearing the state of stale, unstarted games.")])]),e._v(" "),o("p",[o("strong",[e._v("How to proceed")])]),e._v(" "),o("p",[e._v("Focus on the messages around the "),o("strong",[e._v("game creation")]),e._v(". There is no single true way of deciding what goes into your messages. The following is one reasonable example.")]),e._v(" "),o("ol",[o("li",[o("p",[e._v("The message itself is structured like this:")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"dHlwZSBNc2dDcmVhdGVHYW1lIHN0cnVjdCB7CiAgICBDcmVhdG9yIHN0cmluZwogICAgQmxhY2sgICBzdHJpbmcKICAgIFJlZCAgICAgc3RyaW5nCn0K"}}),e._v(" "),o("p",[e._v("Note that "),o("code",[e._v("Creator")]),e._v(" contains the address of the message signer.")])],1),e._v(" "),o("li",[o("p",[e._v("The corresponding response message would then be:")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"dHlwZSBNc2dDcmVhdGVHYW1lUmVzcG9uc2Ugc3RydWN0IHsKICAgIEdhbWVJbmRleCBzdHJpbmcKfQo="}}),e._v(" "),o("p",[e._v("The idea here is that when the creator does not know the ID of the game that will be created, the ID needs to be returned.")])],1)]),e._v(" "),o("p",[e._v("With the messages defined, you need to declare how the message should be handled. This involves:")]),e._v(" "),o("ol",[o("li",[e._v("Describing how the messages are serialized.")]),e._v(" "),o("li",[e._v("Writing the code that handles the message and places the new game in the storage.")]),e._v(" "),o("li",[e._v("Putting hooks and callbacks at the right places in the general message handling.")])]),e._v(" "),o("p",[e._v("Thinking from design to implementation, Ignite CLI can help you create these elements, plus the "),o("code",[e._v("MsgCreateGame")]),e._v(" and "),o("code",[e._v("MsgCreateGameResponse")]),e._v(" objects, with this command:")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBpZ25pdGUgc2NhZmZvbGQgbWVzc2FnZSBjcmVhdGVHYW1lIGJsYWNrIHJlZCBcCiAgICAtLW1vZHVsZSBjaGVja2VycyBcCiAgICAtLXJlc3BvbnNlIGdhbWVJbmRleAo="}}),e._v(" "),o("HighlightBox",{attrs:{type:"info"}},[o("p",[e._v("Ignite CLI creates a variety of other files. See "),o("RouterLink",{attrs:{to:"/hands-on-exercise/1-ignite-cli/"}},[e._v("Run Your Own Cosmos Chain")]),e._v(" for details, and to make additions to existing files.")],1)]),e._v(" "),o("p",[o("em",[o("strong",[e._v("A sample of things Ignite CLI did for you")])])]),e._v(" "),o("p",[e._v("Ignite CLI significantly reduces the amount of work a developer has to do to build an application with the Cosmos SDK. Among others, it assists with:")]),e._v(" "),o("ol",[o("li",[o("p",[e._v("Getting the signer, the "),o("code",[e._v("Creator")]),e._v(", of your message:")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"ZnVuYyAobXNnICpNc2dDcmVhdGVHYW1lKSBHZXRTaWduZXJzKCkgW11zZGsuQWNjQWRkcmVzcyB7CiAgICBjcmVhdG9yLCBlcnIgOj0gc2RrLkFjY0FkZHJlc3NGcm9tQmVjaDMyKG1zZy5DcmVhdG9yKQogICAgaWYgZXJyICE9IG5pbCB7CiAgICAgICBwYW5pYyhlcnIpCiAgIH0KICAgcmV0dXJuIFtdc2RrLkFjY0FkZHJlc3N7Y3JlYXRvcn0KfQo="}}),e._v(" "),o("p",[e._v("Where "),o("code",[e._v("GetSigners")]),e._v(" is "),o("a",{attrs:{href:"https://github.com/cosmos/cosmos-sdk/blob/1dba673/types/tx_msg.go#L21",target:"_blank",rel:"noopener noreferrer"}},[e._v("a requirement of "),o("code",[e._v("sdk.Msg")]),o("OutboundLink")],1),e._v(".")])],1),e._v(" "),o("li",[o("p",[e._v("Making sure the message's bytes to sign are deterministic:")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"ZnVuYyAobXNnICpNc2dDcmVhdGVHYW1lKSBHZXRTaWduQnl0ZXMoKSBbXWJ5dGUgewogICAgYnogOj0gTW9kdWxlQ2RjLk11c3RNYXJzaGFsSlNPTihtc2cpCiAgICByZXR1cm4gc2RrLk11c3RTb3J0SlNPTihieikKfQo="}})],1),e._v(" "),o("li",[o("p",[e._v("Adding a callback for your new message type in your module's message handler "),o("code",[e._v("x/checkers/handler.go")]),e._v(":")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Li4uCnN3aXRjaCBtc2cgOj0gbXNnLih0eXBlKSB7CiAgICAuLi4KICAgIGNhc2UgKnR5cGVzLk1zZ0NyZWF0ZUdhbWU6CiAgICAgICAgcmVzLCBlcnIgOj0gbXNnU2VydmVyLkNyZWF0ZUdhbWUoc2RrLldyYXBTREtDb250ZXh0KGN0eCksIG1zZykKICAgICAgICByZXR1cm4gc2RrLldyYXBTZXJ2aWNlUmVzdWx0KGN0eCwgcmVzLCBlcnIpCiAgICAuLi4KfQo="}})],1),e._v(" "),o("li",[o("p",[e._v("Creating an empty shell of a file ("),o("code",[e._v("x/checkers/keeper/msg_server_create_game.go")]),e._v(") for you to include your code, and the response message:")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"ZnVuYyAoayBtc2dTZXJ2ZXIpIENyZWF0ZUdhbWUoZ29DdHggY29udGV4dC5Db250ZXh0LCBtc2cgKnR5cGVzLk1zZ0NyZWF0ZUdhbWUpICgqdHlwZXMuTXNnQ3JlYXRlR2FtZVJlc3BvbnNlLCBlcnJvcikgewogICAgY3R4IDo9IHNkay5VbndyYXBTREtDb250ZXh0KGdvQ3R4KQoKICAgIC8vIFRPRE86IEhhbmRsaW5nIHRoZSBtZXNzYWdlCiAgICBfID0gY3R4CgogICAgcmV0dXJuICZhbXA7dHlwZXMuTXNnQ3JlYXRlR2FtZVJlc3BvbnNle30sIG5pbAp9Cg=="}}),e._v(" "),o("p",[e._v("Ignite CLI is opinionated in terms of which files it creates to separate which concerns. If you are not using it, you are free to create the files you want.")])],1)]),e._v(" "),o("p",[o("strong",[e._v("What is left to do?")])]),e._v(" "),o("p",[e._v("Your work is mostly done. You want to create the specific game creation code to replace "),o("code",[e._v("// TODO: Handling the message")]),e._v(". For this, you need to:")]),e._v(" "),o("ol",[o("li",[o("p",[e._v("Decide how to create a new and unique game ID: "),o("code",[e._v("newIndex")]),e._v(".")]),e._v(" "),o("HighlightBox",{attrs:{type:"info"}},[o("p",[e._v("For more details, and to avoid diving too deep in this section, see:")]),e._v(" "),o("ul",[o("li",[o("RouterLink",{attrs:{to:"/hands-on-exercise/1-ignite-cli/"}},[e._v("Run Your Own Cosmos Chain")]),e._v(" to start the guided coding exercise from scratch,")],1),e._v(" "),o("li",[o("RouterLink",{attrs:{to:"/hands-on-exercise/1-ignite-cli/5-create-handling.html"}},[e._v("Create and Save a Game Properly")]),e._v(" to jump straight where you handle the new message.")],1)])])],1),e._v(" "),o("li",[o("p",[e._v("Extract and verify addresses, such as:")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"YmxhY2ssIGVyciA6PSBzZGsuQWNjQWRkcmVzc0Zyb21CZWNoMzIobXNnLkJsYWNrKQppZiBlcnIgIT0gbmlsIHsKICAgIHJldHVybiBuaWwsIGVycm9ycy5OZXcoJnF1b3Q7aW52YWxpZCBhZGRyZXNzIGZvciBibGFjayZxdW90OykKfQo="}})],1),e._v(" "),o("li",[o("p",[e._v("Create a game object with all required parameters - see the "),o("RouterLink",{attrs:{to:"/academy/2-cosmos-concepts/5-modules.html"}},[e._v("modules section")]),e._v(" for the declaration of this object:")],1),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"c3RvcmVkR2FtZSA6PSB7CiAgICBDcmVhdG9yOiAgIGNyZWF0b3IsCiAgICBJbmRleDogICAgIG5ld0luZGV4LAogICAgR2FtZTogICAgICBydWxlcy5OZXcoKS5TdHJpbmcoKSwKICAgIEJsYWNrOiAgICAgYmxhY2ssCiAgICBSZWQ6ICAgICAgIHJlZCwKfQo="}})],1),e._v(" "),o("li",[o("p",[e._v("Send the game object to storage - see the "),o("RouterLink",{attrs:{to:"/academy/2-cosmos-concepts/5-modules.html"}},[e._v("modules section")]),e._v(" for the declaration of this function:")],1),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"ay5LZWVwZXIuU2V0U3RvcmVkR2FtZShjdHgsIHN0b3JlZEdhbWUpCg=="}})],1),e._v(" "),o("li",[o("p",[e._v("And finally, return the expected message:")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"cmV0dXJuICZhbXA7dHlwZXMuTXNnQ3JlYXRlR2FtZVJlc3BvbnNlewogICAgR2FtZUluZGV4OiBuZXdJbmRleCwKfSwgbmlsCg=="}})],1)]),e._v(" "),o("HighlightBox",{attrs:{type:"remember"}},[o("p",[e._v("Remember, as a part of good design practice:")]),e._v(" "),o("ul",[o("li",[e._v("If you encounter an internal error (one that denotes an error in logic or catastrophic failure), you should "),o("code",[e._v('panic("This situation should not happen")')]),e._v(".")]),e._v(" "),o("li",[e._v("If you encounter a user or "),o("em",[e._v("regular")]),e._v(" error (like a user not having enough funds), you should return a regular "),o("code",[e._v("error")]),e._v(".")])])]),e._v(" "),o("p",[o("strong",[e._v("The other messages")])]),e._v(" "),o("p",[e._v("You can also implement other messages:")]),e._v(" "),o("ol",[o("li",[o("p",[e._v("The "),o("strong",[e._v("play message")]),e._v(", which means implicitly accepting the challenge when playing for the first time. If you create it with Ignite CLI, use:")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBpZ25pdGUgc2NhZmZvbGQgbWVzc2FnZSBwbGF5TW92ZSBnYW1lSW5kZXggZnJvbVg6dWludCBmcm9tWTp1aW50IHRvWDp1aW50IHRvWTp1aW50IC0tbW9kdWxlIGNoZWNrZXJzIC0tcmVzcG9uc2UgY2FwdHVyZWRYOmludCxjYXB0dXJlZFk6aW50LHdpbm5lcgo="}}),e._v(" "),o("p",[e._v("This generates, among others, the object files, callbacks, and a new file for you to write your code:")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"ZnVuYyAoayBtc2dTZXJ2ZXIpIFBsYXlNb3ZlKGdvQ3R4IGNvbnRleHQuQ29udGV4dCwgbXNnICp0eXBlcy5Nc2dQbGF5TW92ZSkgKCp0eXBlcy5Nc2dQbGF5TW92ZVJlc3BvbnNlLCBlcnJvcikgewogICAgY3R4IDo9IHNkay5VbndyYXBTREtDb250ZXh0KGdvQ3R4KQoKICAgIC8vIFRPRE86IEhhbmRsaW5nIHRoZSBtZXNzYWdlCiAgICBfID0gY3R4CgogICAgcmV0dXJuICZhbXA7dHlwZXMuTXNnUGxheU1vdmVSZXNwb25zZXt9LCBuaWwKfQo="}}),e._v(" "),o("p",[e._v("To jump straight to the corresponding part of the coding exercise, head to "),o("RouterLink",{attrs:{to:"/hands-on-exercise/1-ignite-cli/6-play-game.html"}},[e._v("Add a Way to Make a Move")]),e._v(".")],1)],1),e._v(" "),o("li",[o("p",[e._v("The "),o("strong",[e._v("reject message")]),e._v(", which should be valid only if the player never played any moves in this game.")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBpZ25pdGUgc2NhZmZvbGQgbWVzc2FnZSByZWplY3RHYW1lIGdhbWVJbmRleCAtLW1vZHVsZSBjaGVja2Vycwo="}}),e._v(" "),o("p",[e._v("This generates, among others:")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"ZnVuYyAoayBtc2dTZXJ2ZXIpIFJlamVjdEdhbWUoZ29DdHggY29udGV4dC5Db250ZXh0LCBtc2cgKnR5cGVzLk1zZ1JlamVjdEdhbWUpICgqdHlwZXMuTXNnUmVqZWN0R2FtZVJlc3BvbnNlLCBlcnJvcikgewogICAgY3R4IDo9IHNkay5VbndyYXBTREtDb250ZXh0KGdvQ3R4KQoKICAgIC8vIFRPRE86IEhhbmRsaW5nIHRoZSBtZXNzYWdlCiAgICBfID0gY3R4CgogICAgcmV0dXJuICZhbXA7dHlwZXMuTXNnUmVqZWN0R2FtZVJlc3BvbnNle30sIG5pbAp9Cg=="}}),e._v(" "),o("p",[e._v("This message is not implemented in the coding exercise as it is not necessary if you implement an expiration.")])],1)]),e._v(" "),o("p",[o("strong",[e._v("Other considerations")])]),e._v(" "),o("p",[e._v("What would happen if one of the two players has accepted the game by playing, but the other player has neither accepted nor rejected the game? You can address this scenario by:")]),e._v(" "),o("ul",[o("li",[e._v("Having a timeout after which the game is canceled.")]),e._v(" "),o("li",[e._v("Keeping an index as a First-In-First-Out (FIFO) list, or a list of unstarted games ordered by their cancellation time, so that this automatic trigger does not consume too many resources.")])]),e._v(" "),o("p",[e._v("What would happen if a player stops taking turns? To ensure functionality for your checkers application, you can consider:")]),e._v(" "),o("ul",[o("li",[e._v("Having a timeout after which the game is forfeited. You could also automatically charge the forgetful player, if and when you implement a wager system. For the guided coding exercise on this part, head straight to "),o("RouterLink",{attrs:{to:"/hands-on-exercise/2-ignite-cli-adv/1-game-deadline.html"}},[e._v("Keep an Up-To-Date Game Deadline")]),e._v(".")],1),e._v(" "),o("li",[e._v("Keeping an index of games that could be forfeited. If both timeouts are the same, you can keep a single FIFO list of games so you can clear them from the top of the list as necessary. For the guided coding exercise on this part, head straight to "),o("RouterLink",{attrs:{to:"/hands-on-exercise/2-ignite-cli-adv/3-game-fifo.html"}},[e._v("Put Your Games in Order")]),e._v(".")],1),e._v(" "),o("li",[e._v("Handling the cancelation in ABCI's "),o("code",[e._v("EndBlock")]),e._v(" (or rather its equivalent in the Cosmos SDK) without any of the players having to trigger the cancelation. For the guided coding exercise on this part, head straight to "),o("RouterLink",{attrs:{to:"/hands-on-exercise/2-ignite-cli-adv/4-game-forfeit.html"}},[e._v("Auto-Expiring Games")]),e._v(".")],1)]),e._v(" "),o("p",[e._v("In general terms, you could add "),o("code",[e._v("timeout: Timestamp")]),e._v(" to your "),o("code",[e._v("StoredGame")]),e._v(" and update it every time something changes in the game. You can decide on a maximum delay, for example "),o("em",[e._v("one day")]),e._v(".")]),e._v(" "),o("HighlightBox",{attrs:{type:"info"}},[o("p",[e._v("There are no "),o("em",[e._v("open")]),e._v(" challenges, meaning a player cannot create a game where the second player is unknown until someone steps in. Therefore, player matching is left outside of the blockchain. The enterprising student can incorporate it inside the blockchain by changing the necessary models.")])])],1),e._v(" "),o("HighlightBox",{attrs:{type:"tip"}},[o("p",[e._v("If you would like to get started on building your own checkers game, you can go straight to the main exercise in "),o("RouterLink",{attrs:{to:"/hands-on-exercise/1-ignite-cli/"}},[e._v("Run Your Own Cosmos Chain")]),e._v(" to start from scratch.")],1),e._v(" "),o("p",[e._v("More specifically, you can jump to:")]),e._v(" "),o("ul",[o("li",[o("RouterLink",{attrs:{to:"/hands-on-exercise/1-ignite-cli/4-create-message.html"}},[e._v("Create Custom Messages")]),e._v(" to see how to simply create the "),o("code",[e._v("MsgCreateGame")]),e._v(",")],1),e._v(" "),o("li",[o("RouterLink",{attrs:{to:"/hands-on-exercise/1-ignite-cli/5-create-handling.html"}},[e._v("Create and Save a Game Properly")]),e._v(" to see how to handle "),o("code",[e._v("MsgCreateGame")]),e._v(",")],1),e._v(" "),o("li",[o("RouterLink",{attrs:{to:"/hands-on-exercise/1-ignite-cli/6-play-game.html"}},[e._v("Add a Way to Make a Move")]),e._v(" for the same but with "),o("code",[e._v("MsgPlayMove")]),e._v(".")],1)])]),e._v(" "),o("HighlightBox",{attrs:{type:"synopsis"}},[o("p",[e._v("To summarize, this section has explored:")]),e._v(" "),o("ul",[o("li",[e._v("Messages, one of two primary objects handled by a module in the Cosmos SDK, which inform the state and have the potential to alter it.")]),e._v(" "),o("li",[e._v("How one or more messages form a transaction in the Cosmos SDK, and messages are only processed after a transaction is signed by a validator and included in a block by the consensus layer.")]),e._v(" "),o("li",[e._v("An example of more complex message handling capabilities related to the checkers game blockchain.")])])])],1)}),[],!1,null,null,null);t.default=s.exports}}]);