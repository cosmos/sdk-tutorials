(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{719:function(e,t,o){"use strict";o.r(t);var a=o(1),s=Object(a.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h1",{attrs:{id:"queries"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#queries"}},[e._v("#")]),e._v(" Queries")]),e._v(" "),o("HighlightBox",{attrs:{type:"prerequisite"}},[o("p",[e._v("Make sure you are prepared for this section by reading the following previous sections:")]),e._v(" "),o("ul",[o("li",[o("RouterLink",{attrs:{to:"/academy/2-cosmos-concepts/1-architecture.html"}},[e._v("A Blockchain App Architecture")])],1),e._v(" "),o("li",[o("RouterLink",{attrs:{to:"/academy/2-cosmos-concepts/2-accounts.html"}},[e._v("Accounts")])],1),e._v(" "),o("li",[o("RouterLink",{attrs:{to:"/academy/2-cosmos-concepts/3-transactions.html"}},[e._v("Transactions")])],1),e._v(" "),o("li",[o("RouterLink",{attrs:{to:"/academy/2-cosmos-concepts/5-modules.html"}},[e._v("Modules")])],1)])]),e._v(" "),o("HighlightBox",{attrs:{type:"learning"}},[o("p",[e._v("In this section you will discover queries, one of two primary objects handled by modules. At the end of the section is a code example that puts queries into practice in your checkers blockchain.")])]),e._v(" "),o("p",[e._v("A query is a request for information, made by end-users of an application through an interface, and processed by a full node. Available information includes:")]),e._v(" "),o("ul",[o("li",[e._v("Information about the network.")]),e._v(" "),o("li",[e._v("Information about the application itself.")]),e._v(" "),o("li",[e._v("Information about the application state.")])]),e._v(" "),o("p",[e._v("Queries do not require consensus to be processed as they do not trigger state transitions. Therefore queries can be handled entirely independently by a full node.")]),e._v(" "),o("HighlightBox",{attrs:{type:"tip"}},[o("p",[e._v("Visit the "),o("a",{attrs:{href:"https://docs.cosmos.network/main/basics/query-lifecycle.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("detailed Cosmos SDK documentation"),o("OutboundLink")],1),e._v(" for a clear overview of the query lifecycle and learn how a query is created, handled, and responded to.")])]),e._v(" "),o("h2",{attrs:{id:"code-example"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#code-example"}},[e._v("#")]),e._v(" Code example")]),e._v(" "),o("ExpansionPanel",{attrs:{title:"Show me some code for my checkers blockchain"}},[o("p",[e._v("If you have used Ignite CLI so far, it has already created queries for you to get one stored game or a list of them. However, you still do not have a way to check whether a move works or is valid. It would be wasteful to send a transaction with an invalid move, it is better to catch such a mistake "),o("em",[e._v("before")]),e._v(" submitting a transaction. So you are going to create a query to discover whether a move is valid.\n"),o("br"),o("br"),e._v("\nIgnite CLI can again help with a simple command:")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBpZ25pdGUgc2NhZmZvbGQgcXVlcnkgY2FuUGxheU1vdmUgXAogICAgZ2FtZUluZGV4IHBsYXllciBmcm9tWDp1aW50IGZyb21ZOnVpbnQgdG9YOnVpbnQgdG9ZOnVpbnQgXAogICAgLS1tb2R1bGUgY2hlY2tlcnMgXAogICAgLS1yZXNwb25zZSBwb3NzaWJsZTpib29sCg=="}}),e._v(" "),o("p",[e._v("This creates the following query objects:")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"dHlwZSBRdWVyeUNhblBsYXlNb3ZlUmVxdWVzdCBzdHJ1Y3QgewogICAgR2FtZUluZGV4IHN0cmluZwogICAgUGxheWVyICBzdHJpbmcKICAgIEZyb21YICAgdWludDY0CiAgICBGcm9tWSAgIHVpbnQ2NAogICAgVG9YICAgICB1aW50NjQKICAgIFRvWSAgICAgdWludDY0Cn0KCnR5cGUgUXVlcnlDYW5QbGF5TW92ZVJlc3BvbnNlIHN0cnVjdCB7CiAgICBQb3NzaWJsZSBib29sCiAgICBSZWFzb24gICBzdHJpbmcgLy8gQWN0dWFsbHksIHlvdSBoYXZlIHRvIGFkZCB0aGlzIG9uZSBieSBoYW5kLgp9Cg=="}}),e._v(" "),o("p",[e._v("It also creates a function that should look familiar:")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"ZnVuYyAoayBLZWVwZXIpIENhblBsYXlNb3ZlKGdvQ3R4IGNvbnRleHQuQ29udGV4dCwgcmVxICp0eXBlcy5RdWVyeUNhblBsYXlNb3ZlUmVxdWVzdCkgKCp0eXBlcy5RdWVyeUNhblBsYXlNb3ZlUmVzcG9uc2UsIGVycm9yKSB7CiAgICAuLi4KICAgIC8vIFRPRE86IFByb2Nlc3MgdGhlIHF1ZXJ5CgogICAgcmV0dXJuICZhbXA7dHlwZXMuUXVlcnlDYW5QbGF5TW92ZVJlc3BvbnNle30sIG5pbAp9Cg=="}}),e._v(" "),o("p",[e._v("Now you must fill in the gaps under "),o("code",[e._v("TODO")]),e._v(". Simply put:")]),e._v(" "),o("ol",[o("li",[o("p",[e._v("Is the game finished? You should add a "),o("code",[e._v("Winner")]),e._v(" to your "),o("code",[e._v("StoredGame")]),e._v(" first.")])]),e._v(" "),o("li",[o("p",[e._v("Is it an expected player?")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"aXNCbGFjayA6PSByZXEuUGxheWVyID09ICZxdW90O2ImcXVvdDsKaXNSZWQgOj0gcmVxLlBsYXllciA9PSAmcXVvdDtyJnF1b3Q7CnZhciBwbGF5ZXIgcnVsZXMuUGxheWVyCmlmIGlzQmxhY2sgJmFtcDsmYW1wOyBpc1JlZCB7CiAgICBwbGF5ZXIgPSBydWxlcy5TdHJpbmdQaWVjZXNbc3RvcmVkR2FtZS5UdXJuXS5QbGF5ZXIKfSBlbHNlIGlmIGlzQmxhY2sgewogICAgcGxheWVyID0gcnVsZXMuQkxBQ0tfUExBWUVSCn0gZWxzZSBpZiBpc1JlZCB7CiAgICBwbGF5ZXIgPSBydWxlcy5SRURfUExBWUVSCn0gZWxzZSB7CiAgICByZXR1cm4gJmFtcDt0eXBlcy5RdWVyeUNhblBsYXlNb3ZlUmVzcG9uc2V7CiAgICAgICAgUG9zc2libGU6IGZhbHNlLAogICAgICAgIFJlYXNvbjogICBmbXQuU3ByaW50ZigmcXVvdDslczogJXMmcXVvdDssICZxdW90O21lc3NhZ2UgY3JlYXRvciBpcyBub3QgYSBwbGF5ZXImcXVvdDssIHJlcS5QbGF5ZXIpLAogICAgfSwgbmlsCn0K"}})],1),e._v(" "),o("li",[o("p",[e._v("Is it the player's turn?")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Z2FtZSwgZXJyIDo9IHN0b3JlZEdhbWUuUGFyc2VHYW1lKCkKaWYgZXJyICE9IG5pbCB7CiAgICByZXR1cm4gbmlsLCBlcnIKfQppZiAhZ2FtZS5UdXJuSXMocGxheWVyKSB7CiAgICByZXR1cm4gJmFtcDt0eXBlcy5RdWVyeUNhblBsYXlNb3ZlUmVzcG9uc2V7CiAgICAgICAgUG9zc2libGU6IGZhbHNlLAogICAgICAgIFJlYXNvbjogICBmbXQuU3ByaW50ZigmcXVvdDslczogJXMmcXVvdDssICZxdW90O3BsYXllciB0cmllZCB0byBwbGF5IG91dCBvZiB0dXJuJnF1b3Q7LCBwbGF5ZXIuQ29sb3IpLAogICAgfSwgbmlsCn0K"}})],1),e._v(" "),o("li",[o("p",[e._v("Attempt the move in memory without committing any new state:")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"XywgbW92ZUVyciA6PSBnYW1lLk1vdmUoCiAgICBydWxlcy5Qb3N7CiAgICAgICAgWDogaW50KHJlcS5Gcm9tWCksCiAgICAgICAgWTogaW50KHJlcS5Gcm9tWSksCiAgICB9LAogICAgcnVsZXMuUG9zewogICAgICAgIFg6IGludChyZXEuVG9YKSwKICAgICAgICBZOiBpbnQocmVxLlRvWSksCiAgICB9LAopCmlmIG1vdmVFcnIgIT0gbmlsIHsKICAgIHJldHVybiAmYW1wO3R5cGVzLlF1ZXJ5Q2FuUGxheU1vdmVSZXNwb25zZXsKICAgICAgICBQb3NzaWJsZTogZmFsc2UsCiAgICAgICAgUmVhc29uOiAgIGZtdC5TcHJpbnRmKCZxdW90OyVzOiAlcyZxdW90OywgJnF1b3Q7d3JvbmcgbW92ZSZxdW90OywgbW92ZUVyci5FcnJvcigpKSwKICAgIH0sIG5pbAp9Cg=="}})],1),e._v(" "),o("li",[o("p",[e._v("If all checks are passed, return the "),o("strong",[e._v("OK")]),e._v(" status:")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"cmV0dXJuICZhbXA7dHlwZXMuUXVlcnlDYW5QbGF5TW92ZVJlc3BvbnNlewogICAgUG9zc2libGU6IHRydWUsCiAgICBSZWFzb246ICAgJnF1b3Q7b2smcXVvdDssCn0sIG5pbAo="}})],1)]),e._v(" "),o("HighlightBox",{attrs:{type:"info"}},[o("p",[e._v("The player's move will be tested against the latest validated state of the blockchain. It does not test against the intermediate state being calculated as transactions are delivered, nor does it test against the potential state that would result from delivering the transactions still in the transaction pool.")])]),e._v(" "),o("HighlightBox",{attrs:{type:"info"}},[o("p",[e._v("A player can test their move only after the opponent's move is included in a previous block. These types of edge-case scenarios are not common in your checkers game, and you can expect little to no effect on the user experience.")])]),e._v(" "),o("p",[e._v("This is not an exhaustive list of potential queries. Some examples of other possible queries would be to get a player's open games, or to get a list of games that are timing out soon. It depends on the needs of your application and how much functionality you willingly provide.")])],1),e._v(" "),o("HighlightBox",{attrs:{type:"tip"}},[o("p",[e._v("If you want to go beyond out-of-context code samples like the above and see more in detail how to define these features, go to "),o("RouterLink",{attrs:{to:"/hands-on-exercise/1-ignite-cli/"}},[e._v("Run Your Own Cosmos Chain")]),e._v(".\n"),o("br"),o("br"),e._v("\nMore precisely, you can jump to:")],1),e._v(" "),o("ul",[o("li",[o("RouterLink",{attrs:{to:"/hands-on-exercise/2-ignite-cli-adv/9-can-play.html"}},[e._v("Help Find a Correct Move")]),e._v(" to see how to implement a query with the help of Ignite CLI.")],1)])]),e._v(" "),o("HighlightBox",{attrs:{type:"synopsis"}},[o("p",[e._v("To summarize, this section has explored:")]),e._v(" "),o("ul",[o("li",[e._v("Queries, one of two primary objects handled by a module in the Cosmos SDK, which inspect a module's state and are always read-only.")]),e._v(" "),o("li",[e._v("How a query is a request for information (which could be about the network, about an application, or about the application's state) that is made by end-users of an application through an interface.")]),e._v(" "),o("li",[e._v("How queries do not require consensus to be processed as they do not trigger state transitions, meaning they can be handled entirely independently by a full node.")])])])],1)}),[],!1,null,null,null);t.default=s.exports}}]);