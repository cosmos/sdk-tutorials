(window.webpackJsonp=window.webpackJsonp||[]).push([[108],{627:function(e,l,t){"use strict";t.r(l);var o=t(0),c=Object(o.a)({},(function(){var e=this,l=e.$createElement,t=e._self._c||l;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"genesis"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#genesis"}},[e._v("#")]),e._v(" Genesis")]),e._v(" "),t("p",[e._v("The AppModule interface includes a number of functions for use in initializing and exporting GenesisState for the chain. The "),t("code",[e._v("ModuleBasicManager")]),e._v(" calls these functions on each module when starting, stopping or exporting the chain. Here is a very basic implementation that you can expand upon.")]),e._v(" "),t("p",[e._v("Go to "),t("code",[e._v("x/nameservice/types/genesis.go")]),e._v(" and we will define what the genesis state will be, the default genesis and a way to validate it so we don't run into any errors when we start the chain with preexisting state.")]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"cGFja2FnZSB0eXBlcwoKaW1wb3J0ICZxdW90O2ZtdCZxdW90OwoKLy8gR2VuZXNpc1N0YXRlIC0gYWxsIG5hbWVzZXJ2aWNlIHN0YXRlIHRoYXQgbXVzdCBiZSBwcm92aWRlZCBhdCBnZW5lc2lzCnR5cGUgR2VuZXNpc1N0YXRlIHN0cnVjdCB7CgkvLyBUT0RPOiBGaWxsIG91dCB3aGF0IGlzIG5lZWRlZCBieSB0aGUgbW9kdWxlIGZvciBnZW5lc2lzCglXaG9pc1JlY29yZHMgW11XaG9pcyBganNvbjomcXVvdDt3aG9pc19yZWNvcmRzJnF1b3Q7YAp9CgovLyBOZXdHZW5lc2lzU3RhdGUgY3JlYXRlcyBhIG5ldyBHZW5lc2lzU3RhdGUgb2JqZWN0CmZ1bmMgTmV3R2VuZXNpc1N0YXRlKCAvKiBUT0RPOiBGaWxsIG91dCB3aXRoIHdoYXQgaXMgbmVlZGVkIGZvciBnZW5lc2lzIHN0YXRlICovICkgR2VuZXNpc1N0YXRlIHsKCXJldHVybiBHZW5lc2lzU3RhdGV7CgkJLy8gVE9ETzogRmlsbCBvdXQgYWNjb3JkaW5nIHRvIHlvdXIgZ2VuZXNpcyBzdGF0ZQoJCVdob2lzUmVjb3JkczogbmlsLAoJfQp9CgovLyBEZWZhdWx0R2VuZXNpc1N0YXRlIC0gZGVmYXVsdCBHZW5lc2lzU3RhdGUgdXNlZCBieSBDb3Ntb3MgSHViCmZ1bmMgRGVmYXVsdEdlbmVzaXNTdGF0ZSgpIEdlbmVzaXNTdGF0ZSB7CglyZXR1cm4gR2VuZXNpc1N0YXRlewoJCVdob2lzUmVjb3JkczogW11XaG9pc3t9LAoJfQp9CgovLyBWYWxpZGF0ZUdlbmVzaXMgdmFsaWRhdGVzIHRoZSBuYW1lc2VydmljZSBnZW5lc2lzIHBhcmFtZXRlcnMKZnVuYyBWYWxpZGF0ZUdlbmVzaXMoZGF0YSBHZW5lc2lzU3RhdGUpIGVycm9yIHsKCS8vIFRPRE86IENyZWF0ZSBhIHNhbml0eSBjaGVjayB0byBtYWtlIHN1cmUgdGhlIHN0YXRlIGNvbmZvcm1zIHRvIHRoZSBtb2R1bGVzIG5lZWRzCglmb3IgXywgcmVjb3JkIDo9IHJhbmdlIGRhdGEuV2hvaXNSZWNvcmRzIHsKCQlpZiByZWNvcmQuQ3JlYXRvciA9PSBuaWwgewoJCQlyZXR1cm4gZm10LkVycm9yZigmcXVvdDtpbnZhbGlkIFdob2lzUmVjb3JkOiBDcmVhdG9yOiAlcy4gRXJyb3I6IE1pc3NpbmcgQ3JlYXRvciZxdW90OywgcmVjb3JkLkNyZWF0b3IpCgkJfQoJCWlmIHJlY29yZC5WYWx1ZSA9PSAmcXVvdDsmcXVvdDsgewoJCQlyZXR1cm4gZm10LkVycm9yZigmcXVvdDtpbnZhbGlkIFdob2lzUmVjb3JkOiBWYWx1ZTogJXMuIEVycm9yOiBNaXNzaW5nIFZhbHVlJnF1b3Q7LCByZWNvcmQuVmFsdWUpCgkJfQoJCWlmIHJlY29yZC5QcmljZSA9PSBuaWwgewoJCQlyZXR1cm4gZm10LkVycm9yZigmcXVvdDtpbnZhbGlkIFdob2lzUmVjb3JkOiBQcmljZTogJXMuIEVycm9yOiBNaXNzaW5nIFByaWNlJnF1b3Q7LCByZWNvcmQuUHJpY2UpCgkJfQoJfQoJcmV0dXJuIG5pbAp9Cg=="}}),e._v(" "),t("p",[e._v("Next we can update our "),t("code",[e._v("x/nameservice/genesis.go")]),e._v(" file, and modify the functions "),t("code",[e._v("InitGenesis")]),e._v(" and "),t("code",[e._v("ExportGenesis")])]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"cGFja2FnZSBuYW1lc2VydmljZQoKaW1wb3J0ICgKCXNkayAmcXVvdDtnaXRodWIuY29tL2Nvc21vcy9jb3Ntb3Mtc2RrL3R5cGVzJnF1b3Q7CgkmcXVvdDtnaXRodWIuY29tL3VzZXIvbmFtZXNlcnZpY2UveC9uYW1lc2VydmljZS9rZWVwZXImcXVvdDsKCSZxdW90O2dpdGh1Yi5jb20vdXNlci9uYW1lc2VydmljZS94L25hbWVzZXJ2aWNlL3R5cGVzJnF1b3Q7CgkvLyBhYmNpICZxdW90O2dpdGh1Yi5jb20vdGVuZGVybWludC90ZW5kZXJtaW50L2FiY2kvdHlwZXMmcXVvdDsKKQoKLy8gSW5pdEdlbmVzaXMgaW5pdGlhbGl6ZSBkZWZhdWx0IHBhcmFtZXRlcnMKLy8gYW5kIHRoZSBrZWVwZXIncyBhZGRyZXNzIHRvIHB1YmtleSBtYXAKZnVuYyBJbml0R2VuZXNpcyhjdHggc2RrLkNvbnRleHQsIGtlZXBlciBrZWVwZXIuS2VlcGVyLCBkYXRhIHR5cGVzLkdlbmVzaXNTdGF0ZSkgewoJZm9yIF8sIHJlY29yZCA6PSByYW5nZSBkYXRhLldob2lzUmVjb3JkcyB7CgkJa2VlcGVyLlNldFdob2lzKGN0eCwgcmVjb3JkLlZhbHVlLCByZWNvcmQpCgl9Cn0KCi8vIEV4cG9ydEdlbmVzaXMgd3JpdGVzIHRoZSBjdXJyZW50IHN0b3JlIHZhbHVlcwovLyB0byBhIGdlbmVzaXMgZmlsZSwgd2hpY2ggY2FuIGJlIGltcG9ydGVkIGFnYWluCi8vIHdpdGggSW5pdEdlbmVzaXMKZnVuYyBFeHBvcnRHZW5lc2lzKGN0eCBzZGsuQ29udGV4dCwgayBrZWVwZXIuS2VlcGVyKSB0eXBlcy5HZW5lc2lzU3RhdGUgewoJdmFyIHJlY29yZHMgW110eXBlcy5XaG9pcwoJaXRlcmF0b3IgOj0gay5HZXROYW1lc0l0ZXJhdG9yKGN0eCkKCWZvciA7IGl0ZXJhdG9yLlZhbGlkKCk7IGl0ZXJhdG9yLk5leHQoKSB7CgoJCW5hbWUgOj0gc3RyaW5nKGl0ZXJhdG9yLktleSgpKQoJCXdob2lzLCBfIDo9IGsuR2V0V2hvaXMoY3R4LCBuYW1lKQoJCXJlY29yZHMgPSBhcHBlbmQocmVjb3Jkcywgd2hvaXMpCgoJfQoJcmV0dXJuIHR5cGVzLkdlbmVzaXNTdGF0ZXtXaG9pc1JlY29yZHM6IHJlY29yZHN9Cn0K"}}),e._v(" "),t("p",[e._v("A few notes about the above code:")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("ValidateGenesis()")]),e._v(" validates the provided genesis state to ensure that expected invariants hold")]),e._v(" "),t("li",[t("code",[e._v("DefaultGenesisState()")]),e._v(" is used mostly for testing. This provides a minimal GenesisState.")]),e._v(" "),t("li",[t("code",[e._v("InitGenesis()")]),e._v(" is called on chain start, this function imports genesis state into the keeper.")]),e._v(" "),t("li",[t("code",[e._v("ExportGenesis()")]),e._v(" is called after stopping the chain, this function loads application state into a GenesisState struct to later be exported to "),t("code",[e._v("genesis.json")]),e._v(" alongside data from the other modules.")])]),e._v(" "),t("h3",{attrs:{id:"now-your-module-has-everything-it-needs-to-be-incorporated-into-your-cosmos-sdk-application"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#now-your-module-has-everything-it-needs-to-be-incorporated-into-your-cosmos-sdk-application"}},[e._v("#")]),e._v(" Now your module has everything it needs to be incorporated into your Cosmos SDK application.")])],1)}),[],!1,null,null,null);l.default=c.exports}}]);