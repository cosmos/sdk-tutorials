(window.webpackJsonp=window.webpackJsonp||[]).push([[151],{767:function(e,t,a){"use strict";a.r(t);var o=a(1),s=Object(o.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"go-relayer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#go-relayer"}},[e._v("#")]),e._v(" Go Relayer")]),e._v(" "),a("HighlightBox",{attrs:{type:"prerequisite"}},[a("p",[e._v("Before you dive into Go relayers, make sure to:")]),e._v(" "),a("ul",[a("li",[e._v("Install Go.")]),e._v(" "),a("li",[e._v("Install Docker.")]),e._v(" "),a("li",[e._v("Install Rust.")])]),e._v(" "),a("p",[e._v("For all installations, please see the "),a("RouterLink",{attrs:{to:"/tutorials/2-setup/"}},[e._v("setup page")]),e._v(".")],1)]),e._v(" "),a("HighlightBox",{attrs:{type:"learning"}},[a("p",[e._v("Have you considered running a relayer?\n"),a("br"),a("br"),e._v("\nIn this section, you will learn:")]),e._v(" "),a("ul",[a("li",[e._v("How to get started with the Go relayer.")]),e._v(" "),a("li",[e._v("Basic Go relayer commands.")])])]),e._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/cosmos/relayer",target:"_blank",rel:"noopener noreferrer"}},[e._v("The Go relayer"),a("OutboundLink")],1),e._v(" is a relayer implementation written in Golang. It can create clients, connections, and channels, as well as relay packets and update and upgrade clients.")]),e._v(" "),a("p",[e._v("The Go relayer aims to get your relayer up and running with minimal manual configuration and abstracts away a lot of the more complex Inter-Blockchain Communication Protocol (IBC) concepts. The objective is that users can spin up their own relayer and relay packets. To provide this functionality, it automates a lot of work to fetch configuration data from the "),a("a",{attrs:{href:"https://github.com/cosmos/chain-registry",target:"_blank",rel:"noopener noreferrer"}},[e._v("chain registry"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("p",[e._v("After the installation, you will get started with relaying on mainnet chains and do some local testing.")]),e._v(" "),a("h2",{attrs:{id:"installation-and-getting-started"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#installation-and-getting-started"}},[e._v("#")]),e._v(" Installation and getting started")]),e._v(" "),a("p",[e._v("The repository offers a script to start two chains, which you need to test the relayer.")]),e._v(" "),a("HighlightBox",{attrs:{type:"note"}},[a("p",[e._v("The most up-to-date major version of the Go relayer is v2. This version delivered major updates and improvements, including the introduction of a provider interface to accommodate chains with different consensus types than CometBFT and event-based processing that results in performance improvements.\n"),a("br"),a("br"),e._v("\nIt is recommended to use this latest version, and the following commands assume you are using v2.")])]),e._v(" "),a("ol",[a("li",[e._v("First, create a folder for this section:")])]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBta2RpciByZWxheS1nby10ZXN0CiQgY2QgcmVsYXktZ28tdGVzdAo="}}),e._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[e._v("Clone the "),a("a",{attrs:{href:"https://github.com/cosmos/relayer",target:"_blank",rel:"noopener noreferrer"}},[e._v("Go relayer repository"),a("OutboundLink")],1),e._v(":")])]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBnaXQgY2xvbmUgaHR0cHM6Ly9naXRodWIuY29tL2Nvc21vcy9yZWxheWVyLmdpdAo="}}),e._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[e._v("Now build the Go relayer:")])]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBjZCByZWxheWVyCiQgZ2l0IGNoZWNrb3V0IHYyLjAuMC1yYzMKJCBtYWtlIGluc3RhbGwK"}}),e._v(" "),a("p",[e._v("Make sure that your "),a("code",[e._v("$GOPATH")]),e._v(" is set correctly and "),a("code",[e._v("$GOPATH/bin")]),e._v(" is included in your "),a("code",[e._v("$PATH")]),e._v(".")]),e._v(" "),a("p",[e._v("To check the available commands, run the help command on the "),a("code",[e._v("rly")]),e._v(" binary.")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBybHkgLWgK"}}),e._v(" "),a("p",[e._v("Which returns:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"txt",base64:"cmx5IGhhczoKICAgMS4gQ29uZmlndXJhdGlvbiBtYW5hZ2VtZW50IGZvciBDaGFpbnMgYW5kIFBhdGhzCiAgIDIuIEtleSBtYW5hZ2VtZW50IGZvciBtYW5hZ2luZyBtdWx0aXBsZSBrZXlzIGZvciBtdWx0aXBsZSBjaGFpbnMKICAgMy4gUXVlcnkgYW5kIHRyYW5zYWN0aW9uIGZ1bmN0aW9uYWxpdHkgZm9yIElCQwoKICAgTk9URTogTW9zdCBvZiB0aGUgY29tbWFuZHMgaGF2ZSBhbGlhc2VzIHRoYXQgbWFrZSB0eXBpbmcgdGhlbSBtdWNoIHF1aWNrZXIKICAgICAgICAgKGkuZS4gJ3JseSB0eCcsICdybHkgcScsIGV0Yy4uLikKClVzYWdlOgogIHJseSBbY29tbWFuZF0KCkF2YWlsYWJsZSBDb21tYW5kczoKICBjb25maWcgICAgICBNYW5hZ2UgY29uZmlndXJhdGlvbiBmaWxlCiAgY2hhaW5zICAgICAgTWFuYWdlIGNoYWluIGNvbmZpZ3VyYXRpb25zCiAgcGF0aHMgICAgICAgTWFuYWdlIHBhdGggY29uZmlndXJhdGlvbnMKICBrZXlzICAgICAgICBNYW5hZ2Uga2V5cyBoZWxkIGJ5IHRoZSByZWxheWVyIGZvciBlYWNoIGNoYWluCgogIHRyYW5zYWN0ICAgIElCQyB0cmFuc2FjdGlvbiBjb21tYW5kcwogIHF1ZXJ5ICAgICAgIElCQyBxdWVyeSBjb21tYW5kcwogIHN0YXJ0ICAgICAgIFN0YXJ0IHRoZSBsaXN0ZW5pbmcgcmVsYXllciBvbiBhIGdpdmVuIHBhdGgKCiAgdmVyc2lvbiAgICAgUHJpbnQgdGhlIHJlbGF5ZXIgdmVyc2lvbiBpbmZvCiAgaGVscCAgICAgICAgSGVscCBhYm91dCBhbnkgY29tbWFuZAogIGNvbXBsZXRpb24gIEdlbmVyYXRlIHRoZSBhdXRvY29tcGxldGlvbiBzY3JpcHQgZm9yIHRoZSBzcGVjaWZpZWQgc2hlbGwKCkZsYWdzOgogIC1kLCAtLWRlYnVnICAgICAgICAgICAgICAgZGVidWcgb3V0cHV0CiAgLWgsIC0taGVscCAgICAgICAgICAgICAgICBoZWxwIGZvciBybHkKICAgICAgLS1ob21lIHN0cmluZyAgICAgICAgIHNldCBob21lIGRpcmVjdG9yeSAoZGVmYXVsdCAmcXVvdDsvVXNlcnMvJmx0O3VzZXJOYW1lJmd0Oy8ucmVsYXllciZxdW90OykKICAgICAgLS1sb2ctZm9ybWF0IHN0cmluZyAgIGxvZyBvdXRwdXQgZm9ybWF0IChhdXRvLCBsb2dmbXQsIGpzb24sIG9yIGNvbnNvbGUpIChkZWZhdWx0ICZxdW90O2F1dG8mcXVvdDspCgpVc2UgJnF1b3Q7cmx5IFtjb21tYW5kXSAtLWhlbHAmcXVvdDsgZm9yIG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgYSBjb21tYW5kLgo="}}),e._v(" "),a("p",[e._v("Notice how the categories reflect the requirements you saw in the last section: to manage chain and path information, manage keys, query, and transact. The configuration data is added to the config file, stored at "),a("code",[e._v("$HOME/.relayer/config/config.yaml")]),e._v(" by default. If this is the first time you run the relayer, first initialize the config with the following command:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBybHkgY29uZmlnIGluaXQK"}}),e._v(" "),a("p",[e._v("And check the config with:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBybHkgY29uZmlnIHNob3cK"}}),e._v(" "),a("HighlightBox",{attrs:{type:"info"}},[a("p",[e._v("By default, transactions will be relayed with a memo of "),a("code",[e._v("rly(VERSION)")]),e._v(" - for example, "),a("code",[e._v("rly(v2.0.0)")]),e._v(".\n"),a("br"),a("br"),e._v("\nTo customize the memo for all relaying, use the "),a("code",[e._v("--memo")]),e._v(" flag when initializing the configuration.")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"shell",base64:"JCBybHkgY29uZmlnIGluaXQgLS1tZW1vICZxdW90O015IGN1c3RvbSBtZW1vJnF1b3Q7Cg=="}}),e._v(" "),a("p",[e._v("Custom memos will have "),a("code",[e._v("rly(VERSION)")]),e._v(" appended. For example, a memo of "),a("code",[e._v("My custom memo")]),e._v(" running on relayer version "),a("code",[e._v("v2.0.0")]),e._v(" would result in a transaction memo of "),a("code",[e._v("My custom memo | rly(v2.0.0)")]),e._v(".\n"),a("br"),a("br"),e._v("\nThe "),a("code",[e._v("--memo")]),e._v(" flag is also available for other "),a("code",[e._v("rly")]),e._v(" commands that involve sending transactions, such as "),a("code",[e._v("rly tx link")]),e._v(" and "),a("code",[e._v("rly start")]),e._v(". It can be passed there to override the "),a("code",[e._v("config.yaml")]),e._v(" value if desired.\n"),a("br"),a("br"),e._v("\nTo omit the memo entirely, including the default value of "),a("code",[e._v("rly(VERSION)")]),e._v(", use "),a("code",[e._v("-")]),e._v(" for the memo.")])],1),e._v(" "),a("p",[e._v("Now you are all set to add the chains and paths you want to relay on, add your keys and start relaying. You will investigate two different scenarios: setting up a relayer between two chains on the mainnet (this would enable you to start relaying in production), and setting up two local chains for testing purposes.")]),e._v(" "),a("h2",{attrs:{id:"relaying-in-production"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#relaying-in-production"}},[e._v("#")]),e._v(" Relaying in production")]),e._v(" "),a("p",[e._v("As stated earlier, the Go relayer strives to get your relayer up and running in a short amount of time. You will follow the tutorial from the "),a("a",{attrs:{href:"https://github.com/cosmos/relayer",target:"_blank",rel:"noopener noreferrer"}},[e._v("Github repository"),a("OutboundLink")],1),e._v(" to start relaying between the Cosmos Hub and Osmosis, one of the most popular paths.")]),e._v(" "),a("ol",[a("li",[e._v("Configure the chains you want to relay between.")])]),e._v(" "),a("p",[e._v("In this example, you will configure the relayer to operate on the canonical path between the Cosmos Hub and Osmosis.")]),e._v(" "),a("p",[e._v("The "),a("code",[e._v("rly chains add")]),e._v(" command fetches chain metadata from the "),a("a",{attrs:{href:"https://github.com/cosmos/chain-registry",target:"_blank",rel:"noopener noreferrer"}},[e._v("chain registry"),a("OutboundLink")],1),e._v(" and adds it to your config file:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBybHkgY2hhaW5zIGFkZCBjb3Ntb3NodWIgb3Ntb3Npcwo="}}),e._v(" "),a("p",[e._v("Adding chains from the chain registry randomly selects a publicly available RPC address from the registry entry. If you are running your own node (which is recommended if you are running relaying services professionally), manually go into the config and adjust the "),a("code",[e._v("rpc-addr")]),e._v(" setting to the RPC endpoint you have exposed.")]),e._v(" "),a("HighlightBox",{attrs:{type:"note"}},[a("p",[a("code",[e._v("rly chains add")]),e._v(" will check the liveliness of the available RPC endpoints for that chain in the chain registry. The command may fail if none of these RPC endpoints are available. In this case, you will want to manually add the chain config.")])]),e._v(" "),a("p",[e._v("To add the chain config files manually, example config files have been included "),a("a",{attrs:{href:"https://github.com/cosmos/relayer/tree/main/docs/example-configs/",target:"_blank",rel:"noopener noreferrer"}},[e._v("in the Cosmos relayer documentation"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBybHkgY2hhaW5zIGFkZCAtLXVybCBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vY29zbW9zL3JlbGF5ZXIvbWFpbi9kb2NzL2V4YW1wbGUtY29uZmlncy9jb3Ntb3NodWItNC5qc29uCiQgcmx5IGNoYWlucyBhZGQgLS11cmwgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2Nvc21vcy9yZWxheWVyL21haW4vZG9jcy9leGFtcGxlLWNvbmZpZ3Mvb3Ntb3Npcy0xLmpzb24K"}}),e._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[e._v("Import OR create new keys for the relayer to use when signing and relaying transactions.")])]),e._v(" "),a("HighlightBox",{attrs:{type:"info"}},[a("p",[a("code",[e._v("key-name")]),e._v(" is an identifier of your choosing.")])]),e._v(" "),a("ul",[a("li",[a("p",[e._v("If you need to generate a new private key you can use the "),a("code",[e._v("add")]),e._v(" subcommand:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBybHkga2V5cyBhZGQgY29zbW9zaHViIFtrZXktbmFtZV0KJCBybHkga2V5cyBhZGQgb3Ntb3NpcyBba2V5LW5hbWVdCg=="}})],1),e._v(" "),a("li",[a("p",[e._v("If you already have a private key and want to restore it from your mnemonic you can use the "),a("code",[e._v("restore")]),e._v(" subcommand:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBybHkga2V5cyByZXN0b3JlIGNvc21vc2h1YiBba2V5LW5hbWVdICZxdW90O21uZW1vbmljIHdvcmRzIGhlcmUmcXVvdDsKJCBybHkga2V5cyByZXN0b3JlIG9zbW9zaXMgW2tleS1uYW1lXSAmcXVvdDttbmVtb25pYyB3b3JkcyBoZXJlJnF1b3Q7Cg=="}})],1)]),e._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[e._v("Edit the relayer's "),a("code",[e._v("key")]),e._v(" values in the config file to match the "),a("code",[e._v("key-name")]),e._v("s chosen above.")])]),e._v(" "),a("HighlightBox",{attrs:{type:"info"}},[a("p",[e._v("This step is necessary if you chose a "),a("code",[e._v("key-name")]),e._v(' other than "default".')])]),e._v(" "),a("p",[e._v("Example:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"yaml",base64:"LSB0eXBlOiBjb3Ntb3MKICB2YWx1ZToKICBrZXk6IFlPVVItS0VZLU5BTUUtSEVSRQogIGNoYWluLWlkOiBjb3Ntb3NodWItNAogIHJwYy1hZGRyOiBodHRwOi8vbG9jYWxob3N0OjI2NjU3Cg=="}}),e._v(" "),a("ol",{attrs:{start:"4"}},[a("li",[e._v("Ensure the keys associated with the configured chains are funded.")])]),e._v(" "),a("HighlightBox",{attrs:{type:"best-practice"}},[a("p",[a("strong",[e._v("ATTENTION:")]),e._v(" Your configured addresses will need to contain some of the respective native tokens to pay relayer fees.")])]),e._v(" "),a("p",[e._v("You can query the balance of each configured key by running:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBybHkgcXVlcnkgYmFsYW5jZSBjb3Ntb3NodWIKJCBybHkgcSBiYWxhbmNlIG9zbW9zaXMK"}}),e._v(" "),a("ol",{attrs:{start:"5"}},[a("li",[e._v("Configure path metadata in the config file.")])]),e._v(" "),a("p",[e._v("You configured the "),a("em",[e._v("chain")]),e._v(" metadata, now you need "),a("em",[e._v("path")]),e._v(" metadata. This scenario assumes that there is already a canonical channel, so there is no need for light client creation, nor connection and channel handshakes to set these up.")]),e._v(" "),a("p",[e._v("There is one easy command to get this path information - initially from the "),a("a",{attrs:{href:"https://github.com/cosmos/relayer/tree/2.0.x/interchain",target:"_blank",rel:"noopener noreferrer"}},[e._v("Interchain folder"),a("OutboundLink")],1),e._v(" in the Go relayer repository, but this is being replaced by "),a("a",{attrs:{href:"https://github.com/cosmos/chain-registry/tree/master/_IBC",target:"_blank",rel:"noopener noreferrer"}},[e._v("IBC data in the chain registry"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBybHkgcGF0aHMgZmV0Y2gK"}}),e._v(" "),a("HighlightBox",{attrs:{type:"note"}},[a("p",[e._v("Do not see the path metadata for paths you want to relay on? Please open a Push Request (PR) to add this metadata to the GitHub repository!")])]),e._v(" "),a("ol",{attrs:{start:"6"}},[a("li",[e._v("Configure the channel filter.")])]),e._v(" "),a("p",[e._v("By default, the relayer will relay packets over all channels on a given connection.")]),e._v(" "),a("p",[e._v("Each path has a "),a("code",[e._v("src-channel-filter")]),e._v(", which you can utilize to specify which channels you would like to relay on.")]),e._v(" "),a("p",[e._v("The "),a("code",[e._v("rule")]),e._v(" can be one of three values:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("allowlist")]),e._v(", which tells the relayer to relay on "),a("strong",[e._v("only")]),e._v(" the channels in "),a("code",[e._v("channel-list")]),e._v(".")]),e._v(" "),a("li",[a("code",[e._v("denylist")]),e._v(", which tells the relayer to relay on all channels "),a("strong",[e._v("except")]),e._v(" the channels in "),a("code",[e._v("channel-list")]),e._v(".")]),e._v(" "),a("li",[e._v("Empty value, which is the default setting and tells the relayer to relay on all channels.")])]),e._v(" "),a("p",[e._v("Since you should only be worried about the canonical channel between the Cosmos Hub and Osmosis, our filter settings would look like the following:")]),e._v(" "),a("p",[e._v("Example:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"yaml",base64:"IGh1Ym9zbW86CiAgc3JjOgogICAgY2hhaW4taWQ6IGNvc21vc2h1Yi00CiAgICBjbGllbnQtaWQ6IDA3LXRlbmRlcm1pbnQtMjU5CiAgICBjb25uZWN0aW9uLWlkOiBjb25uZWN0aW9uLTI1NwogIGRzdDoKICAgIGNoYWluLWlkOiBvc21vc2lzLTEKICAgIGNsaWVudC1pZDogMDctdGVuZGVybWludC0xCiAgICBjb25uZWN0aW9uLWlkOiBjb25uZWN0aW9uLTEKICBzcmMtY2hhbm5lbC1maWx0ZXI6CiAgICBydWxlOiBhbGxvd2xpc3QKICAgIGNoYW5uZWwtbGlzdDogW2NoYW5uZWwtMTQxXQo="}}),e._v(" "),a("HighlightBox",{attrs:{type:"info"}},[a("p",[e._v("Because two channels between chains are tightly coupled, there is no need to specify the dst channels.")])]),e._v(" "),a("ol",{attrs:{start:"7"}},[a("li",[e._v("Do a status check.")])]),e._v(" "),a("p",[e._v("Before starting to relay and after making some changes to the config, you can check the status of the chains and paths in the config:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBybHkgY2hhaW5zIGxpc3QK"}}),e._v(" "),a("p",[e._v("Which returns this output when healthy:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"txt",base64:"MDogY29zbW9zaHViLTQgICAgICAgICAgLSZndDsgdHlwZShjb3Ntb3MpIGtleSjinJQpIGJhbCjinJQpIHBhdGgo4pyUKQoxOiBvc21vc2lzLTEgICAgICAgICAgICAtJmd0OyB0eXBlKGNvc21vcykga2V5KOKclCkgYmFsKOKclCkgcGF0aCjinJQpCg=="}}),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBybHkgcGF0aHMgbGlzdAo="}}),e._v(" "),a("p",[e._v("Which returns this output when healthy:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"txt",base64:"MDogY29zbW9zaHViLW9zbW9zaXMgICAgICAgICAgICAgIC0mZ3Q7IGNobnMo4pyUKSBjbG50cyjinJQpIGNvbm4o4pyUKSAoY29zbW9zaHViLTQmbHQ7Jmd0O29zbW9zaXMtMSkK"}}),e._v(" "),a("p",[e._v("In case one of the checks receives a "),a("code",[e._v("✘")]),e._v(" instead of "),a("code",[e._v("✔")]),e._v(", you will need to check if you completed all the previous steps correctly.")]),e._v(" "),a("ol",{attrs:{start:"8"}},[a("li",[e._v("Finally, start the relayer on the desired path.")])]),e._v(" "),a("p",[e._v("The relayer will periodically update the clients and listen for IBC messages to relay.")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBybHkgc3RhcnQgW3BhdGhdCg=="}}),e._v(" "),a("p",[e._v("The relayer now has an event processor added to respond to emitted events signaling an IBC packet event. You can use it by adding an additional flag:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBybHkgc3RhcnQgW3BhdGhdIC1wIGV2ZW50cwo="}}),e._v(" "),a("p",[e._v("You will need to start a separate shell instance for each path you wish to relay over.")]),e._v(" "),a("p",[e._v("When running multiple instances of "),a("code",[e._v("rly start")]),e._v(", you will need to use the "),a("code",[e._v("--debug-addr")]),e._v(" flag and provide an "),a("code",[e._v("address:port")]),e._v(". You can also pass an empty string "),a("code",[e._v("''")]),e._v(" to turn off this feature, or pass "),a("code",[e._v("localhost:0")]),e._v(" to randomly select a port.")]),e._v(" "),a("h2",{attrs:{id:"testing-locally"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#testing-locally"}},[e._v("#")]),e._v(" Testing locally")]),e._v(" "),a("p",[e._v("Besides running a relayer between mainnet chains, you can also run a relayer between public testnet chains, or run chains locally to do some testing of particular scenarios. Here you will use a "),a("code",[e._v("docker-compose")]),e._v(" network with two local "),a("code",[e._v("checkers")]),e._v(" chains and a relayer between them.")]),e._v(" "),a("HighlightBox",{attrs:{type:"note"}},[a("p",[e._v("The example presented is based on the demo in the "),a("a",{attrs:{href:"https://github.com/b9lab/cosmos-ibc-docker/tree/main/tokentransfer",target:"_blank",rel:"noopener noreferrer"}},[e._v("b9lab/cosmos-ibc-docker"),a("OutboundLink")],1),e._v(" repository.")])]),e._v(" "),a("p",[e._v("Start by cloning the repository:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBnaXQgY2xvbmUgaHR0cHM6Ly9naXRodWIuY29tL2I5bGFiL2Nvc21vcy1pYmMtZG9ja2VyLmdpdAo="}}),e._v(" "),a("HighlightBox",{attrs:{type:"info"}},[a("p",[e._v("Make sure that you have installed "),a("a",{attrs:{href:"https://docs.docker.com/compose/install/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Docker Compose"),a("OutboundLink")],1),e._v(" and "),a("a",{attrs:{href:"https://docs.docker.com/get-docker/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Docker"),a("OutboundLink")],1),e._v(" before continuing.")])]),e._v(" "),a("p",[e._v("Then build the "),a("strong",[e._v("images for the checkers blockchain")]),e._v(":")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBjZCBjb3Ntb3MtaWJjLWRvY2tlci90b2tlbnRyYW5zZmVyL2NoZWNrZXJzCiQgLi9idWlsZC1pbWFnZXMuc2gK"}}),e._v(" "),a("p",[e._v("You can build the relayer image manually, or just start the network via "),a("code",[e._v("docker-compose")]),e._v(" and let it build the missing image for the "),a("code",[e._v("ibc-go")]),e._v(" relayer:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBjZCBjb3Ntb3MtaWJjLWRvY2tlci90b2tlbnRyYW5zZmVyCiQgZG9ja2VyLWNvbXBvc2UgLWYgdG9rZW50cmFuc2Zlci55bWwgLS1wcm9maWxlIGdvIHVwCg=="}}),e._v(" "),a("p",[e._v("Observe the output of "),a("code",[e._v("docker-compose")]),e._v(" until the chains are ready - the chains will take some time.")]),e._v(" "),a("p",[e._v("When the chains are ready, start the relayer process. In a new terminal, jump into the relayer container:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBkb2NrZXIgZXhlYyAtaXQgcmVsYXllciBiYXNoCg=="}}),e._v(" "),a("p",[e._v("The demo includes a script to start the relayer, but do the steps manually to practice a bit.")]),e._v(" "),a("p",[e._v("First, initialize the configuration:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBybHkgY29uZmlnIGluaXQKJCBybHkgY2hhaW5zIGFkZC1kaXIgY29uZmlncwokIHJseSBwYXRocyBhZGQtZGlyIHBhdGhzCg=="}}),e._v(" "),a("HighlightBox",{attrs:{type:"info"}},[a("p",[e._v("You can find the "),a("code",[e._v("configs")]),e._v(" and "),a("code",[e._v("paths")]),e._v(" folders in the folder "),a("code",[e._v("cosmos-ibc-docker/tokentransfer/relayer_go")]),e._v(". In the "),a("code",[e._v("checkersa.json")]),e._v(" and "),a("code",[e._v("checkersb.json")]),e._v(", you can find the endpoints of the chains and a default key alias.")])]),e._v(" "),a("p",[e._v("Populate the aliases:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBybHkga2V5cyByZXN0b3JlIGNoZWNrZXJzYSBhbGljZSAmcXVvdDtjaW5uYW1vbiBsZWdlbmQgc3dvcmQgZ2lhbnQgbWFzdGVyIHNpbXBsZSB2aXNpdCBhY3Rpb24gbGV2ZWwgYW5jaWVudCBkYXkgcnViYmVyIHBpZ2VvbiBmaWx0ZXIgZ2FybWVudCBob2NrZXkgc3RheSB3YXRlciBjcmF3bCBvbWl0IGFpcnBvcnQgdmVudHVyZSB0b2lsZXQgb3Bwb3NlJnF1b3Q7CiQgcmx5IGtleXMgcmVzdG9yZSBjaGVja2Vyc2IgYm9iICZxdW90O2RlZmluZSBlbnZlbG9wZSBmZWRlcmFsIG1vdmUgc291bCBwYW5lbCBwdXJpdHkgbGFuZ3VhZ2UgbWVtb3J5IGlsbGVnYWwgbGl0dGxlIHR3aW4gYm9ycm93IG1lbnUgbXVsZSB2b3RlIGFsdGVyIGJyaWdodCBtdXN0IGRlYWwgc2lnaHQgbXVzY2xlIHdlYXRoZXIgcnVnJnF1b3Q7Cg=="}}),e._v(" "),a("p",[e._v("The mnemonics are set in the checkers blockchains, take "),a("em",[e._v("alice")]),e._v(" from "),a("code",[e._v("checkersa")]),e._v(" and "),a("em",[e._v("bob")]),e._v(" from "),a("code",[e._v("checkersb")]),e._v(".")]),e._v(" "),a("p",[e._v("Now check if the chains and path(s) are ready to relay over:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBybHkgY2hhaW5zIGxpc3QKJCBybHkgcGF0aHMgbGlzdAo="}}),e._v(" "),a("p",[e._v("You can now connect the two chains with the "),a("code",[e._v("link")]),e._v(" command.")]),e._v(" "),a("HighlightBox",{attrs:{type:"note"}},[a("p",[e._v("The relayer will check if any clients, connections, and channels are present for the given path. If not, the "),a("code",[e._v("link")]),e._v(" command will attempt to create the missing objects.")])]),e._v(" "),a("p",[e._v("You can also check "),a("code",[e._v("rly tx -h")]),e._v(" to find the separate commands for these actions.")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBybHkgdHggbGluayBkZW1vIC1kIC10IDNzCg=="}}),e._v(" "),a("p",[e._v("Next, check the token balances on both chains:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBybHkgcSBiYWxhbmNlIGNoZWNrZXJzYSAtLWliYy1kZW5vbXMKJCBybHkgcSBiYWwgY2hlY2tlcnNiIC1pCg=="}}),e._v(" "),a("p",[e._v("Finally, send some tokens between the chains:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBybHkgdHggdHJhbnNmZXIgY2hlY2tlcnNhIGNoZWNrZXJzYiAxMHRva2VuICQocmx5IGNoYWlucyBhZGRyZXNzIGNoZWNrZXJzYikgY2hhbm5lbC0wCg=="}}),e._v(" "),a("HighlightBox",{attrs:{type:"note"}},[a("p",[e._v("The default key used for checkersa is "),a("em",[e._v("alice")]),e._v(".")])]),e._v(" "),a("p",[a("code",[e._v("$(rly chains address checkersb)")]),e._v(" will give the address of "),a("em",[e._v("bob")]),e._v(".")]),e._v(" "),a("p",[e._v("You created the commitment proof on "),a("code",[e._v("checkersa")]),e._v(" to send the packet, but no relaying has taken place yet.")]),e._v(" "),a("h3",{attrs:{id:"relay-packets-acknowledgements"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#relay-packets-acknowledgements"}},[e._v("#")]),e._v(" Relay packets/acknowledgements")]),e._v(" "),a("p",[e._v("Running "),a("code",[e._v("rly start demo")]),e._v(" would essentially loop these two commands:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBybHkgdHggcmVsYXktcGt0cyBkZW1vIGNoYW5uZWwtMCAtZAokIHJseSB0eCByZWxheS1hY2tzIGRlbW8gY2hhbm5lbC0wIC1kCg=="}}),e._v(" "),a("p",[e._v("Check that the transfer was completed:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBybHkgcSBiYWwgY2hlY2tlcnNhIC1pCiQgcmx5IHEgYmFsIGNoZWNrZXJzYiAtaQo="}}),e._v(" "),a("p",[e._v("You can see that the tokens have a denom on the "),a("code",[e._v("checkersb")]),e._v(" chain because they are not native "),a("code",[e._v("token")]),e._v("s of "),a("code",[e._v("checkersb")]),e._v(". Send the tokens back to the account on "),a("code",[e._v("checkersa")]),e._v(" by replacing "),a("code",[e._v("$denom")]),e._v(" (this will be something like "),a("code",[e._v("ibc/D11F61D9F5E49A31348A7CD2DECE888D4DFEE1DADA343F7D8D4502BFA9496936")]),e._v("):")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBybHkgdHggdHJhbnNmZXIgY2hlY2tlcnNiIGNoZWNrZXJzYSAxMCRkZW5vbSAkKHJseSBjaGFpbnMgYWRkciBjaGVja2Vyc2EpIGNoYW5uZWwtMAokIHJseSB0eCByZWxheS1wa3RzIGRlbW8gY2hhbm5lbC0wIC1kCiQgcmx5IHR4IHJlbGF5LWFja3MgZGVtbyBjaGFubmVsLTAgLWQK"}}),e._v(" "),a("p",[e._v("Check that the return trip was completed:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBybHkgcSBiYWwgY2hlY2tlcnNhIC1pCiQgcmx5IHEgYmFsIGNoZWNrZXJzYiAtaQo="}}),e._v(" "),a("p",[e._v("You can see that the stake balances decreased on each chain because of the set fees in the configuration.")]),e._v(" "),a("p",[e._v("If you are finished with the tests, make sure to shut down your network with:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBkb2NrZXItY29tcG9zZSAtZiB0b2tlbnRyYW5zZmVyLnltbCAtLXByb2ZpbGUgZ28gZG93bgo="}}),e._v(" "),a("HighlightBox",{attrs:{type:"synopsis"}},[a("p",[e._v("To summarize, this section has explored:")]),e._v(" "),a("ul",[a("li",[e._v("The Go relayer, a relayer implementation written in Golang that can create clients, connections, and channels, as well as relay packets, and update and upgrade clients.")]),e._v(" "),a("li",[e._v("How the Go relayer requires minimal manual configuration and abstracts away many more complex IBC concepts by automating a lot of work to fetch configuration data from the chain registry.")]),e._v(" "),a("li",[e._v("How to install and configure the Go relayer, and how to run it between public testnet chains or locally run chains to conveniently test particular scenarios.")])])])],1)}),[],!1,null,null,null);t.default=s.exports}}]);