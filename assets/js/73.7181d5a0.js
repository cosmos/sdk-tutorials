(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{681:function(e,t,o){"use strict";o.r(t);var a=o(0),c=Object(a.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h1",{attrs:{id:"create-posts"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#create-posts"}},[e._v("#")]),e._v(" Create posts")]),e._v(" "),o("p",[e._v("By following this beginner tutorial, you will end up with a simple blog app that is powered by the Cosmos SDK.")]),e._v(" "),o("h2",{attrs:{id:"requirements"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#requirements"}},[e._v("#")]),e._v(" Requirements")]),e._v(" "),o("p",[e._v("For this tutorial we will be using "),o("a",{attrs:{href:"https://github.com/tendermint/starport",target:"_blank",rel:"noopener noreferrer"}},[e._v("Starport"),o("OutboundLink")],1),e._v(" v0.13.2, an easy to use tool for building blockchains. To install "),o("code",[e._v("starport")]),e._v(" into "),o("code",[e._v("/usr/local/bin")]),e._v(", run the following command:")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"Y3VybCBodHRwczovL2dldC5zdGFycG9ydC5uZXR3b3JrL3N0YXJwb3J0QHYwLjEzLjIhIHwgYmFzaAo="}}),e._v(" "),o("p",[e._v("You can also use Starport v0.13.2 on the web in a "),o("a",{attrs:{href:"http://gitpod.io/#https://github.com/tendermint/starport/tree/v0.13.2",target:"_blank",rel:"noopener noreferrer"}},[e._v("browser-based IDE"),o("OutboundLink")],1),e._v(". Learn more about other ways to "),o("a",{attrs:{href:"https://github.com/tendermint/starport/blob/develop/docs/1%20Introduction/2%20Install.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("install Starport"),o("OutboundLink")],1),e._v(".")]),e._v(" "),o("h2",{attrs:{id:"getting-started"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#getting-started"}},[e._v("#")]),e._v(" Getting Started")]),e._v(" "),o("p",[e._v("Let's get started! The first step is to "),o("a",{attrs:{href:"https://github.com/tendermint/starport",target:"_blank",rel:"noopener noreferrer"}},[e._v("install the "),o("code",[e._v("starport")]),o("OutboundLink")],1),e._v(" CLI tool.")]),e._v(" "),o("p",[e._v("After "),o("code",[e._v("starport")]),e._v(" is installed, use it to create the initial app structure inside a directory named "),o("code",[e._v("blog")]),e._v(":")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"c3RhcnBvcnQgYXBwIGdpdGh1Yi5jb20vZXhhbXBsZS9ibG9nCg=="}}),e._v(" "),o("p",[e._v("One of the main features of Starport is code generation. The command above has generated a directory structure with a working blockchain application. Starport can also add data types to your app with "),o("code",[e._v("starport type")]),e._v(" command. To see it in action, follow the poll application tutorial. In this guide, however, we'll create those files manually to understand how it all works under the hood.")]),e._v(" "),o("h2",{attrs:{id:"overview"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#overview"}},[e._v("#")]),e._v(" Overview")]),e._v(" "),o("p",[e._v("Let's take a quick look at what Starport has generated for us. "),o("a",{attrs:{href:"https://docs.cosmos.network/master/basics/app-anatomy.html#core-application-file",target:"_blank",rel:"noopener noreferrer"}},[o("code",[e._v("app/app.go")]),o("OutboundLink")],1),e._v(" file imports and configures SDK modules and creates a constructor for our application that extends a "),o("a",{attrs:{href:"https://docs.cosmos.network/master/core/baseapp.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("basic SDK application"),o("OutboundLink")],1),e._v(" among other things. This app will use only a couple standard modules bundled with Cosmos SDK (including "),o("code",[e._v("auth")]),e._v(" for dealing with accounts and "),o("code",[e._v("bank")]),e._v(" for handling coin transfers) and one module ("),o("code",[e._v("x/blog")]),e._v(") that will contain custom functionality.")]),e._v(" "),o("p",[e._v("In "),o("code",[e._v("cmd")]),e._v(" directory we have source files of two programs for interacting with our application: "),o("code",[e._v("blogd")]),e._v(" starts a full-node for your blockchain and enables you to query the full-node, either to update the state by sending a transaction or to read it via a query.")]),e._v(" "),o("p",[e._v("This blog app will store data in a persistent "),o("a",{attrs:{href:"https://docs.cosmos.network/master/core/store.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("key-value store"),o("OutboundLink")],1),e._v(". Similarly to most key-value stores, you can retrieve, delete, update, and loop through keys to obtain the values you are interested in.")]),e._v(" "),o("p",[e._v("We‚Äôll be creating a simple blog-like application, so let‚Äôs define the first proto type, the "),o("code",[e._v("Post")]),e._v(" in the "),o("code",[e._v("post.proto")]),e._v(" file.")]),e._v(" "),o("h2",{attrs:{id:"proto-blog-post-proto"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#proto-blog-post-proto"}},[e._v("#")]),e._v(" proto/blog/post.proto")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"c3ludGF4ID0gJnF1b3Q7cHJvdG8zJnF1b3Q7OwpwYWNrYWdlIGV4YW1wbGUuYmxvZy5ibG9nOwoKb3B0aW9uIGdvX3BhY2thZ2UgPSAmcXVvdDtnaXRodWIuY29tL2V4YW1wbGUvYmxvZy94L2Jsb2cvdHlwZXMmcXVvdDs7CgppbXBvcnQgJnF1b3Q7Z29nb3Byb3RvL2dvZ28ucHJvdG8mcXVvdDs7CgptZXNzYWdlIFBvc3QgewogIHN0cmluZyBjcmVhdG9yID0gMTsKICBzdHJpbmcgaWQgPSAyOwogIHN0cmluZyB0aXRsZSA9IDM7IAogIHN0cmluZyBib2R5ID0gNDsgCn0KCm1lc3NhZ2UgTXNnQ3JlYXRlUG9zdCB7CiAgc3RyaW5nIGNyZWF0b3IgPSAxOwogIHN0cmluZyB0aXRsZSA9IDI7IAogIHN0cmluZyBib2R5ID0gMzsgCn0KCg=="}}),e._v(" "),o("p",[e._v("The code above defines the three properties of a post: Creator, Title, Body and ID. We generate unique global IDs for each post and also store them as strings.")]),e._v(" "),o("p",[e._v("Posts in our key-value store will look like this:")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"JnF1b3Q7cG9zdC0wJnF1b3Q7OiB7CiAgJnF1b3Q7Q3JlYXRvciZxdW90OzogJnF1b3Q7Y29zbW9zMThjZDV0NG1zdnAybHB1dmg5OXJ3Z2xybWpycnc5cXg1aDNmM2d6JnF1b3Q7LAogICZxdW90O1RpdGxlJnF1b3Q7OiAmcXVvdDtUaGlzIGlzIGEgcG9zdCEmcXVvdDssCiAgJnF1b3Q7Qm9keSZxdW90OzogJnF1b3Q7V2VsY29tZSB0byBteSBibG9nIGFwcC4mcXVvdDssCiAgJnF1b3Q7SUQmcXVvdDs6ICZxdW90OzAmcXVvdDsKfSwKJnF1b3Q7cG9zdC0xJnF1b3Q7OiB7CiAgLi4uCn0K"}}),e._v(" "),o("p",[e._v("Right now the store is empty. Let's figure out how to add posts.")]),e._v(" "),o("p",[e._v("With the Cosmos SDK, users can interact with your app with either a CLI ("),o("code",[e._v("blogd")]),e._v(") or by sending HTTP requests. Let's define the CLI command first. Users should be able to type "),o("code",[e._v("blogd tx blog create-post 'This is a post!' 'Welcome to my blog app.' --from=user1")]),e._v(" to add a post to your store. The "),o("code",[e._v("create-post")]),e._v(" subcommand hasn‚Äôt been defined yet--let‚Äôs do it now.")]),e._v(" "),o("h2",{attrs:{id:"x-blog-client-cli-tx-go"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#x-blog-client-cli-tx-go"}},[e._v("#")]),e._v(" x/blog/client/cli/tx.go")]),e._v(" "),o("p",[e._v("In the "),o("code",[e._v("import")]),e._v(" block, make sure to import these four packages:")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"aW1wb3J0ICgKCSZxdW90O2ZtdCZxdW90OwoKCSZxdW90O2dpdGh1Yi5jb20vc3BmMTMvY29icmEmcXVvdDsKCgkmcXVvdDtnaXRodWIuY29tL2Nvc21vcy9jb3Ntb3Mtc2RrL2NsaWVudCZxdW90OwoJJnF1b3Q7Z2l0aHViLmNvbS9jb3Ntb3MvY29zbW9zLXNkay9jbGllbnQvZmxhZ3MmcXVvdDsKCSZxdW90O2dpdGh1Yi5jb20vY29zbW9zL2Nvc21vcy1zZGsvY2xpZW50L3R4JnF1b3Q7CgkvLyAmcXVvdDtnaXRodWIuY29tL2Nvc21vcy9jb3Ntb3Mtc2RrL2NsaWVudC9mbGFncyZxdW90OwoJJnF1b3Q7Z2l0aHViLmNvbS9leGFtcGxlL2Jsb2cveC9ibG9nL3R5cGVzJnF1b3Q7CikK"}}),e._v(" "),o("p",[e._v("This file already contains "),o("code",[e._v("func GetTxCmd")]),e._v(" which defines custom "),o("code",[e._v("blogd")]),e._v(" "),o("a",{attrs:{href:"https://docs.cosmos.network/master/building-modules/module-interfaces.html#cli",target:"_blank",rel:"noopener noreferrer"}},[e._v("commands"),o("OutboundLink")],1),e._v(". We will add the custom "),o("code",[e._v("create-post")]),e._v(" command to our "),o("code",[e._v("blogd")]),e._v(" by first adding "),o("code",[e._v("GetCmdCreatePost")]),e._v(" to "),o("code",[e._v("blogTxCmd")]),e._v(".")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"ICBjbWQuQWRkQ29tbWFuZChDbWRDcmVhdGVQb3N0KCkpCg=="}}),e._v(" "),o("p",[e._v("At the end of the file, let's define "),o("code",[e._v("GetCmdCreatePost")]),e._v(" itself.")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"ZnVuYyBDbWRDcmVhdGVQb3N0KCkgKmNvYnJhLkNvbW1hbmQgewoJY21kIDo9ICZhbXA7Y29icmEuQ29tbWFuZHsKCQlVc2U6ICAgJnF1b3Q7Y3JlYXRlLXBvc3QgW3RpdGxlXSBbYm9keV0mcXVvdDssCgkJU2hvcnQ6ICZxdW90O0NyZWF0ZXMgYSBuZXcgcG9zdCZxdW90OywKCQlBcmdzOiAgY29icmEuRXhhY3RBcmdzKDIpLAoJCVJ1bkU6IGZ1bmMoY21kICpjb2JyYS5Db21tYW5kLCBhcmdzIFtdc3RyaW5nKSBlcnJvciB7CiAgICAgIGFyZ3NUaXRsZSA6PSBzdHJpbmcoYXJnc1swXSkKICAgICAgYXJnc0JvZHkgOj0gc3RyaW5nKGFyZ3NbMV0pCiAgICAgIAoJCQljbGllbnRDdHgsIGVyciA6PSBjbGllbnQuR2V0Q2xpZW50VHhDb250ZXh0KGNtZCkKCQkJaWYgZXJyICE9IG5pbCB7CgkJCQlyZXR1cm4gZXJyCgkJCX0KCgkJCW1zZyA6PSB0eXBlcy5OZXdNc2dDcmVhdGVQb3N0KGNsaWVudEN0eC5HZXRGcm9tQWRkcmVzcygpLlN0cmluZygpLCBzdHJpbmcoYXJnc1RpdGxlKSwgc3RyaW5nKGFyZ3NCb2R5KSkKCQkJaWYgZXJyIDo9IG1zZy5WYWxpZGF0ZUJhc2ljKCk7IGVyciAhPSBuaWwgewoJCQkJcmV0dXJuIGVycgoJCQl9CgkJCXJldHVybiB0eC5HZW5lcmF0ZU9yQnJvYWRjYXN0VHhDTEkoY2xpZW50Q3R4LCBjbWQuRmxhZ3MoKSwgbXNnKQoJCX0sCgl9CgoJZmxhZ3MuQWRkVHhGbGFnc1RvQ21kKGNtZCkKCiAgICByZXR1cm4gY21kCn0KCg=="}}),e._v(" "),o("p",[e._v("The function above defines what happens when you run the "),o("code",[e._v("create-post")]),e._v(" subcommand. "),o("code",[e._v("create-post")]),e._v(" takes two arguments "),o("code",[e._v("[title] [body]")]),e._v(", creates a message "),o("code",[e._v("NewMsgCreatePost")]),e._v(" (with title as "),o("code",[e._v("args[0]")]),e._v(" and "),o("code",[e._v("args[1]")]),e._v(") and broadcasts this message to be processed in your application.")]),e._v(" "),o("p",[e._v("This is a common pattern in the SDK: users make changes to the store by broadcasting "),o("a",{attrs:{href:"https://docs.cosmos.network/master/building-modules/messages-and-queries.html#messages",target:"_blank",rel:"noopener noreferrer"}},[e._v("messages"),o("OutboundLink")],1),e._v(". Both CLI commands and HTTP requests create messages that can be broadcasted in order for state transition to occur.")]),e._v(" "),o("h2",{attrs:{id:"x-blog-types-messages-post-go"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#x-blog-types-messages-post-go"}},[e._v("#")]),e._v(" x/blog/types/messages_post.go")]),e._v(" "),o("p",[e._v("Let‚Äôs define "),o("code",[e._v("NewMsgCreatePost")]),e._v(" in a new file you should create as "),o("code",[e._v("x/blog/types/messages_post.go")]),e._v(".")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"cGFja2FnZSB0eXBlcwoKaW1wb3J0ICgKCXNkayAmcXVvdDtnaXRodWIuY29tL2Nvc21vcy9jb3Ntb3Mtc2RrL3R5cGVzJnF1b3Q7CglzZGtlcnJvcnMgJnF1b3Q7Z2l0aHViLmNvbS9jb3Ntb3MvY29zbW9zLXNkay90eXBlcy9lcnJvcnMmcXVvdDsKKQoKdmFyIF8gc2RrLk1zZyA9ICZhbXA7TXNnQ3JlYXRlUG9zdHt9Cg=="}}),e._v(" "),o("p",[e._v("Similarly to the post proto, "),o("code",[e._v("MsgCreatePost")]),e._v(" contains our post definition.")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"ZnVuYyBOZXdNc2dDcmVhdGVQb3N0KGNyZWF0b3Igc3RyaW5nLCB0aXRsZSBzdHJpbmcsIGJvZHkgc3RyaW5nKSAqTXNnQ3JlYXRlUG9zdCB7CiAgcmV0dXJuICZhbXA7TXNnQ3JlYXRlUG9zdHsKCQlDcmVhdG9yOiBjcmVhdG9yLAogICAgVGl0bGU6IHRpdGxlLAogICAgQm9keTogYm9keSwKCX0KfQoK"}}),e._v(" "),o("p",[o("code",[e._v("NewMsgCreatePost")]),e._v(" is a constructor function that creates the "),o("code",[e._v("MsgCreatePost")]),e._v(" message. The following five functions have to be defined to implement the "),o("code",[e._v("Msg")]),e._v(" interface. They allow you to perform validation that doesn‚Äôt require access to the store (like checking for empty values), etc.")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8gUm91dGUgLi4uCmZ1bmMgKG1zZyBNc2dDcmVhdGVQb3N0KSBSb3V0ZSgpIHN0cmluZyB7CiAgcmV0dXJuIFJvdXRlcktleQp9Ci8vIFR5cGUgLi4uCmZ1bmMgKG1zZyBNc2dDcmVhdGVQb3N0KSBUeXBlKCkgc3RyaW5nIHsKICByZXR1cm4gJnF1b3Q7Q3JlYXRlUG9zdCZxdW90Owp9Ci8vIEdldFNpZ25lcnMgLi4uCmZ1bmMgKG1zZyAqTXNnQ3JlYXRlUG9zdCkgR2V0U2lnbmVycygpIFtdc2RrLkFjY0FkZHJlc3MgewogIGNyZWF0b3IsIGVyciA6PSBzZGsuQWNjQWRkcmVzc0Zyb21CZWNoMzIobXNnLkNyZWF0b3IpCiAgaWYgZXJyICE9IG5pbCB7CiAgICBwYW5pYyhlcnIpCiAgfQogIHJldHVybiBbXXNkay5BY2NBZGRyZXNze2NyZWF0b3J9Cn0KLy8gR2V0U2lnbkJ5dGVzIC4uLgpmdW5jIChtc2cgKk1zZ0NyZWF0ZVBvc3QpIEdldFNpZ25CeXRlcygpIFtdYnl0ZSB7CiAgYnogOj0gTW9kdWxlQ2RjLk11c3RNYXJzaGFsSlNPTihtc2cpCiAgcmV0dXJuIHNkay5NdXN0U29ydEpTT04oYnopCn0KLy8gVmFsaWRhdGVCYXNpYyAuLi4KZnVuYyAobXNnICpNc2dDcmVhdGVQb3N0KSBWYWxpZGF0ZUJhc2ljKCkgZXJyb3IgewogIF8sIGVyciA6PSBzZGsuQWNjQWRkcmVzc0Zyb21CZWNoMzIobXNnLkNyZWF0b3IpCiAgCWlmIGVyciAhPSBuaWwgewogIAkJcmV0dXJuIHNka2Vycm9ycy5XcmFwZihzZGtlcnJvcnMuRXJySW52YWxpZEFkZHJlc3MsICZxdW90O2ludmFsaWQgY3JlYXRvciBhZGRyZXNzICglcykmcXVvdDssIGVycikKICAJfQogIHJldHVybiBuaWwKfQo="}}),e._v(" "),o("p",[e._v("Going back to "),o("code",[e._v("GetCmdCreatePost")]),e._v(" in "),o("code",[e._v("x/blog/client/cli/tx.go")]),e._v(", you'll see "),o("code",[e._v("MsgCreatePost")]),e._v(" being created and broadcast with "),o("code",[e._v("GenerateOrBroadcastMsgs")]),e._v(".")]),e._v(" "),o("p",[e._v("After being broadcast, the messages are processed by an important part of the application, called "),o("a",{attrs:{href:"https://docs.cosmos.network/master/building-modules/handler.html",target:"_blank",rel:"noopener noreferrer"}},[o("strong",[e._v("handlers")]),o("OutboundLink")],1),e._v(".")]),e._v(" "),o("h2",{attrs:{id:"x-blog-handler-go"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#x-blog-handler-go"}},[e._v("#")]),e._v(" x/blog/handler.go")]),e._v(" "),o("p",[e._v("You should already have "),o("code",[e._v("func NewHandler")]),e._v(" defined which lists all available handlers. Modify it to include a new function called "),o("code",[e._v("handleMsgCreatePost")]),e._v(".")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"ICAgIHN3aXRjaCBtc2cgOj0gbXNnLih0eXBlKSB7CiAgICBjYXNlICp0eXBlcy5Nc2dDcmVhdGVQb3N0OgogICAgICAgIHJldHVybiBoYW5kbGVNc2dDcmVhdGVQb3N0KGN0eCwgaywgbXNnKQogICAgZGVmYXVsdDoK"}}),e._v(" "),o("p",[e._v("Let's create the handler in "),o("code",[e._v("handler_post.go")]),e._v(" file")]),e._v(" "),o("h2",{attrs:{id:"x-blog-handler-post-go"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#x-blog-handler-post-go"}},[e._v("#")]),e._v(" x/blog/handler_post.go")]),e._v(" "),o("p",[e._v("Now let‚Äôs define "),o("code",[e._v("handleMsgCreatePost")]),e._v(" in a new file "),o("code",[e._v("handler_post.go")]),e._v(":")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"cGFja2FnZSBibG9nCgppbXBvcnQgKAoJc2RrICZxdW90O2dpdGh1Yi5jb20vY29zbW9zL2Nvc21vcy1zZGsvdHlwZXMmcXVvdDsKCSZxdW90O2dpdGh1Yi5jb20vZXhhbXBsZS9ibG9nL3gvYmxvZy9rZWVwZXImcXVvdDsKCSZxdW90O2dpdGh1Yi5jb20vZXhhbXBsZS9ibG9nL3gvYmxvZy90eXBlcyZxdW90OwopCgpmdW5jIGhhbmRsZU1zZ0NyZWF0ZVBvc3QoY3R4IHNkay5Db250ZXh0LCBrIGtlZXBlci5LZWVwZXIsIG1zZyAqdHlwZXMuTXNnQ3JlYXRlUG9zdCkgKCpzZGsuUmVzdWx0LCBlcnJvcikgewoJay5DcmVhdGVQb3N0KGN0eCwgKm1zZykKCglyZXR1cm4gJmFtcDtzZGsuUmVzdWx0e0V2ZW50czogY3R4LkV2ZW50TWFuYWdlcigpLkFCQ0lFdmVudHMoKX0sIG5pbAp9CgoK"}}),e._v(" "),o("p",[e._v("After creating a post object with creator, ID and title, the message handler calls "),o("code",[e._v("k.CreatePost(ctx, post)")]),e._v(". ‚Äúk‚Äù stands for "),o("a",{attrs:{href:"https://docs.cosmos.network/master/building-modules/keeper.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Keeper"),o("OutboundLink")],1),e._v(", an abstraction used by the SDK that writes data to the store. Let‚Äôs define the "),o("code",[e._v("CreatePost")]),e._v(" keeper function in a new "),o("code",[e._v("keeper/post.go")]),e._v(" file.")]),e._v(" "),o("h2",{attrs:{id:"x-blog-keeper-post-go"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#x-blog-keeper-post-go"}},[e._v("#")]),e._v(" x/blog/keeper/post.go")]),e._v(" "),o("p",[e._v("First, create a new file "),o("code",[e._v("post.go")]),e._v(" in the "),o("code",[e._v("keeper/")]),e._v(" directory.\nThen, add a "),o("code",[e._v("CreatePost")]),e._v(" function that takes two arguments: a "),o("a",{attrs:{href:"https://docs.cosmos.network/master/core/context.html#context-definition",target:"_blank",rel:"noopener noreferrer"}},[e._v("context"),o("OutboundLink")],1),e._v(" and a post. Also, "),o("code",[e._v("GetPostCount")]),e._v(" and "),o("code",[e._v("SetPostCount functions")]),e._v(".")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"cGFja2FnZSBrZWVwZXIKCmltcG9ydCAoCgkmcXVvdDtzdHJjb252JnF1b3Q7CgoJJnF1b3Q7Z2l0aHViLmNvbS9jb3Ntb3MvY29zbW9zLXNkay9zdG9yZS9wcmVmaXgmcXVvdDsKCXNkayAmcXVvdDtnaXRodWIuY29tL2Nvc21vcy9jb3Ntb3Mtc2RrL3R5cGVzJnF1b3Q7CgkmcXVvdDtnaXRodWIuY29tL2V4YW1wbGUvYmxvZy94L2Jsb2cvdHlwZXMmcXVvdDsKKQoKLy8gR2V0UG9zdENvdW50IGdldCB0aGUgdG90YWwgbnVtYmVyIG9mIHBvc3QKZnVuYyAoayBLZWVwZXIpIEdldFBvc3RDb3VudChjdHggc2RrLkNvbnRleHQpIGludDY0IHsKCXN0b3JlIDo9IHByZWZpeC5OZXdTdG9yZShjdHguS1ZTdG9yZShrLnN0b3JlS2V5KSwgdHlwZXMuS2V5UHJlZml4KHR5cGVzLlBvc3RDb3VudEtleSkpCglieXRlS2V5IDo9IHR5cGVzLktleVByZWZpeCh0eXBlcy5Qb3N0Q291bnRLZXkpCglieiA6PSBzdG9yZS5HZXQoYnl0ZUtleSkKCgkvLyBDb3VudCBkb2Vzbid0IGV4aXN0OiBubyBlbGVtZW50CglpZiBieiA9PSBuaWwgewoJCXJldHVybiAwCgl9CgoJLy8gUGFyc2UgYnl0ZXMKCWNvdW50LCBlcnIgOj0gc3RyY29udi5QYXJzZUludChzdHJpbmcoYnopLCAxMCwgNjQpCglpZiBlcnIgIT0gbmlsIHsKCQkvLyBQYW5pYyBiZWNhdXNlIHRoZSBjb3VudCBzaG91bGQgYmUgYWx3YXlzIGZvcm1hdHRhYmxlIHRvIGludDY0CgkJcGFuaWMoJnF1b3Q7Y2Fubm90IGRlY29kZSBjb3VudCZxdW90OykKCX0KCglyZXR1cm4gY291bnQKfQoKLy8gU2V0UG9zdENvdW50IHNldCB0aGUgdG90YWwgbnVtYmVyIG9mIHBvc3QKZnVuYyAoayBLZWVwZXIpIFNldFBvc3RDb3VudChjdHggc2RrLkNvbnRleHQsIGNvdW50IGludDY0KSB7CglzdG9yZSA6PSBwcmVmaXguTmV3U3RvcmUoY3R4LktWU3RvcmUoay5zdG9yZUtleSksIHR5cGVzLktleVByZWZpeCh0eXBlcy5Qb3N0Q291bnRLZXkpKQoJYnl0ZUtleSA6PSB0eXBlcy5LZXlQcmVmaXgodHlwZXMuUG9zdENvdW50S2V5KQoJYnogOj0gW11ieXRlKHN0cmNvbnYuRm9ybWF0SW50KGNvdW50LCAxMCkpCglzdG9yZS5TZXQoYnl0ZUtleSwgYnopCn0KCmZ1bmMgKGsgS2VlcGVyKSBDcmVhdGVQb3N0KGN0eCBzZGsuQ29udGV4dCwgbXNnIHR5cGVzLk1zZ0NyZWF0ZVBvc3QpIHsKCS8vIENyZWF0ZSB0aGUgcG9zdAoJY291bnQgOj0gay5HZXRQb3N0Q291bnQoY3R4KQoJdmFyIHBvc3QgPSB0eXBlcy5Qb3N0ewoJCUNyZWF0b3I6IG1zZy5DcmVhdG9yLAoJCUlkOiAgICAgIHN0cmNvbnYuRm9ybWF0SW50KGNvdW50LCAxMCksCgkJVGl0bGU6ICAgbXNnLlRpdGxlLAoJCUJvZHk6ICAgIG1zZy5Cb2R5LAoJfQoKCXN0b3JlIDo9IHByZWZpeC5OZXdTdG9yZShjdHguS1ZTdG9yZShrLnN0b3JlS2V5KSwgdHlwZXMuS2V5UHJlZml4KHR5cGVzLlBvc3RLZXkpKQoJa2V5IDo9IHR5cGVzLktleVByZWZpeCh0eXBlcy5Qb3N0S2V5ICsgcG9zdC5JZCkKCXZhbHVlIDo9IGsuY2RjLk11c3RNYXJzaGFsQmluYXJ5QmFyZSgmYW1wO3Bvc3QpCglzdG9yZS5TZXQoa2V5LCB2YWx1ZSkKCgkvLyBVcGRhdGUgcG9zdCBjb3VudAoJay5TZXRQb3N0Q291bnQoY3R4LCBjb3VudCsxKQp9CgpmdW5jIChrIEtlZXBlcikgR2V0UG9zdChjdHggc2RrLkNvbnRleHQsIGtleSBzdHJpbmcpIHR5cGVzLlBvc3QgewoJc3RvcmUgOj0gcHJlZml4Lk5ld1N0b3JlKGN0eC5LVlN0b3JlKGsuc3RvcmVLZXkpLCB0eXBlcy5LZXlQcmVmaXgodHlwZXMuUG9zdEtleSkpCgl2YXIgcG9zdCB0eXBlcy5Qb3N0CglrLmNkYy5NdXN0VW5tYXJzaGFsQmluYXJ5QmFyZShzdG9yZS5HZXQodHlwZXMuS2V5UHJlZml4KHR5cGVzLlBvc3RLZXkgKyBrZXkpKSwgJmFtcDtwb3N0KQoJcmV0dXJuIHBvc3QKfQoKZnVuYyAoayBLZWVwZXIpIEhhc1Bvc3QoY3R4IHNkay5Db250ZXh0LCBpZCBzdHJpbmcpIGJvb2wgewoJc3RvcmUgOj0gIHByZWZpeC5OZXdTdG9yZShjdHguS1ZTdG9yZShrLnN0b3JlS2V5KSwgdHlwZXMuS2V5UHJlZml4KHR5cGVzLlBvc3RLZXkpKQoJcmV0dXJuIHN0b3JlLkhhcyh0eXBlcy5LZXlQcmVmaXgodHlwZXMuUG9zdEtleSArIGlkKSkKfQoKZnVuYyAoayBLZWVwZXIpIEdldFBvc3RPd25lcihjdHggc2RrLkNvbnRleHQsIGtleSBzdHJpbmcpIHN0cmluZyB7CiAgICByZXR1cm4gay5HZXRQb3N0KGN0eCwga2V5KS5DcmVhdG9yCn0KCmZ1bmMgKGsgS2VlcGVyKSBHZXRBbGxQb3N0KGN0eCBzZGsuQ29udGV4dCkgKG1zZ3MgW110eXBlcy5Qb3N0KSB7CiAgICBzdG9yZSA6PSBwcmVmaXguTmV3U3RvcmUoY3R4LktWU3RvcmUoay5zdG9yZUtleSksIHR5cGVzLktleVByZWZpeCh0eXBlcy5Qb3N0S2V5KSkKCWl0ZXJhdG9yIDo9IHNkay5LVlN0b3JlUHJlZml4SXRlcmF0b3Ioc3RvcmUsIHR5cGVzLktleVByZWZpeCh0eXBlcy5Qb3N0S2V5KSkKCglkZWZlciBpdGVyYXRvci5DbG9zZSgpCgoJZm9yIDsgaXRlcmF0b3IuVmFsaWQoKTsgaXRlcmF0b3IuTmV4dCgpIHsKCQl2YXIgbXNnIHR5cGVzLlBvc3QKCQlrLmNkYy5NdXN0VW5tYXJzaGFsQmluYXJ5QmFyZShpdGVyYXRvci5WYWx1ZSgpLCAmYW1wO21zZykKICAgICAgICBtc2dzID0gYXBwZW5kKG1zZ3MsIG1zZykKCX0KCiAgICByZXR1cm4KfQoKCg=="}}),e._v(" "),o("p",[o("code",[e._v("CreatePost")]),e._v(" creates a key by concatenating a post prefix with an ID. If you look back at how our store looks, you‚Äôll notice keys have prefixes, which is why "),o("code",[e._v("post-0bae9f7d-20f8-4b51-9d5c-af9103177d66")]),e._v(" contained the prefix "),o("code",[e._v("post-")]),e._v(" . The reason for this is you have one store, but you might want to keep different types of objects in it, like posts and users. Prefixing keys with "),o("code",[e._v("post-")]),e._v(" and "),o("code",[e._v("user-")]),e._v(" allows you to share one storage space between different types of objects.")]),e._v(" "),o("h2",{attrs:{id:"x-blog-types-keys-go"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#x-blog-types-keys-go"}},[e._v("#")]),e._v(" x/blog/types/keys.go")]),e._v(" "),o("p",[e._v("To define the post prefix add the following code:")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"cGFja2FnZSB0eXBlcwoKY29uc3QgKAogIC8vIE90aGVyIGNvbnN0YW50cy4uLgogIC8vIFBvc3RQcmVmaXggaXMgdXNlZCBmb3Iga2V5cyBpbiB0aGUgS1Ygc3RvcmUKICAJUG9zdEtleT0gJnF1b3Q7UG9zdC12YWx1ZS0mcXVvdDsKCSAgUG9zdENvdW50S2V5PSAmcXVvdDtQb3N0LWNvdW50LSZxdW90OwopCg=="}}),e._v(" "),o("h2",{attrs:{id:"x-blog-types-codec-go"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#x-blog-types-codec-go"}},[e._v("#")]),e._v(" x/blog/types/codec.go")]),e._v(" "),o("p",[e._v("Finally, "),o("code",[e._v("store.Set(key, value)")]),e._v(" writes our post to the store.\nTwo last things to do is tell our "),o("a",{attrs:{href:"https://docs.cosmos.network/master/core/encoding.html#amino",target:"_blank",rel:"noopener noreferrer"}},[e._v("encoder"),o("OutboundLink")],1),e._v(" how our "),o("code",[e._v("MsgCreatePost")]),e._v(" is converted to bytes.")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"cGFja2FnZSB0eXBlcwoKaW1wb3J0ICgKCSZxdW90O2dpdGh1Yi5jb20vY29zbW9zL2Nvc21vcy1zZGsvY29kZWMmcXVvdDsKICAgIGNkY3R5cGVzICZxdW90O2dpdGh1Yi5jb20vY29zbW9zL2Nvc21vcy1zZGsvY29kZWMvdHlwZXMmcXVvdDsKICAgIHNkayAmcXVvdDtnaXRodWIuY29tL2Nvc21vcy9jb3Ntb3Mtc2RrL3R5cGVzJnF1b3Q7CikKCmZ1bmMgUmVnaXN0ZXJDb2RlYyhjZGMgKmNvZGVjLkxlZ2FjeUFtaW5vKSB7CiAgICAvLyB0aGlzIGxpbmUgaXMgdXNlZCBieSBzdGFycG9ydCBzY2FmZm9sZGluZyAjIDIKICBjZGMuUmVnaXN0ZXJDb25jcmV0ZSgmYW1wO01zZ0NyZWF0ZVBvc3R7fSwgJnF1b3Q7YmxvZy9DcmVhdGVQb3N0JnF1b3Q7LCBuaWwpCgp9IAoKZnVuYyBSZWdpc3RlckludGVyZmFjZXMocmVnaXN0cnkgY2RjdHlwZXMuSW50ZXJmYWNlUmVnaXN0cnkpIHsKICAgIC8vIHRoaXMgbGluZSBpcyB1c2VkIGJ5IHN0YXJwb3J0IHNjYWZmb2xkaW5nICMgMwogIHJlZ2lzdHJ5LlJlZ2lzdGVySW1wbGVtZW50YXRpb25zKCgqc2RrLk1zZykobmlsKSwKICAgICZhbXA7TXNnQ3JlYXRlUG9zdHt9LAogICkKfQoKdmFyICgKCWFtaW5vID0gY29kZWMuTmV3TGVnYWN5QW1pbm8oKQoJTW9kdWxlQ2RjID0gY29kZWMuTmV3QW1pbm9Db2RlYyhhbWlubykKKQoK"}}),e._v(" "),o("h2",{attrs:{id:"launch"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#launch"}},[e._v("#")]),e._v(" Launch")]),e._v(" "),o("p",[e._v("Now we are ready to build and start our app and create some posts.")]),e._v(" "),o("p",[e._v("To launch your application run:")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"c3RhcnBvcnQgc2VydmUK"}}),e._v(" "),o("p",[e._v("This command installs dependencies, builds and initializes the app, and runs servers. You can also do it manually:")]),e._v(" "),o("p",[e._v("First, create a "),o("code",[e._v("Makefile")]),e._v(" in your "),o("code",[e._v("/blog")]),e._v(" root directory")]),e._v(" "),o("h3",{attrs:{id:"makefile"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#makefile"}},[e._v("#")]),e._v(" Makefile")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"UEFDS0FHRVM9JChzaGVsbCBnbyBsaXN0IC4vLi4uIHwgZ3JlcCAtdiAnL3NpbXVsYXRpb24nKQoKVkVSU0lPTiA6PSAkKHNoZWxsIGVjaG8gJChzaGVsbCBnaXQgZGVzY3JpYmUgLS10YWdzKSB8IHNlZCAncy9edi8vJykKQ09NTUlUIDo9ICQoc2hlbGwgZ2l0IGxvZyAtMSAtLWZvcm1hdD0nJUgnKQoKbGRmbGFncyA9IC1YIGdpdGh1Yi5jb20vY29zbW9zL2Nvc21vcy1zZGsvdmVyc2lvbi5OYW1lPWJsb2cgXAoJLVggZ2l0aHViLmNvbS9jb3Ntb3MvY29zbW9zLXNkay92ZXJzaW9uLlNlcnZlck5hbWU9YmxvZ2QgXAoJLVggZ2l0aHViLmNvbS9jb3Ntb3MvY29zbW9zLXNkay92ZXJzaW9uLlZlcnNpb249JChWRVJTSU9OKSBcCgktWCBnaXRodWIuY29tL2Nvc21vcy9jb3Ntb3Mtc2RrL3ZlcnNpb24uQ29tbWl0PSQoQ09NTUlUKSAKCkJVSUxEX0ZMQUdTIDo9IC1sZGZsYWdzICckKGxkZmxhZ3MpJwoKYWxsOiBpbnN0YWxsCgppbnN0YWxsOiBnby5zdW0KCQlAZWNobyAmcXVvdDstLSZndDsgSW5zdGFsbGluZyBibG9nZCZxdW90OwoJCUBnbyBpbnN0YWxsIC1tb2Q9cmVhZG9ubHkgJChCVUlMRF9GTEFHUykgLi9jbWQvYmxvZ2QKCmdvLnN1bTogZ28ubW9kCgkJQGVjaG8gJnF1b3Q7LS0mZ3Q7IEVuc3VyZSBkZXBlbmRlbmNpZXMgaGF2ZSBub3QgYmVlbiBtb2RpZmllZCZxdW90OwoJCUdPMTExTU9EVUxFPW9uIGdvIG1vZCB2ZXJpZnkKCnRlc3Q6CglAZ28gdGVzdCAtbW9kPXJlYWRvbmx5ICQoUEFDS0FHRVMpCgo="}}),e._v(" "),o("ol",[o("li",[o("code",[e._v("go mod tidy")]),e._v(" cleans up dependencies.")]),e._v(" "),o("li",[o("code",[e._v("make")]),e._v(" builds your app and creates a binary in your go path: "),o("code",[e._v("blogd")]),e._v(".")]),e._v(" "),o("li",[e._v("Initialization scripts in the "),o("code",[e._v("Makefile")]),e._v(" removes data directories, configures your app and generates two accounts. By default your app stores data in your home directory in "),o("code",[e._v("~/.blogd")]),e._v(". The script removes them, so every time you have a clean state.")]),e._v(" "),o("li",[o("code",[e._v("blogd start")]),e._v(" launches your app. After a couple of seconds you will see hashes of blocks being generated. Leave this terminal window open and open a new one.")])]),e._v(" "),o("p",[e._v("Note: depending on your OS and firewall settings, you may have to accept a prompt asking if your application's binary ("),o("code",[e._v("blogd")]),e._v(" in this case) can accept external connections.")]),e._v(" "),o("p",[e._v("Run the following command to create a post:")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"YmxvZ2QgdHggYmxvZyBjcmVhdGUtcG9zdCAmcXVvdDtNeSBmaXJzdCBwb3N0JnF1b3Q7ICZxdW90O1RoaXMgaXMgYSBwb3N0XCEmcXVvdDsgLS1mcm9tPXVzZXIxCg=="}}),e._v(" "),o("p",[e._v("‚ÄúThis is a post!‚Äù is a title for our post and "),o("code",[e._v("--from=user1")]),e._v(" tells the program who is creating this post. "),o("code",[e._v("user1")]),e._v(" is a label for your pair of keys used to sign the transaction, created by the initialization script located within the "),o("code",[e._v("/Makefile")]),e._v(" previously. Keys are stored in "),o("code",[e._v("~/.blogd")]),e._v(".")]),e._v(" "),o("p",[e._v("After running the command and confirming it, you will see an object with ‚Äútxhash‚Äù property with a value like "),o("code",[e._v("CA1491B39384A4F29E568F62B156E0F2D0601507EF499CE1B8F3930BAFE7F03C")]),e._v(".")]),e._v(" "),o("p",[e._v("To verify that the transaction has been processed, open a browser and visit the following URL (make sure to replace "),o("code",[e._v("CA14...")]),e._v(" with the value of your txhash but make sure to have the "),o("code",[e._v("0x")]),e._v(" prefix):")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"aHR0cDovL2xvY2FsaG9zdDoyNjY1Ny90eD9oYXNoPTB4Q0ExNDkxQjM5Mzg0QTRGMjlFNTY4RjYyQjE1NkUwRjJEMDYwMTUwN0VGNDk5Q0UxQjhGMzkzMEJBRkU3RjAzQwo="}}),e._v(" "),o("p",[e._v("Also check out a basic block overview at")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"aHR0cDovL2xvY2FsaG9zdDoxMjM0NS8jL2Jsb2Nrcwo="}}),e._v(" "),o("p",[e._v("Congratulations! You have just created and launched your custom blockchain and sent the first transaction üéâ")]),e._v(" "),o("h2",{attrs:{id:"errors"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#errors"}},[e._v("#")]),e._v(" Errors")]),e._v(" "),o("h3",{attrs:{id:"unknown-command-create-post-for-blog"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#unknown-command-create-post-for-blog"}},[e._v("#")]),e._v(' Unknown command "create-post" for "blog"')]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"YmxvZ2QgdHggYmxvZyBjcmVhdGUtcG9zdCAnSGVsbG8hJyAnTXkgZmlyc3QgcG9zdCcgLS1mcm9tPXVzZXIxCkVSUk9SOiB1bmtub3duIGNvbW1hbmQgJnF1b3Q7Y3JlYXRlLXBvc3QmcXVvdDsgZm9yICZxdW90O2Jsb2cmcXVvdDsK"}}),e._v(" "),o("p",[e._v("Make sure you‚Äôve added "),o("code",[e._v("cmd.AddCommand(CmdCreatePost())")]),e._v(", to "),o("code",[e._v("func GetTxCmd")]),e._v(" in "),o("code",[e._v("x/blog/client/cli/tx.go")]),e._v(".")]),e._v(" "),o("h3",{attrs:{id:"unrecognized-blog-message-type"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#unrecognized-blog-message-type"}},[e._v("#")]),e._v(" Unrecognized blog message type")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"YmxvZ2QgdHggYmxvZyBjcmVhdGUtcG9zdCAnSGVsbG8hJyAnTXkgZmlyc3QgcG9zdCcgLS1mcm9tPXVzZXIxCkVSUk9SOiB1bnJlY29nbml6ZWQgYmxvZyBtZXNzYWdlIHR5cGUK"}}),e._v(" "),o("p",[e._v("Make sure you have added\n"),o("code",[e._v("case *types.MsgCreatePost: \treturn handleMsgCreatePost(ctx, k, msg)")]),e._v("\nto "),o("code",[e._v("func NewHandler")]),e._v(" in "),o("code",[e._v("x/blog/handler.go")])]),e._v(" "),o("h3",{attrs:{id:"cannot-encode-unregistered-concrete-type"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#cannot-encode-unregistered-concrete-type"}},[e._v("#")]),e._v(" Cannot encode unregistered concrete type")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"YmxvZ2QgdHggYmxvZyBjcmVhdGUtcG9zdCBIZWxsbyEgLS1mcm9tPXVzZXIxCnBhbmljOiBDYW5ub3QgZW5jb2RlIHVucmVnaXN0ZXJlZCBjb25jcmV0ZSB0eXBlIHR5cGVzLk1zZ0NyZWF0ZVBvc3QuCg=="}}),e._v(" "),o("p",[e._v("Make sure you‚Äôve added "),o("code",[e._v('cdc.RegisterConcrete(MsgCreatePost{}, "blog/CreatePost", nil)')]),e._v(" to "),o("code",[e._v("func RegisterCodec")]),e._v(" in "),o("code",[e._v("x/blog/types/codec.go")]),e._v(".")]),e._v(" "),o("h3",{attrs:{id:"not-found-key-not-found"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#not-found-key-not-found"}},[e._v("#")]),e._v(" not found: key not found")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"RXJyb3I6IHJwYyBlcnJvcjogY29kZSA9IE5vdEZvdW5kIGRlc2MgPSBhY2NvdW50IGNvc21vczF0M3JhZnh2eTNnZ2x1Y2htNXNqemV0ajl3dDUwZXE5aGpheTZmMiBub3QgZm91bmQ6IGtleSBub3QgZm91bmQK"}}),e._v(" "),o("p",[e._v("Make sure that you wait for the first block to be created after bootstrapping a chain again.")])],1)}),[],!1,null,null,null);t.default=c.exports}}]);