(window.webpackJsonp=window.webpackJsonp||[]).push([[139],{755:function(t,e,c){"use strict";c.r(e);var o=c(1),g=Object(o.a)({},(function(){var t=this,e=t.$createElement,c=t._self._c||e;return c("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[c("h1",{attrs:{id:"create-custom-objects"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#create-custom-objects"}},[t._v("#")]),t._v(" Create Custom Objects")]),t._v(" "),c("HighlightBox",{attrs:{type:"prerequisite"}},[c("p",[t._v("Make sure you have everything you need before proceeding:")]),t._v(" "),c("ul",[c("li",[t._v("You understand the concepts of "),c("RouterLink",{attrs:{to:"/academy/2-cosmos-concepts/6-protobuf.html"}},[t._v("Protobuf")]),t._v(".")],1),t._v(" "),c("li",[t._v("You have completed the introductory "),c("RouterLink",{attrs:{to:"/tutorials/7-cosmjs/1-cosmjs-intro.html"}},[t._v("CosmJS tutorial")]),t._v(".")],1),t._v(" "),c("li",[t._v("Go and npm are installed.")]),t._v(" "),c("li",[t._v("You have finished the checkers Go blockchain exercise. If not, you can follow the tutorial "),c("RouterLink",{attrs:{to:"/hands-on-exercise/2-ignite-cli-adv/10-wager-denom.html"}},[t._v("here")]),t._v(", or just clone and checkout the "),c("a",{attrs:{href:"https://github.com/cosmos/b9-checkers-academy-draft/tree/wager-denomination",target:"_blank",rel:"noopener noreferrer"}},[t._v("relevant branch"),c("OutboundLink")],1),t._v(" that contains the final version.")],1)])]),t._v(" "),c("p",[t._v("With your checkers application ready for use, it is a good time to prepare client elements that eventually allow you to create a GUI and/or server-side scripts. Here, you will apply "),c("RouterLink",{attrs:{to:"/tutorials/7-cosmjs/5-create-custom.html"}},[t._v("what you have learned")]),t._v(" about creating your own custom CosmJS interfaces.")],1),t._v(" "),c("p",[t._v("Before you can get into working on your application directly, you need to make sure CosmJS understands your checkers module and knows how to interact with it. This generally means you need to create the Protobuf objects and clients in TypeScript and create extensions that facilitate the use of them.")]),t._v(" "),c("h2",{attrs:{id:"compile-protobuf"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#compile-protobuf"}},[t._v("#")]),t._v(" Compile Protobuf")]),t._v(" "),c("p",[t._v("You will have to create a "),c("code",[t._v("client")]),t._v(" folder that will contain all these new elements. If you want to keep the Go parts of your checkers project separate from the TypeScript parts, you can use another repository for the "),c("em",[t._v("client")]),t._v(". To keep a link between the two repositories, add the "),c("em",[t._v("client")]),t._v(" parts as a submodule to your Go parts:")]),t._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBnaXQgc3VibW9kdWxlIGFkZCBnaXRAZ2l0aHViLmNvbTpjb3Ntb3MvYWNhZGVteS1jaGVja2Vycy11aS5naXQgY2xpZW50Cg=="}}),t._v(" "),c("p",[t._v("Replace the path with your own repository. In effect, this creates a new "),c("code",[t._v("client")]),t._v(" folder. This "),c("code",[t._v("client")]),t._v(" folder makes it possible for you to easily update another repository with content generated out of your Go code.")]),t._v(" "),c("p",[t._v("Create a folder named "),c("code",[t._v("scripts")]),t._v(" in your project root. This is where you will launch the Protobuf compilation:")]),t._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBta2RpciAtcCBzY3JpcHRzL3Byb3RvYwo="}}),t._v(" "),c("p",[t._v("In the "),c("code",[t._v("scripts")]),t._v(" folder, or in your Docker image, install a compiler:")]),t._v(" "),c("CodeGroup",[c("CodeGroupItem",{attrs:{title:"Local",active:""}},[c("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBjZCBzY3JpcHRzL3Byb3RvYwokIGN1cmwgLUwgaHR0cHM6Ly9naXRodWIuY29tL3Byb3RvY29sYnVmZmVycy9wcm90b2J1Zi9yZWxlYXNlcy9kb3dubG9hZC92MjEuNS9wcm90b2MtMjEuNS1saW51eC14ODZfNjQuemlwIC1vIHByb3RvYy56aXAKJCB1bnppcCBwcm90b2MuemlwCiQgcm0gcHJvdG9jLnppcAojIElmIC91c3IvbG9jYWwvYmluIGlzIGluIHlvdXIgJFBBVEgKJCBsbiAtcyAkKHB3ZCkvYmluL3Byb3RvYyAvdXNyL2xvY2FsL2Jpbi9wcm90b2MKJCBjZCAuLi8uLgo="}}),t._v(" "),c("p",[t._v("Make sure that:")]),t._v(" "),c("ul",[c("li",[c("code",[t._v("/usr/local/bin")]),t._v(" is the right folder to link to in the command above.")]),t._v(" "),c("li",[t._v("You are downloading the right executable for your computer; see your options "),c("a",{attrs:{href:"https://github.com/protocolbuffers/protobuf/releases/tag/v21.5",target:"_blank",rel:"noopener noreferrer"}},[t._v("here"),c("OutboundLink")],1),t._v(".")])])],1),t._v(" "),c("CodeGroupItem",{attrs:{title:"Docker"}},[c("tm-code-block",{staticClass:"codeblock",attrs:{language:"diff",base64:"LSAgRlJPTSAtLXBsYXRmb3JtPWxpbnV4IHVidW50dToyMi4wNAorICBGUk9NIC0tcGxhdGZvcm09bGludXggdWJ1bnR1OjIyLjA0IGFzIGJhc2UKICAgIEFSRyBCVUlMREFSQ0gKICAgIC4uLgogICAgRU5WIE1PQ0tHRU5fVkVSU0lPTj0xLjYuMAorICBFTlYgUFJPVE9DX1ZFUlNJT049MjEuNworCisgIEZST00gYmFzZSBBUyBwbGF0Zm9ybS1hbWQ2NAorICBFTlYgUFJPVE9DX1BMQVRGT1JNPXg4Nl82NAorCisgIEZST00gYmFzZSBBUyBwbGF0Zm9ybS1hcm02NAorICBFTlYgUFJPVE9DX1BMQVRGT1JNPWFhcmNoXzY0CisKKyAgRlJPTSBwbGF0Zm9ybS0ke0JVSUxEQVJDSH0KCiAgICBFTlYgTE9DQUw9L3Vzci9sb2NhbAogICAgLi4uCi0gIEVOViBQQUNLQUdFUyBjdXJsIGdjYyBqcSBtYWtlCisgIEVOViBQQUNLQUdFUyBjdXJsIGdjYyBqcSBtYWtlIHVuemlwCiAgICAuLi4KICAgIFJVTiBnbyBpbnN0YWxsIGdpdGh1Yi5jb20vZ29sYW5nL21vY2svbW9ja2dlbkB2JHtNT0NLR0VOX1ZFUlNJT059CgorICAjIEluc3RhbGwgUHJvdG9DCisgIFJVTiBta2RpciAtcCAvdXNyL2xpYi9wcm90b2MKKyAgV09SS0RJUiAvdXNyL2xpYi9wcm90b2MKKyAgUlVOIGN1cmwgLUwgaHR0cHM6Ly9naXRodWIuY29tL3Byb3RvY29sYnVmZmVycy9wcm90b2J1Zi9yZWxlYXNlcy9kb3dubG9hZC92JHtQUk9UT0NfVkVSU0lPTn0vcHJvdG9jLSR7UFJPVE9DX1ZFUlNJT059LWxpbnV4LSR7UFJPVE9DX1BMQVRGT1JNfS56aXAgLW8gcHJvdG9jLnppcAorICBSVU4gdW56aXAgLW8gcHJvdG9jLnppcAorICBSVU4gcm0gcHJvdG9jLnppcAorICBSVU4gbG4gLXMgL3Vzci9saWIvcHJvdG9jL2Jpbi9wcm90b2MgJHtMT0NBTH0vYmluL3Byb3RvYwogICAgLi4uCg==",url:"https://github.com/cosmos/b9-checkers-academy-draft/blob/cosmjs-elements/Dockerfile-ubuntu#L1-L50"}}),t._v(" "),c("p",[t._v("Rebuild your Docker image.")])],1)],1),t._v(" "),c("hr"),t._v(" "),c("p",[t._v("Now install your additional modules:")]),t._v(" "),c("CodeGroup",[c("CodeGroupItem",{attrs:{title:"Local"}},[c("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBjZCBzY3JpcHRzCiQgbnBtIGluc3RhbGwgdHMtcHJvdG9AMS4xMjEuNiAtLXNhdmUtZGV2IC0tc2F2ZS1leGFjdAokIGNkIC4uCg=="}})],1),t._v(" "),c("CodeGroupItem",{attrs:{title:"Docker"}},[c("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBkb2NrZXIgcnVuIC0tcm0gLWl0IFwKICAgIC12ICQocHdkKTovY2hlY2tlcnMgXAogICAgLXcgL2NoZWNrZXJzL3NjcmlwdHMgXAogICAgY2hlY2tlcnNfaSBcCiAgICBucG0gaW5zdGFsbCB0cy1wcm90b0AxLjEyMS42IC0tc2F2ZS1kZXYgLS1zYXZlLWV4YWN0Cg=="}})],1)],1),t._v(" "),c("p",[t._v("Create the folder structure to receive the compiled files:")]),t._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBta2RpciAtcCBjbGllbnQvc3JjL3R5cGVzL2dlbmVyYXRlZAo="}}),t._v(" "),c("p",[t._v("Check what Cosmos SDK version you are using:")]),t._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBncmVwIGNvc21vcy1zZGsgZ28ubW9kCg=="}}),t._v(" "),c("p",[t._v("This may return:")]),t._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"txt",base64:"Z2l0aHViLmNvbS9jb3Ntb3MvY29zbW9zLXNkayB2MC40NS40Cg=="}}),t._v(" "),c("p",[t._v("Download the required files from your "),c("code",[t._v(".proto")]),t._v(" files:")]),t._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBta2RpciAtcCBwcm90by9jb3Ntb3MvYmFzZS9xdWVyeS92MWJldGExCiQgY3VybCBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vY29zbW9zL2Nvc21vcy1zZGsvdjAuNDUuNC9wcm90by9jb3Ntb3MvYmFzZS9xdWVyeS92MWJldGExL3BhZ2luYXRpb24ucHJvdG8gLW8gcHJvdG8vY29zbW9zL2Jhc2UvcXVlcnkvdjFiZXRhMS9wYWdpbmF0aW9uLnByb3RvCiQgbWtkaXIgLXAgcHJvdG8vZ29vZ2xlL2FwaQokIGN1cmwgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2Nvc21vcy9jb3Ntb3Mtc2RrL3YwLjQ1LjQvdGhpcmRfcGFydHkvcHJvdG8vZ29vZ2xlL2FwaS9hbm5vdGF0aW9ucy5wcm90byAtbyBwcm90by9nb29nbGUvYXBpL2Fubm90YXRpb25zLnByb3RvCiQgY3VybCBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vY29zbW9zL2Nvc21vcy1zZGsvdjAuNDUuNC90aGlyZF9wYXJ0eS9wcm90by9nb29nbGUvYXBpL2h0dHAucHJvdG8gLW8gcHJvdG8vZ29vZ2xlL2FwaS9odHRwLnByb3RvCiQgbWtkaXIgLXAgcHJvdG8vZ29nb3Byb3RvCiQgY3VybCBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vY29zbW9zL2Nvc21vcy1zZGsvdjAuNDUuNC90aGlyZF9wYXJ0eS9wcm90by9nb2dvcHJvdG8vZ29nby5wcm90byAtbyBwcm90by9nb2dvcHJvdG8vZ29nby5wcm90bwo="}}),t._v(" "),c("p",[t._v("Now compile:")]),t._v(" "),c("CodeGroup",[c("CodeGroupItem",{attrs:{title:"Local",active:""}},[c("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBjZCBzY3JpcHRzCiQgbHMgLi4vcHJvdG8vY2hlY2tlcnMgfCB4YXJncyAtSSB7fSBwcm90b2MgXAogICAgLS1wbHVnaW49JnF1b3Q7Li9ub2RlX21vZHVsZXMvLmJpbi9wcm90b2MtZ2VuLXRzX3Byb3RvJnF1b3Q7IFwKICAgIC0tdHNfcHJvdG9fb3V0PSZxdW90Oy4uL2NsaWVudC9zcmMvdHlwZXMvZ2VuZXJhdGVkJnF1b3Q7IFwKICAgIC0tcHJvdG9fcGF0aD0mcXVvdDsuLi9wcm90byZxdW90OyBcCiAgICAtLXRzX3Byb3RvX29wdD0mcXVvdDtlc01vZHVsZUludGVyb3A9dHJ1ZSxmb3JjZUxvbmc9bG9uZyx1c2VPcHRpb25hbHM9bWVzc2FnZXMmcXVvdDsgXAogICAgY2hlY2tlcnMve30K"}})],1),t._v(" "),c("CodeGroupItem",{attrs:{title:"Docker"}},[c("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBscyBwcm90by9jaGVja2VycyB8IHhhcmdzIC1JIHt9IGRvY2tlciBydW4gLS1ybSBcCiAgICAtdiAkKHB3ZCk6L2NoZWNrZXJzIFwKICAgIC13IC9jaGVja2Vycy9zY3JpcHRzIFwKICAgIGNoZWNrZXJzX2kgXAogICAgcHJvdG9jIFwKICAgIC0tcGx1Z2luPSZxdW90Oy4vbm9kZV9tb2R1bGVzLy5iaW4vcHJvdG9jLWdlbi10c19wcm90byZxdW90OyBcCiAgICAtLXRzX3Byb3RvX291dD0mcXVvdDsuLi9jbGllbnQvc3JjL3R5cGVzL2dlbmVyYXRlZCZxdW90OyBcCiAgICAtLXByb3RvX3BhdGg9JnF1b3Q7Li4vcHJvdG8mcXVvdDsgXAogICAgLS10c19wcm90b19vcHQ9JnF1b3Q7ZXNNb2R1bGVJbnRlcm9wPXRydWUsZm9yY2VMb25nPWxvbmcsdXNlT3B0aW9uYWxzPW1lc3NhZ2VzJnF1b3Q7IFwKICAgIGNoZWNrZXJzL3t9Cg=="}})],1)],1),t._v(" "),c("p",[t._v("You should now have your TypeScript files.")]),t._v(" "),c("p",[t._v("In order to easily repeat these steps in the future, you can add them to your existing "),c("code",[t._v("Makefile")]),t._v(" with slight modifications:")]),t._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"lang-makefile",base64:"aW5zdGFsbC1wcm90b2MtZ2VuLXRzOgogICAgbWtkaXIgLXAgc2NyaXB0cy9wcm90b2MKICAgIGNkIHNjcmlwdHMgJmFtcDsmYW1wOyBucG0gaW5zdGFsbAogICAgY3VybCAtTCBodHRwczovL2dpdGh1Yi5jb20vcHJvdG9jb2xidWZmZXJzL3Byb3RvYnVmL3JlbGVhc2VzL2Rvd25sb2FkL3YyMS41L3Byb3RvYy0yMS41LWxpbnV4LXg4Nl82NC56aXAgLW8gc2NyaXB0cy9wcm90b2MvcHJvdG9jLnppcAogICAgY2Qgc2NyaXB0cy9wcm90b2MgJmFtcDsmYW1wOyB1bnppcCAtbyBwcm90b2MuemlwCiAgICBybSBzY3JpcHRzL3Byb3RvYy9wcm90b2MuemlwCiAgICBsbiAtcyAkKHB3ZCkvc2NyaXB0cy9wcm90b2MvYmluL3Byb3RvYyAvdXNyL2xvY2FsL2Jpbi9wcm90b2MKCmNvc21vcy12ZXJzaW9uID0gdjAuNDUuNAoKZG93bmxvYWQtY29zbW9zLXByb3RvOgogICAgbWtkaXIgLXAgcHJvdG8vY29zbW9zL2Jhc2UvcXVlcnkvdjFiZXRhMQogICAgY3VybCBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vY29zbW9zL2Nvc21vcy1zZGsvJHtjb3Ntb3MtdmVyc2lvbn0vcHJvdG8vY29zbW9zL2Jhc2UvcXVlcnkvdjFiZXRhMS9wYWdpbmF0aW9uLnByb3RvIC1vIHByb3RvL2Nvc21vcy9iYXNlL3F1ZXJ5L3YxYmV0YTEvcGFnaW5hdGlvbi5wcm90bwogICAgbWtkaXIgLXAgcHJvdG8vZ29vZ2xlL2FwaQogICAgY3VybCBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vY29zbW9zL2Nvc21vcy1zZGsvJHtjb3Ntb3MtdmVyc2lvbn0vdGhpcmRfcGFydHkvcHJvdG8vZ29vZ2xlL2FwaS9hbm5vdGF0aW9ucy5wcm90byAtbyBwcm90by9nb29nbGUvYXBpL2Fubm90YXRpb25zLnByb3RvCiAgICBjdXJsIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9jb3Ntb3MvY29zbW9zLXNkay8ke2Nvc21vcy12ZXJzaW9ufS90aGlyZF9wYXJ0eS9wcm90by9nb29nbGUvYXBpL2h0dHAucHJvdG8gLW8gcHJvdG8vZ29vZ2xlL2FwaS9odHRwLnByb3RvCiAgICBta2RpciAtcCBwcm90by9nb2dvcHJvdG8KICAgIGN1cmwgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2Nvc21vcy9jb3Ntb3Mtc2RrLyR7Y29zbW9zLXZlcnNpb259L3RoaXJkX3BhcnR5L3Byb3RvL2dvZ29wcm90by9nb2dvLnByb3RvIC1vIHByb3RvL2dvZ29wcm90by9nb2dvLnByb3RvCgpnZW4tcHJvdG9jLXRzOiBkb3dubG9hZC1jb3Ntb3MtcHJvdG8gaW5zdGFsbC1wcm90b2MtZ2VuLXRzCiAgICBta2RpciAtcCAuL2NsaWVudC9zcmMvdHlwZXMvZ2VuZXJhdGVkLwogICAgbHMgcHJvdG8vY2hlY2tlcnMgfCB4YXJncyAtSSB7fSBwcm90b2MgXAogICAgICAgIC0tcGx1Z2luPSZxdW90Oy4vc2NyaXB0cy9ub2RlX21vZHVsZXMvLmJpbi9wcm90b2MtZ2VuLXRzX3Byb3RvJnF1b3Q7IFwKICAgICAgICAtLXRzX3Byb3RvX291dD0mcXVvdDsuL2NsaWVudC9zcmMvdHlwZXMvZ2VuZXJhdGVkJnF1b3Q7IFwKICAgICAgICAtLXByb3RvX3BhdGg9JnF1b3Q7Li9wcm90byZxdW90OyBcCiAgICAgICAgLS10c19wcm90b19vcHQ9JnF1b3Q7ZXNNb2R1bGVJbnRlcm9wPXRydWUsZm9yY2VMb25nPWxvbmcsdXNlT3B0aW9uYWxzPW1lc3NhZ2VzJnF1b3Q7IFwKICAgICAgICBjaGVja2Vycy97fQo=",url:"https://github.com/cosmos/b9-checkers-academy-draft/blob/cosmjs-elements/Makefile#L6-L31"}}),t._v(" "),c("p",[t._v("Whenever you want to re-compile them, run:")]),t._v(" "),c("CodeGroup",[c("CodeGroupItem",{attrs:{title:"Local",active:""}},[c("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBtYWtlIGdlbi1wcm90b2MtdHMK"}})],1),t._v(" "),c("CodeGroupItem",{attrs:{title:"Docker"}},[c("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBkb2NrZXIgcnVuIC0tcm0gXAogICAgLXYgJChwd2QpOi9jaGVja2VycyBcCiAgICAtdyAvY2hlY2tlcnMgXAogICAgY2hlY2tlcnNfaSBcCiAgICBtYWtlIGdlbi1wcm90b2MtdHMK"}})],1)],1),t._v(" "),c("p",[t._v("You have created the "),c("a",{attrs:{href:"https://github.com/cosmos/academy-checkers-ui/tree/generated/src/types/generated/checkers",target:"_blank",rel:"noopener noreferrer"}},[t._v("basic Protobuf objects"),c("OutboundLink")],1),t._v(" that will assist you with communicating with the blockchain.")]),t._v(" "),c("h2",{attrs:{id:"prepare-integration"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#prepare-integration"}},[t._v("#")]),t._v(" Prepare integration")]),t._v(" "),c("p",[t._v("At this point, you have the "),c("code",[t._v("generated")]),t._v(" files in your "),c("code",[t._v("client")]),t._v(" folder. If you have made this "),c("code",[t._v("client")]),t._v(" folder as a Git submodule, then you can work directly in it and do not need to go back to the checkers Cosmos SDK:")]),t._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBjZCBjbGllbnQK"}}),t._v(" "),c("p",[t._v("Also, if you use Docker and did not go through the trouble of building the Docker image for the checkers Cosmos SDK, you can use the "),c("code",[t._v("node:18.7-slim")]),t._v(" image.")]),t._v(" "),c("p",[t._v("Install the Protobuf.js package in your client project:")]),t._v(" "),c("CodeGroup",[c("CodeGroupItem",{attrs:{title:"Local",active:""}},[c("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBucG0gaW5zdGFsbCBwcm90b2J1ZmpzQDcuMC4wIC0tc2F2ZS1leGFjdAo="}})],1),t._v(" "),c("CodeGroupItem",{attrs:{title:"Docker"}},[c("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBkb2NrZXIgcnVuIC0tcm0gXAogICAgLXYgJChwd2QpOi9jbGllbnQgXAogICAgLXcgL2NsaWVudCBcCiAgICBub2RlOjE4Ljctc2xpbSBcCiAgICBucG0gaW5zdGFsbCBwcm90b2J1ZmpzQDcuMC4wIC0tc2F2ZS1leGFjdAo="}})],1)],1),t._v(" "),c("p",[t._v("At a later stage, you will add checkers as an extension to Stargate, but you can define your checkers extension immediately. The "),c("code",[t._v("canPlay")]),t._v(" query could make use of better types for player and position. Start by declaring them in "),c("code",[t._v("client/src/checkers/player.ts")]),t._v(":")]),t._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"typescript",base64:"ZXhwb3J0IHR5cGUgUGxheWVyID0gJnF1b3Q7YiZxdW90OyB8ICZxdW90O3ImcXVvdDsKZXhwb3J0IHR5cGUgR2FtZVBpZWNlID0gUGxheWVyIHwgJnF1b3Q7KiZxdW90OwpleHBvcnQgaW50ZXJmYWNlIFBvcyB7CiAgICB4OiBudW1iZXIKICAgIHk6IG51bWJlcgp9Cg==",url:"https://github.com/cosmos/academy-checkers-ui/blob/stargate/src/types/checkers/player.ts#L1-L6"}}),t._v(" "),c("p",[t._v("Your checkers extension will need to use the CosmJS Stargate package. Install it:")]),t._v(" "),c("CodeGroup",[c("CodeGroupItem",{attrs:{title:"Local",active:""}},[c("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBucG0gaW5zdGFsbCBAY29zbWpzL3N0YXJnYXRlQDAuMjguMTEgLS1zYXZlLWV4YWN0Cg=="}})],1),t._v(" "),c("CodeGroupItem",{attrs:{title:"Docker"}},[c("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBkb2NrZXIgcnVuIC0tcm0gXAogICAgLXYgJChwd2QpOi9jbGllbnQgXAogICAgLXcgL2NsaWVudCBcCiAgICBub2RlOjE4Ljctc2xpbSBcCiAgICBucG0gaW5zdGFsbCBAY29zbWpzL3N0YXJnYXRlQDAuMjguMTEgLS1zYXZlLWV4YWN0Cg=="}})],1)],1),t._v(" "),c("p",[t._v("Now you can declare the checkers extension in "),c("code",[t._v("src/modules/checkers/queries.ts")]),t._v(":")]),t._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"typescript",base64:"ZXhwb3J0IGludGVyZmFjZSBBbGxTdG9yZWRHYW1lUmVzcG9uc2UgewogICAgc3RvcmVkR2FtZXM6IFN0b3JlZEdhbWVbXQogICAgcGFnaW5hdGlvbj86IFBhZ2VSZXNwb25zZQp9CgpleHBvcnQgaW50ZXJmYWNlIENoZWNrZXJzRXh0ZW5zaW9uIHsKICAgIHJlYWRvbmx5IGNoZWNrZXJzOiB7CiAgICAgICAgcmVhZG9ubHkgZ2V0U3lzdGVtSW5mbzogKCkgPSZndDsgUHJvbWlzZSZsdDtTeXN0ZW1JbmZvJmd0OwogICAgICAgIHJlYWRvbmx5IGdldFN0b3JlZEdhbWU6IChpbmRleDogc3RyaW5nKSA9Jmd0OyBQcm9taXNlJmx0O1N0b3JlZEdhbWUgfCB1bmRlZmluZWQmZ3Q7CiAgICAgICAgcmVhZG9ubHkgZ2V0QWxsU3RvcmVkR2FtZXM6ICgKICAgICAgICAgICAga2V5OiBVaW50OEFycmF5LAogICAgICAgICAgICBvZmZzZXQ6IExvbmcsCiAgICAgICAgICAgIGxpbWl0OiBMb25nLAogICAgICAgICAgICBjb3VudFRvdGFsOiBib29sZWFuLAogICAgICAgICkgPSZndDsgUHJvbWlzZSZsdDtBbGxTdG9yZWRHYW1lUmVzcG9uc2UmZ3Q7CiAgICAgICAgcmVhZG9ubHkgY2FuUGxheU1vdmU6ICgKICAgICAgICAgICAgaW5kZXg6IHN0cmluZywKICAgICAgICAgICAgcGxheWVyOiBQbGF5ZXIsCiAgICAgICAgICAgIGZyb206IFBvcywKICAgICAgICAgICAgdG86IFBvcywKICAgICAgICApID0mZ3Q7IFByb21pc2UmbHQ7UXVlcnlDYW5QbGF5TW92ZVJlc3BvbnNlJmd0OwogICAgfQp9Cg==",url:"https://github.com/cosmos/academy-checkers-ui/blob/stargate/src/modules/checkers/queries.ts#L15-L37"}}),t._v(" "),c("p",[t._v("Do not forget a "),c("em",[t._v("setup")]),t._v(" function, as this is expected by Stargate:")]),t._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"typescript",base64:"ZXhwb3J0IGZ1bmN0aW9uIHNldHVwQ2hlY2tlcnNFeHRlbnNpb24oYmFzZTogUXVlcnlDbGllbnQpOiBDaGVja2Vyc0V4dGVuc2lvbiB7CiAgICBjb25zdCBycGMgPSBjcmVhdGVQcm90b2J1ZlJwY0NsaWVudChiYXNlKQogICAgLy8gVXNlIHRoaXMgc2VydmljZSB0byBnZXQgZWFzeSB0eXBlZCBhY2Nlc3MgdG8gcXVlcnkgbWV0aG9kcwogICAgLy8gVGhpcyBjYW5ub3QgYmUgdXNlZCBmb3IgcHJvb2YgdmVyaWZpY2F0aW9uCiAgICBjb25zdCBxdWVyeVNlcnZpY2UgPSBuZXcgUXVlcnlDbGllbnRJbXBsKHJwYykKCiAgICByZXR1cm4gewogICAgICAgIGNoZWNrZXJzOiB7CiAgICAgICAgICAgIGdldFN5c3RlbUluZm86IGFzeW5jICgpOiBQcm9taXNlJmx0O1N5c3RlbUluZm8mZ3Q7ID0mZ3Q7IHsKICAgICAgICAgICAgICAgIGNvbnN0IHsgU3lzdGVtSW5mbyB9ID0gYXdhaXQgcXVlcnlTZXJ2aWNlLlN5c3RlbUluZm8oe30pCiAgICAgICAgICAgICAgICBhc3NlcnQoU3lzdGVtSW5mbykKICAgICAgICAgICAgICAgIHJldHVybiBTeXN0ZW1JbmZvCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGdldFN0b3JlZEdhbWU6IGFzeW5jIChpbmRleDogc3RyaW5nKTogUHJvbWlzZSZsdDtTdG9yZWRHYW1lIHwgdW5kZWZpbmVkJmd0OyA9Jmd0OyB7CiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZTogUXVlcnlHZXRTdG9yZWRHYW1lUmVzcG9uc2UgPSBhd2FpdCBxdWVyeVNlcnZpY2UuU3RvcmVkR2FtZSh7CiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4LAogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5zdG9yZWRHYW1lCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGdldEFsbFN0b3JlZEdhbWVzOiBhc3luYyAoCiAgICAgICAgICAgICAgICBrZXk6IFVpbnQ4QXJyYXksCiAgICAgICAgICAgICAgICBvZmZzZXQ6IExvbmcsCiAgICAgICAgICAgICAgICBsaW1pdDogTG9uZywKICAgICAgICAgICAgICAgIGNvdW50VG90YWw6IGJvb2xlYW4sCiAgICAgICAgICAgICk6IFByb21pc2UmbHQ7QWxsU3RvcmVkR2FtZVJlc3BvbnNlJmd0OyA9Jmd0OyB7CiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZTogUXVlcnlBbGxTdG9yZWRHYW1lUmVzcG9uc2UgPSBhd2FpdCBxdWVyeVNlcnZpY2UuU3RvcmVkR2FtZUFsbCh7CiAgICAgICAgICAgICAgICAgICAgcGFnaW5hdGlvbjogewogICAgICAgICAgICAgICAgICAgICAgICBrZXk6IGtleSwKICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0OiBvZmZzZXQsCiAgICAgICAgICAgICAgICAgICAgICAgIGxpbWl0OiBsaW1pdCwKICAgICAgICAgICAgICAgICAgICAgICAgY291bnRUb3RhbDogY291bnRUb3RhbCwKICAgICAgICAgICAgICAgICAgICAgICAgcmV2ZXJzZTogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIHN0b3JlZEdhbWVzOiByZXNwb25zZS5zdG9yZWRHYW1lLAogICAgICAgICAgICAgICAgICAgIHBhZ2luYXRpb246IHJlc3BvbnNlLnBhZ2luYXRpb24sCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNhblBsYXlNb3ZlOiBhc3luYyAoCiAgICAgICAgICAgICAgICBpbmRleDogc3RyaW5nLAogICAgICAgICAgICAgICAgcGxheWVyOiBQbGF5ZXIsCiAgICAgICAgICAgICAgICBmcm9tOiBQb3MsCiAgICAgICAgICAgICAgICB0bzogUG9zLAogICAgICAgICAgICApOiBQcm9taXNlJmx0O1F1ZXJ5Q2FuUGxheU1vdmVSZXNwb25zZSZndDsgPSZndDsgewogICAgICAgICAgICAgICAgcmV0dXJuIHF1ZXJ5U2VydmljZS5DYW5QbGF5TW92ZSh7CiAgICAgICAgICAgICAgICAgICAgZ2FtZUluZGV4OiBpbmRleCwKICAgICAgICAgICAgICAgICAgICBwbGF5ZXI6IHBsYXllciwKICAgICAgICAgICAgICAgICAgICBmcm9tWDogTG9uZy5mcm9tTnVtYmVyKGZyb20ueCksCiAgICAgICAgICAgICAgICAgICAgZnJvbVk6IExvbmcuZnJvbU51bWJlcihmcm9tLnkpLAogICAgICAgICAgICAgICAgICAgIHRvWDogTG9uZy5mcm9tTnVtYmVyKHRvLngpLAogICAgICAgICAgICAgICAgICAgIHRvWTogTG9uZy5mcm9tTnVtYmVyKHRvLnkpLAogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSwKICAgICAgICB9LAogICAgfQp9Cg==",url:"https://github.com/cosmos/academy-checkers-ui/blob/stargate/src/modules/checkers/queries.ts#L39-L95"}}),t._v(" "),c("p",[t._v("You may have to add these imports by hand:")]),t._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"typescript",base64:"aW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAmcXVvdDtAY29zbWpzL3V0aWxzJnF1b3Q7CmltcG9ydCBMb25nIGZyb20gJnF1b3Q7bG9uZyZxdW90Owo=",url:"https://github.com/cosmos/academy-checkers-ui/blob/stargate/src/modules/checkers/queries.ts#L2-L3"}}),t._v(" "),c("p",[t._v("Now create your "),c("code",[t._v("CheckersStargateClient")]),t._v(" in "),c("code",[t._v("src/checkers_stargateclient.ts")]),t._v(":")]),t._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"typescript",base64:"ZXhwb3J0IGNsYXNzIENoZWNrZXJzU3RhcmdhdGVDbGllbnQgZXh0ZW5kcyBTdGFyZ2F0ZUNsaWVudCB7CiAgICBwdWJsaWMgcmVhZG9ubHkgY2hlY2tlcnNRdWVyeUNsaWVudDogQ2hlY2tlcnNFeHRlbnNpb24gfCB1bmRlZmluZWQKCiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGNvbm5lY3QoCiAgICAgICAgZW5kcG9pbnQ6IHN0cmluZywKICAgICAgICBvcHRpb25zPzogU3RhcmdhdGVDbGllbnRPcHRpb25zLAogICAgKTogUHJvbWlzZSZsdDtDaGVja2Vyc1N0YXJnYXRlQ2xpZW50Jmd0OyB7CiAgICAgICAgY29uc3QgdG1DbGllbnQgPSBhd2FpdCBUZW5kZXJtaW50MzRDbGllbnQuY29ubmVjdChlbmRwb2ludCkKICAgICAgICByZXR1cm4gbmV3IENoZWNrZXJzU3RhcmdhdGVDbGllbnQodG1DbGllbnQsIG9wdGlvbnMpCiAgICB9CgogICAgcHJvdGVjdGVkIGNvbnN0cnVjdG9yKHRtQ2xpZW50OiBUZW5kZXJtaW50MzRDbGllbnQgfCB1bmRlZmluZWQsIG9wdGlvbnM6IFN0YXJnYXRlQ2xpZW50T3B0aW9ucyA9IHt9KSB7CiAgICAgICAgc3VwZXIodG1DbGllbnQsIG9wdGlvbnMpCiAgICAgICAgaWYgKHRtQ2xpZW50KSB7CiAgICAgICAgICAgIHRoaXMuY2hlY2tlcnNRdWVyeUNsaWVudCA9IFF1ZXJ5Q2xpZW50LndpdGhFeHRlbnNpb25zKHRtQ2xpZW50LCBzZXR1cENoZWNrZXJzRXh0ZW5zaW9uKQogICAgICAgIH0KICAgIH0KfQo=",url:"https://github.com/cosmos/academy-checkers-ui/blob/stargate/src/checkers_stargateclient.ts#L5-L22"}}),t._v(" "),c("h2",{attrs:{id:"integration-tests"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#integration-tests"}},[t._v("#")]),t._v(" Integration tests")]),t._v(" "),c("p",[t._v("It is possible to already run some integration tests against a running checkers blockchain.")]),t._v(" "),c("h3",{attrs:{id:"preparation"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#preparation"}},[t._v("#")]),t._v(" Preparation")]),t._v(" "),c("p",[t._v("Install packages to run tests.")]),t._v(" "),c("CodeGroup",[c("CodeGroupItem",{attrs:{title:"Local",active:""}},[c("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBucG0gaW5zdGFsbCBtb2NoYUAxMC4wLjAgQHR5cGVzL21vY2hhQDkuMS4xIFwKICAgIGNoYWlANC4zLjYgQHR5cGVzL2NoYWlANC4zLjMgXAogICAgdHMtbm9kZUAxMC45LjEgQHR5cGVzL25vZGVAMTguNy41IFwKICAgIGRvdGVudkAxNi4wLjEgQHR5cGVzL2RvdGVudkA4LjIuMCBcCiAgICAtLXNhdmUtZGV2IC0tc2F2ZS1leGFjdAo="}})],1),t._v(" "),c("CodeGroupItem",{attrs:{title:"Docker"}},[c("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBkb2NrZXIgcnVuIC0tcm0gXAogICAgLXYgJChwd2QpOi9jbGllbnQgXAogICAgLXcgL2NsaWVudCBcCiAgICBub2RlOjE4Ljctc2xpbSBcCiAgICBucG0gaW5zdGFsbCBtb2NoYUAxMC4wLjAgQHR5cGVzL21vY2hhQDkuMS4xIFwKICAgICAgICBjaGFpQDQuMy42IEB0eXBlcy9jaGFpQDQuMy4zIFwKICAgICAgICB0cy1ub2RlQDEwLjkuMSBAdHlwZXMvbm9kZUAxOC43LjUgXAogICAgICAgIGRvdGVudkAxNi4wLjEgQHR5cGVzL2RvdGVudkA4LjIuMCBcCiAgICAgICAgLS1zYXZlLWRldiAtLXNhdmUtZXhhY3QK"}})],1)],1),t._v(" "),c("p",[t._v("Describe how to connect to the running blockchain in a "),c("code",[t._v(".env")]),t._v(" file in your project root. This depends on where you will run the tests, not on where you run the blockchain:")]),t._v(" "),c("CodeGroup",[c("CodeGroupItem",{attrs:{title:"Local"}},[c("tm-code-block",{staticClass:"codeblock",attrs:{language:"ini",base64:"UlBDX1VSTD0mcXVvdDtodHRwOi8vbG9jYWxob3N0OjI2NjU3JnF1b3Q7Cg==",url:"https://github.com/cosmos/academy-checkers-ui/blob/stargate/.env#L1"}})],1),t._v(" "),c("CodeGroupItem",{attrs:{title:"Docker"}},[c("tm-code-block",{staticClass:"codeblock",attrs:{language:"ini",base64:"UlBDX1VSTD0mcXVvdDtodHRwOi8vY2hlY2tlcnM6MjY2NTcmcXVvdDsK",url:"https://github.com/cosmos/academy-checkers-ui/blob/stargate/.env#L1"}}),t._v(" "),c("p",[t._v("This will run the checkers chain in a container named "),c("code",[t._v("checkers")]),t._v(".")])],1)],1),t._v(" "),c("hr"),t._v(" "),c("p",[t._v("Alternatively, use whichever address connects to the RPC port of the checkers blockchain.")]),t._v(" "),c("p",[t._v("This information will be picked up by the "),c("code",[t._v("dotenv")]),t._v(" package. Now let TypeScript know about this in an "),c("code",[t._v("environment.d.ts")]),t._v(" file:")]),t._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"typescript",base64:"ZGVjbGFyZSBnbG9iYWwgewogICAgbmFtZXNwYWNlIE5vZGVKUyB7CiAgICAgICAgaW50ZXJmYWNlIFByb2Nlc3NFbnYgewogICAgICAgICAgICBSUENfVVJMOiBzdHJpbmcKICAgICAgICB9CiAgICB9Cn0KCmV4cG9ydCB7fQo=",url:"https://github.com/cosmos/academy-checkers-ui/blob/stargate/environment.d.ts"}}),t._v(" "),c("p",[t._v("Also add your "),c("code",[t._v("tconfig.json")]),t._v(" as you see fit:")]),t._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"json",base64:"ewogICAgJnF1b3Q7ZXhjbHVkZSZxdW90OzogWyZxdW90Oy4vdGVzdHMvJnF1b3Q7LCAmcXVvdDsuL25vZGVfbW9kdWxlcy8mcXVvdDssICZxdW90Oy4vZGlzdC8mcXVvdDtdLAogICAgJnF1b3Q7Y29tcGlsZXJPcHRpb25zJnF1b3Q7OiB7CiAgICAgICAgJnF1b3Q7ZXNNb2R1bGVJbnRlcm9wJnF1b3Q7OiB0cnVlLAogICAgICAgICZxdW90O21vZHVsZSZxdW90OzogJnF1b3Q7RVMyMDE1JnF1b3Q7LAogICAgICAgICZxdW90O21vZHVsZVJlc29sdXRpb24mcXVvdDs6ICZxdW90O25vZGUmcXVvdDssCiAgICAgICAgJnF1b3Q7dGFyZ2V0JnF1b3Q7OiAmcXVvdDtFUzYmcXVvdDsKICAgIH0KfQo=",url:"https://github.com/cosmos/academy-checkers-ui/blob/stargate/tsconfig.json"}}),t._v(" "),c("p",[t._v("Add the line that describes how the tests are run:")]),t._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"diff-json",base64:"ICAgIHsKICAgICAgICAuLi4KICAgICAgICAmcXVvdDtzY3JpcHRzJnF1b3Q7OiB7Ci0gICAgICAgICAgJnF1b3Q7dGVzdCZxdW90OzogJnF1b3Q7ZWNobyBcJnF1b3Q7RXJyb3I6IG5vIHRlc3Qgc3BlY2lmaWVkXCZxdW90OyAmYW1wOyZhbXA7IGV4aXQgMSZxdW90OworICAgICAgICAgICZxdW90O3Rlc3QmcXVvdDs6ICZxdW90O2VudiBUU19OT0RFX0NPTVBJTEVSX09QVElPTlM9J3tcJnF1b3Q7bW9kdWxlXCZxdW90OzogXCZxdW90O2NvbW1vbmpzXCZxdW90OyB9JyBtb2NoYSAtLXJlcXVpcmUgdHMtbm9kZS9yZWdpc3RlciAndGVzdC8qKi8qLnRzJyZxdW90OwogICAgICAgIH0sCiAgICAgICAgLi4uCiAgICB9Cg==",url:"https://github.com/cosmos/academy-checkers-ui/blob/stargate/package.json#L7"}}),t._v(" "),c("h3",{attrs:{id:"first-tests"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#first-tests"}},[t._v("#")]),t._v(" First tests")]),t._v(" "),c("p",[t._v("Because the intention is to run these tests against a running chain, possibly a fresh one, they cannot expect too much, such as how many games have been created so far. Still, it is possible to at least test that the connection is made and queries pass through.")]),t._v(" "),c("p",[t._v("Create "),c("code",[t._v("test/integration/system-info.ts")]),t._v(":")]),t._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"typescript",base64:"aW1wb3J0IHsgZXhwZWN0IH0gZnJvbSAmcXVvdDtjaGFpJnF1b3Q7CmltcG9ydCB7IGNvbmZpZyB9IGZyb20gJnF1b3Q7ZG90ZW52JnF1b3Q7CmltcG9ydCBfIGZyb20gJnF1b3Q7Li4vLi4vZW52aXJvbm1lbnQmcXVvdDsKaW1wb3J0IHsgQ2hlY2tlcnNTdGFyZ2F0ZUNsaWVudCB9IGZyb20gJnF1b3Q7Li4vLi4vc3JjL2NoZWNrZXJzX3N0YXJnYXRlY2xpZW50JnF1b3Q7CmltcG9ydCB7IENoZWNrZXJzRXh0ZW5zaW9uIH0gZnJvbSAmcXVvdDsuLi8uLi9zcmMvbW9kdWxlcy9jaGVja2Vycy9xdWVyaWVzJnF1b3Q7Cgpjb25maWcoKQoKZGVzY3JpYmUoJnF1b3Q7U3lzdGVtSW5mbyZxdW90OywgZnVuY3Rpb24gKCkgewogICAgbGV0IGNsaWVudDogQ2hlY2tlcnNTdGFyZ2F0ZUNsaWVudCwgY2hlY2tlcnM6IENoZWNrZXJzRXh0ZW5zaW9uWyZxdW90O2NoZWNrZXJzJnF1b3Q7XQoKICAgIGJlZm9yZSgmcXVvdDtjcmVhdGUgY2xpZW50JnF1b3Q7LCBhc3luYyBmdW5jdGlvbiAoKSB7CiAgICAgICAgY2xpZW50ID0gYXdhaXQgQ2hlY2tlcnNTdGFyZ2F0ZUNsaWVudC5jb25uZWN0KHByb2Nlc3MuZW52LlJQQ19VUkwpCiAgICAgICAgY2hlY2tlcnMgPSBjbGllbnQuY2hlY2tlcnNRdWVyeUNsaWVudCEuY2hlY2tlcnMKICAgIH0pCgogICAgaXQoJnF1b3Q7Y2FuIGdldCBzeXN0ZW0gaW5mbyZxdW90OywgYXN5bmMgZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnN0IHN5c3RlbUluZm8gPSBhd2FpdCBjaGVja2Vycy5nZXRTeXN0ZW1JbmZvKCkKICAgICAgICBleHBlY3Qoc3lzdGVtSW5mby5uZXh0SWQudG9OdW1iZXIoKSkudG8uYmUuZ3JlYXRlclRoYW5PckVxdWFsKDEpCiAgICAgICAgZXhwZWN0KHBhcnNlSW50KHN5c3RlbUluZm8uZmlmb0hlYWRJbmRleCwgMTApKS50by5iZS5ncmVhdGVyVGhhbk9yRXF1YWwoLTEpCiAgICAgICAgZXhwZWN0KHBhcnNlSW50KHN5c3RlbUluZm8uZmlmb1RhaWxJbmRleCwgMTApKS50by5iZS5ncmVhdGVyVGhhbk9yRXF1YWwoLTEpCiAgICB9KQp9KQo=",url:"https://github.com/cosmos/academy-checkers-ui/blob/stargate/test/integration/system-info.ts"}}),t._v(" "),c("p",[t._v("And create one for stored games:")]),t._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"typescript",base64:"aW1wb3J0IHsgZXhwZWN0IH0gZnJvbSAmcXVvdDtjaGFpJnF1b3Q7CmltcG9ydCB7IGNvbmZpZyB9IGZyb20gJnF1b3Q7ZG90ZW52JnF1b3Q7CmltcG9ydCBMb25nIGZyb20gJnF1b3Q7bG9uZyZxdW90OwppbXBvcnQgXyBmcm9tICZxdW90Oy4uLy4uL2Vudmlyb25tZW50JnF1b3Q7CmltcG9ydCB7IENoZWNrZXJzU3RhcmdhdGVDbGllbnQgfSBmcm9tICZxdW90Oy4uLy4uL3NyYy9jaGVja2Vyc19zdGFyZ2F0ZWNsaWVudCZxdW90OwppbXBvcnQgeyBDaGVja2Vyc0V4dGVuc2lvbiB9IGZyb20gJnF1b3Q7Li4vLi4vc3JjL21vZHVsZXMvY2hlY2tlcnMvcXVlcmllcyZxdW90OwoKY29uZmlnKCkKCmRlc2NyaWJlKCZxdW90O1N0b3JlZEdhbWUmcXVvdDssIGZ1bmN0aW9uICgpIHsKICAgIGxldCBjbGllbnQ6IENoZWNrZXJzU3RhcmdhdGVDbGllbnQsIGNoZWNrZXJzOiBDaGVja2Vyc0V4dGVuc2lvblsmcXVvdDtjaGVja2VycyZxdW90O10KCiAgICBiZWZvcmUoJnF1b3Q7Y3JlYXRlIGNsaWVudCZxdW90OywgYXN5bmMgZnVuY3Rpb24gKCkgewogICAgICAgIGNsaWVudCA9IGF3YWl0IENoZWNrZXJzU3RhcmdhdGVDbGllbnQuY29ubmVjdChwcm9jZXNzLmVudi5SUENfVVJMKQogICAgICAgIGNoZWNrZXJzID0gY2xpZW50LmNoZWNrZXJzUXVlcnlDbGllbnQhLmNoZWNrZXJzCiAgICB9KQoKICAgIGl0KCZxdW90O2NhbiBnZXQgZ2FtZSBsaXN0JnF1b3Q7LCBhc3luYyBmdW5jdGlvbiAoKSB7CiAgICAgICAgY29uc3QgYWxsR2FtZXMgPSBhd2FpdCBjaGVja2Vycy5nZXRBbGxTdG9yZWRHYW1lcygKICAgICAgICAgICAgVWludDhBcnJheS5vZigpLAogICAgICAgICAgICBMb25nLmZyb21JbnQoMCksCiAgICAgICAgICAgIExvbmcuZnJvbUludCgwKSwKICAgICAgICAgICAgdHJ1ZSwKICAgICAgICApCiAgICAgICAgZXhwZWN0KGFsbEdhbWVzLnN0b3JlZEdhbWVzKS50by5iZS5sZW5ndGguZ3JlYXRlclRoYW5PckVxdWFsKDApCiAgICB9KQoKICAgIGl0KCZxdW90O2Nhbm5vdCBnZXQgbm9uLWV4aXN0ZW50IGdhbWUmcXVvdDssIGFzeW5jIGZ1bmN0aW9uICgpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICBhd2FpdCBjaGVja2Vycy5nZXRTdG9yZWRHYW1lKCZxdW90O25vLWlkJnF1b3Q7KQogICAgICAgICAgICBleHBlY3QuZmFpbCgmcXVvdDtJdCBzaG91bGQgaGF2ZSBmYWlsZWQmcXVvdDspCiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgZXhwZWN0KGVycm9yLnRvU3RyaW5nKCkpLnRvLmVxdWFsKAogICAgICAgICAgICAgICAgJnF1b3Q7RXJyb3I6IFF1ZXJ5IGZhaWxlZCB3aXRoICgyMik6IHJwYyBlcnJvcjogY29kZSA9IE5vdEZvdW5kIGRlc2MgPSBub3QgZm91bmQ6IGtleSBub3QgZm91bmQmcXVvdDssCiAgICAgICAgICAgICkKICAgICAgICB9CiAgICB9KQp9KQo=",url:"https://github.com/cosmos/academy-checkers-ui/blob/stargate/test/integration/stored-game.ts"}}),t._v(" "),c("HighlightBox",{attrs:{type:"note"}},[c("p",[t._v("Note the forced import of "),c("code",[t._v('import _ from "../../environment"')]),t._v(", to actively inform on the "),c("code",[t._v("string")]),t._v(" type (as opposed to "),c("code",[t._v("string | undefined")]),t._v(") and avoid any compilation error.")])]),t._v(" "),c("h3",{attrs:{id:"prepare-your-checkers-chain"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#prepare-your-checkers-chain"}},[t._v("#")]),t._v(" Prepare your checkers chain")]),t._v(" "),c("p",[t._v("There is more than one way to run a checkers blockchain. For instance:")]),t._v(" "),c("ul",[c("li",[c("p",[t._v("If you came here after going through the rest of the hands-on exercise, you know how to launch a running chain with Ignite.")])]),t._v(" "),c("li",[c("p",[t._v("If you arrived here and are only focused on learning CosmJS, it is possible to abstract away niceties of the running chain in a minimal package. For this, you need Docker and to create an image:")]),t._v(" "),c("ol",[c("li",[c("p",[t._v("Get the "),c("code",[t._v("Dockerfile")]),t._v(":")]),t._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBjdXJsIC1PIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9jb3Ntb3MvYjktY2hlY2tlcnMtYWNhZGVteS1kcmFmdC9tYWluL0RvY2tlcmZpbGUtc3RhbmRhbG9uZQo="}})],1),t._v(" "),c("li",[c("p",[t._v("Build the image:")]),t._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBkb2NrZXIgYnVpbGQgLiBcCiAgICAtZiBEb2NrZXJmaWxlLXN0YW5kYWxvbmUgXAogICAgLXQgY2hlY2tlcnNkX2k6c3RhbmRhbG9uZQo="}})],1)])])]),t._v(" "),c("p",[t._v("If you have another preferred method, make sure to keep track of the required "),c("code",[t._v("RPC_URL")]),t._v(" accordingly.")]),t._v(" "),c("HighlightBox",{attrs:{type:"tip"}},[c("p",[t._v("If you are curious about how this "),c("code",[t._v("Dockerfile-standalone")]),t._v(" was created, head to the "),c("RouterLink",{attrs:{to:"/hands-on-exercise/4-run-in-prod/1-run-prod-docker.html"}},[t._v("run in production")]),t._v(" section.")],1)]),t._v(" "),c("h3",{attrs:{id:"launch-the-tests"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#launch-the-tests"}},[t._v("#")]),t._v(" Launch the tests")]),t._v(" "),c("p",[t._v("Launch your checkers chain. You can choose your preferred method, as long as it can be accessed at the "),c("code",[t._v("RPC_URL")]),t._v(" you defined earlier. For the purposes of this exercise, you have the choice between three methods:")]),t._v(" "),c("CodeGroup",[c("CodeGroupItem",{attrs:{title:"Docker standalone",active:""}},[c("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBkb2NrZXIgbmV0d29yayBjcmVhdGUgY2hlY2tlcnMtbmV0CiQgZG9ja2VyIHJ1biAtLXJtIC1pdCBcCiAgICAtcCAyNjY1NzoyNjY1NyBcCiAgICAtLW5hbWUgY2hlY2tlcnMgXAogICAgLS1uZXR3b3JrIGNoZWNrZXJzLW5ldCBcCiAgICBjaGVja2Vyc2RfaTpzdGFuZGFsb25lIHN0YXJ0Cg=="}}),t._v(" "),c("p",[t._v("If your "),c("code",[t._v("checkers-net")]),t._v(" network already exists, the first command fails with:")]),t._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"txt",base64:"RXJyb3IgcmVzcG9uc2UgZnJvbSBkYWVtb246IG5ldHdvcmsgd2l0aCBuYW1lIGNoZWNrZXJzLW5ldCBhbHJlYWR5IGV4aXN0cwo="}}),t._v(" "),c("p",[t._v("But that is okay.")])],1),t._v(" "),c("CodeGroupItem",{attrs:{title:"Local Ignite"}},[c("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBpZ25pdGUgY2hhaW4gc2VydmUK"}})],1),t._v(" "),c("CodeGroupItem",{attrs:{title:"Docker Ignite"}},[c("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBkb2NrZXIgbmV0d29yayBjcmVhdGUgY2hlY2tlcnMtbmV0CiQgZG9ja2VyIHJ1biAtLXJtIC1pdCBcCiAgICAtdiAkKHB3ZCk6L2NoZWNrZXJzIFwKICAgIC13IC9jaGVja2VycyBcCiAgICAtcCAyNjY1NzoyNjY1NyBcCiAgICAtLW5hbWUgY2hlY2tlcnMgXAogICAgLS1uZXR3b3JrIGNoZWNrZXJzLW5ldCBcCiAgICBjaGVja2Vyc19pIFwKICAgIGlnbml0ZSBjaGFpbiBzZXJ2ZQo="}}),t._v(" "),c("p",[t._v("If your "),c("code",[t._v("checkers-net")]),t._v(" network already exists, the first command fails with:")]),t._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"txt",base64:"RXJyb3IgcmVzcG9uc2UgZnJvbSBkYWVtb246IG5ldHdvcmsgd2l0aCBuYW1lIGNoZWNrZXJzLW5ldCBhbHJlYWR5IGV4aXN0cwo="}}),t._v(" "),c("p",[t._v("But that is okay.")])],1)],1),t._v(" "),c("hr"),t._v(" "),c("p",[t._v("When using Docker, note:")]),t._v(" "),c("ul",[c("li",[c("code",[t._v("--name checkers")]),t._v(" either matches the name you wrote in "),c("code",[t._v("RPC_URL")]),t._v(", or can be passed as an environment variable to another container to override the value found in "),c("code",[t._v(".env")]),t._v(".")]),t._v(" "),c("li",[c("code",[t._v("--network checkers-net")]),t._v(", which is reused shortly if you also run your "),c("code",[t._v("npm")]),t._v(" tests in Docker. See the paragraph on Docker network, later in this section.")])]),t._v(" "),c("p",[t._v("Now, if you run the tests in another shell:")]),t._v(" "),c("CodeGroup",[c("CodeGroupItem",{attrs:{title:"Local",active:""}},[c("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBucG0gdGVzdAo="}})],1),t._v(" "),c("CodeGroupItem",{attrs:{title:"Docker"}},[c("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBkb2NrZXIgcnVuIC0tcm0gXAogICAgLXYgJChwd2QpOi9jbGllbnQgLXcgL2NsaWVudCBcCiAgICAtLW5ldHdvcmsgY2hlY2tlcnMtbmV0IFwKICAgIC0tZW52IFJQQ19VUkw9JnF1b3Q7aHR0cDovL2NoZWNrZXJzOjI2NjU3JnF1b3Q7IFwKICAgIG5vZGU6MTguNy1zbGltIFwKICAgIG5wbSB0ZXN0Cg=="}}),t._v(" "),c("HighlightBox",{attrs:{type:"note"}},[c("p",[t._v("This starts the container on the same network as the blockchain container, where "),c("code",[t._v("checkers")]),t._v(" resolves to the checkers container. And it also passes "),c("code",[t._v("RPC_URL")]),t._v(" as an override of the value found in "),c("code",[t._v(".env")]),t._v(", typically "),c("code",[t._v("localhost")]),t._v(".")])])],1)],1),t._v(" "),c("hr"),t._v(" "),c("p",[t._v("This should return:")]),t._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"txt",base64:"U3RvcmVkR2FtZQogIOKclCBjYW4gZ2V0IGdhbWUgbGlzdCAoMzltcykKICDinJQgY2Fubm90IGdldCBub24tZXhpc3RlbnQgZ2FtZQoKU3lzdGVtSW5mbwogIOKclCBjYW4gZ2V0IHN5c3RlbSBpbmZvCgozIHBhc3NpbmcgKDI4N21zKQo="}}),t._v(" "),c("p",[t._v("The only combination of running chain / running tests that will not work is if you run Ignite on your local computer and the tests in a container. For this edge case, you should put your host IP address in "),c("code",[t._v('--env RPC_URL="http://YOUR-HOST-IP:26657"')]),t._v(".")]),t._v(" "),c("h2",{attrs:{id:"a-note-on-docker-networks"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#a-note-on-docker-networks"}},[t._v("#")]),t._v(" A note on Docker networks")]),t._v(" "),c("p",[t._v("You may not have used Docker up to this point. The following paragraphs acquaint you with a Docker "),c("em",[t._v("user-defined bridged network")]),t._v(".")]),t._v(" "),c("p",[t._v("If you plan on using Docker Compose at a later stage, having a first taste of such networks is beneficial. Docker Compose can be used to orchestrate and launch separate containers in order to mimic a production setup. In fact, in the "),c("RouterLink",{attrs:{to:"/hands-on-exercise/4-run-in-prod/1-run-prod-docker.html"}},[t._v("production section")]),t._v(" of this hands-on exercise you do exactly that. If you think this could eventually be useful, you should go through this section. You may want to redo this section with "),c("a",{attrs:{href:"https://docs.docker.com/get-docker/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker"),c("OutboundLink")],1),t._v(".")],1),t._v(" "),c("p",[t._v("Earlier you ran the commands:")]),t._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBkb2NrZXIgbmV0d29yayBjcmVhdGUgY2hlY2tlcnMtbmV0CiQgZG9ja2VyIHJ1biAtLXJtIC1pdCBcCiAgICAtcCAyNjY1NzoyNjY1NyBcCiAgICAtLW5hbWUgY2hlY2tlcnMgXAogICAgLS1uZXR3b3JrIGNoZWNrZXJzLW5ldCBcCiAgICAtLWRldGFjaCBcCiAgICBjaGVja2Vyc2RfaTpzdGFuZGFsb25lIHN0YXJ0Cg=="}}),t._v(" "),c("p",[t._v("This produced the following results:")]),t._v(" "),c("ol",[c("li",[t._v("A Docker network was created with the name "),c("code",[t._v("checkers-net")]),t._v(". If containers are started in this network, all ports are mutually accessible.")]),t._v(" "),c("li",[t._v("Your container started in it with the resolvable name of "),c("code",[t._v("checkers")]),t._v(".")]),t._v(" "),c("li",[t._v("With "),c("code",[t._v("-p 26657:26657")]),t._v(", port 26657 was forwarded to your host computer, on top of being already shared on the "),c("code",[t._v("checkers-net")]),t._v(" network.")])]),t._v(" "),c("p",[t._v("Then, for tests:")]),t._v(" "),c("ol",[c("li",[c("p",[t._v("When you ran:")]),t._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBucG0gdGVzdAo="}}),t._v(" "),c("p",[t._v("Your tests, running on the "),c("strong",[t._v("host")]),t._v(" computer, accessed the checkers chain from the host computer via the forwarded port 26657. Hence "),c("code",[t._v('RPC_URL="http://localhost:26657"')]),t._v(".")])],1),t._v(" "),c("li",[c("p",[t._v("When you ran:")]),t._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBkb2NrZXIgcnVuIC0tcm0gXAogICAgLXYgJChwd2QpOi9jbGllbnQgLXcgL2NsaWVudCBcCiAgICAtLW5ldHdvcmsgY2hlY2tlcnMtbmV0IFwKICAgIC0tZW52IFJQQ19VUkw9JnF1b3Q7aHR0cDovL2NoZWNrZXJzOjI2NjU3JnF1b3Q7IFwKICAgIG5vZGU6MTguNy1zbGltIFwKICAgIG5wbSB0ZXN0Cg=="}}),t._v(" "),c("p",[t._v("Your tests, running in a different container, accessed the checkers chain within the "),c("code",[t._v("checkers-net")]),t._v(" "),c("strong",[t._v("Docker network")]),t._v(" thanks to the "),c("code",[t._v("checkers")]),t._v(" name resolution. Hence "),c("code",[t._v('RPC_URL="http://checkers:26657"')]),t._v(".")]),t._v(" "),c("HighlightBox",{attrs:{type:"note"}},[c("p",[t._v("In particular, the "),c("code",[t._v("-p 26657:26657")]),t._v(" port forwarding was not necessary. You can confirm that by stopping your chain and starting it again, this time without "),c("code",[t._v("-p")]),t._v(".")])])],1)]),t._v(" "),c("p",[t._v("Docker networks are explored further in the next section.")]),t._v(" "),c("p",[t._v("When you are done, if you started the chain in Docker you can stop the containers with:")]),t._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBkb2NrZXIgc3RvcCBjaGVja2VycwokIGRvY2tlciBuZXR3b3JrIHJtIGNoZWNrZXJzLW5ldAo="}}),t._v(" "),c("HighlightBox",{attrs:{type:"synopsis"}},[c("p",[t._v("To summarize, this section has explored:")]),t._v(" "),c("ul",[c("li",[t._v("The need to prepare the elements that will eventually allow you to create a GUI and/or server-side scripts for your checkers application.")]),t._v(" "),c("li",[t._v("How to create the necessary Protobuf objects and clients in TypeScript, the extensions that facilitate the use of these clients, so that CosmJS will understand and be able to interact with your checkers module.")]),t._v(" "),c("li",[t._v("How to use Docker to define a network to launch separate containers that can communicate, for the purpose of integration testing.")])])])],1)}),[],!1,null,null,null);e.default=g.exports}}]);