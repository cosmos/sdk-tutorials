(window.webpackJsonp=window.webpackJsonp||[]).push([[188],{805:function(e,t,o){"use strict";o.r(t);var a=o(1),r=Object(a.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h1",{attrs:{id:"configure-run-and-set-up-a-service"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#configure-run-and-set-up-a-service"}},[e._v("#")]),e._v(" Configure, Run, and Set Up a Service")]),e._v(" "),o("p",[e._v("You have prepared your machine to be part of the upcoming network. Now it is time to:")]),e._v(" "),o("ol",[o("li",[e._v("Configure the rest of the software.")]),e._v(" "),o("li",[e._v("Start the software and have it establish a peer-to-peer (P2P) network with others.")])]),e._v(" "),o("h2",{attrs:{id:"configuration"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#configuration"}},[e._v("#")]),e._v(" Configuration")]),e._v(" "),o("p",[e._v("Start by putting "),o("code",[e._v("myprojectd")]),e._v(" into "),o("code",[e._v("/usr/local/bin")]),e._v(", or into whichever path you put your executables. Confirm it works with:")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBteXByb2plY3RkIHZlcnNpb24K"}}),e._v(" "),o("p",[e._v("In the previous section, you configured some parameters of your node when it comes to CometBFT, in "),o("code",[e._v("~/.myprojectd/config/config.toml")]),e._v(".")]),e._v(" "),o("p",[e._v("In "),o("code",[e._v("config/app.toml")]),e._v(", you will find other parameters to configure. Take special note of "),o("code",[e._v("halt-height")]),e._v(" which assists you in gracefully stopping the node, such as when applying a migration.")]),e._v(" "),o("p",[e._v("As for the database(s), classic considerations apply. With the "),o("code",[e._v("db_dir")]),e._v(" flag, consider storing its files in a dedicated and redundant volume. On Linux, you could mount the "),o("code",[e._v("data")]),e._v(" folder to that separate drive.")]),e._v(" "),o("p",[e._v("Events are also stored in a database, and here too you can choose to store them separately. Note that events are purely a node concern, not a consensus or network one.")]),e._v(" "),o("h2",{attrs:{id:"run-user"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#run-user"}},[e._v("#")]),e._v(" Run user")]),e._v(" "),o("p",[e._v("Another standard security concern is that you want to avoid running your application as "),o("code",[e._v("root")]),e._v(". So, create a new user and prepare it:")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBzdWRvIGFkZHVzZXIgY2hhaW51c2VyCg=="}}),e._v(" "),o("p",[e._v("With this done, move the configuration folder to the home folder of the new user:")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBzdWRvIG12IH4vLm15cHJvamVjdGQgL2hvbWUvY2hhaW51c2VyCiQgc3VkbyBjaG93biAtUiBjaGFpbnVzZXI6Y2hhaW51c2VyIC9ob21lL2NoYWludXNlci8ubXlwcm9qZWN0ZAo="}}),e._v(" "),o("h2",{attrs:{id:"commands"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#commands"}},[e._v("#")]),e._v(" Commands")]),e._v(" "),o("p",[e._v("To finally launch your software, you could simply run:")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCAuL215cHJvamVjdGQgc3RhcnQK"}}),e._v(" "),o("p",[e._v("The larger your genesis file, the longer this step takes. Do not worry if it seems like nothing is happening.")]),e._v(" "),o("h2",{attrs:{id:"as-a-service"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#as-a-service"}},[e._v("#")]),e._v(" As a service")]),e._v(" "),o("p",[e._v("Instead of relaunching your software every time, it is a good idea to set it up as a service. You can use your preferred method, but if you are on Linux it may be with "),o("code",[e._v("systemd")]),e._v(". Here is an example of a service file, "),o("a",{attrs:{href:"https://hub.cosmos.network/main/hub-tutorials/join-mainnet.html#running-via-background-process",target:"_blank",rel:"noopener noreferrer"}},[e._v("modeled on Gaia's"),o("OutboundLink")],1),e._v(", to save in "),o("code",[e._v("/etc/systemd/system/myprojectd.service")]),e._v(":")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"ini",base64:"W1VuaXRdCkRlc2NyaXB0aW9uPU15IFByb2plY3QgQ2hhaW4gRGFlbW9uCkFmdGVyPW5ldHdvcmstb25saW5lLnRhcmdldAoKW1NlcnZpY2VdClVzZXI9Y2hhaW51c2VyCkV4ZWNTdGFydD0kKHdoaWNoIG15cHJvamVjdGQpIHN0YXJ0ClJlc3RhcnQ9YWx3YXlzClJlc3RhcnRTZWM9MwpMaW1pdE5PRklMRT00MDk2CgpbSW5zdGFsbF0KV2FudGVkQnk9bXVsdGktdXNlci50YXJnZXQK"}}),e._v(" "),o("p",[e._v("Check the "),o("RouterLink",{attrs:{to:"/tutorials/9-path-to-prod/7-migration.html"}},[e._v("section on migrations")]),e._v(" to see how you may add parameters to this file if you want to use Cosmovisor.")],1),e._v(" "),o("p",[e._v("Enable it once:")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBzdWRvIHN5c3RlbWN0bCBkYWVtb24tcmVsb2FkCiQgc3VkbyBzeXN0ZW1jdGwgZW5hYmxlIG15cHJvamVjdGQK"}}),e._v(" "),o("p",[e._v("Now, if you do not want to try a computer restart, you can start the process immediately with:")]),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBzdWRvIHN5c3RlbWN0bCBzdGFydCBteXByb2plY3RkCg=="}}),e._v(" "),o("h2",{attrs:{id:"when-to-start"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#when-to-start"}},[e._v("#")]),e._v(" When to start")]),e._v(" "),o("p",[e._v("You have launched your blockchain software, and the other validators have done the same, so when is the first block minted? This happens when validators representing at least "),o("a",{attrs:{href:"https://hub.cosmos.network/main/resources/genesis.html#genesis-transactions",target:"_blank",rel:"noopener noreferrer"}},[e._v("two-thirds"),o("OutboundLink")],1),e._v(" (67%) of the total staked amount are online.")]),e._v(" "),o("p",[e._v("This means that, although you should coordinate with your peers for a convenient date and time to start, you need not narrow it down to the second. You can collectively agree to all start "),o("em",[e._v("on Tuesday")]),e._v(" and it will therefore start safely at some point on Tuesday.")]),e._v(" "),o("p",[e._v("However, this is another reason why, when adding staking transactions in the genesis, you need to be sure about the reliability of the other validators, otherwise your start could be delayed.")]),e._v(" "),o("h2",{attrs:{id:"further-concerns"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#further-concerns"}},[e._v("#")]),e._v(" Further concerns")]),e._v(" "),o("p",[e._v("Now that you have a running network, you may consider coming back to it and try to:")]),e._v(" "),o("ul",[o("li",[e._v("Make your life easier with "),o("a",{attrs:{href:"https://hub.cosmos.network/main/hub-tutorials/gaiad.html#shells-completion-scripts",target:"_blank",rel:"noopener noreferrer"}},[e._v("shell command completion"),o("OutboundLink")],1),e._v(".")]),e._v(" "),o("li",[e._v("Add a node that "),o("a",{attrs:{href:"https://hub.cosmos.network/main/hub-tutorials/join-mainnet.html#verify-mainnet",target:"_blank",rel:"noopener noreferrer"}},[e._v("checks invariants"),o("OutboundLink")],1),e._v(".")]),e._v(" "),o("li",[e._v("Add "),o("a",{attrs:{href:"https://docs.cosmos.network/main/core/telemetry.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("telemetry"),o("OutboundLink")],1),e._v(" so as to keep an eye on your node(s).")]),e._v(" "),o("li",[e._v("See what "),o("a",{attrs:{href:"https://github.com/cosmos/awesome-cosmos",target:"_blank",rel:"noopener noreferrer"}},[e._v("other projects"),o("OutboundLink")],1),e._v(" can benefit you.")])]),e._v(" "),o("p",[e._v("This is just an extract of the different customizations that are available to you. For more ideas, peruse "),o("a",{attrs:{href:"https://hub.cosmos.network/main/hub-tutorials/join-mainnet.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("this documentation"),o("OutboundLink")],1),e._v(".")]),e._v(" "),o("p",[e._v('When your network has been running sufficiently to be considered "established", your next steps are to advertise it and facilitate its eventual integration within the ecosystem. A good way to achieve this is to open a pull request on the '),o("a",{attrs:{href:"https://github.com/cosmos/chain-registry",target:"_blank",rel:"noopener noreferrer"}},[e._v("chain registry repository"),o("OutboundLink")],1),e._v(" with "),o("code",[e._v("chain.json")]),e._v(" and "),o("code",[e._v("assetlist.json")]),e._v(" files that describe your chain in a systematic way. Make sure that your JSON files follow the given schemas, for instance by checking with this "),o("a",{attrs:{href:"https://www.jsonschemavalidator.net",target:"_blank",rel:"noopener noreferrer"}},[e._v("online validator"),o("OutboundLink")],1),e._v(".")]),e._v(" "),o("HighlightBox",{attrs:{type:"tip"}},[o("p",[e._v("If you would like to see how to apply what you've learned, you can go straight to the exercise in "),o("RouterLink",{attrs:{to:"/hands-on-exercise/4-run-in-prod/1-run-prod-docker.html"}},[e._v("Simulate production in Docker")]),e._v(" to start from scratch.")],1),e._v(" "),o("p",[e._v("More specifically, you can jump to:")]),e._v(" "),o("ul",[o("li",[o("RouterLink",{attrs:{to:"/hands-on-exercise/4-run-in-prod/1-run-prod-docker.html#the-executables-that-run"}},[e._v("Executables that run")]),e._v(", to see how to prepare (Docker) nodes to run.")],1)])]),e._v(" "),o("HighlightBox",{attrs:{type:"synopsis"}},[o("p",[e._v("To summarize, this section has explored:")]),e._v(" "),o("ul",[o("li",[e._v("How to configure other software necessary to be part of a network.")]),e._v(" "),o("li",[e._v("How to start the software and establish a P2P network with other nodes.")]),e._v(" "),o("li",[e._v("The importance of avoiding running your application as a user (rather than as "),o("code",[e._v("root")]),e._v(") for security reasons.")]),e._v(" "),o("li",[e._v("How to set up your software as a service, to avoid the need to repeatedly relaunch it.")]),e._v(" "),o("li",[e._v("How to coordinate with your peers regarding when to start your network to ensure timely behaviour.")])])])],1)}),[],!1,null,null,null);t.default=r.exports}}]);