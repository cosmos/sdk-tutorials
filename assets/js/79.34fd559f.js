(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{684:function(e,o,t){"use strict";t.r(o);var a=t(0),n=Object(a.a)({},(function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"app-design"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#app-design"}},[e._v("#")]),e._v(" App Design")]),e._v(" "),t("p",[e._v("In this chapter you will learn how the interchain exchange module is designed.\nThe module has order books, buy- and sell orders.\nFirst, an order book for a pair of token has to be created.\nAfter an order book exists, you can create buy and sell orders for this pair of token.")]),e._v(" "),t("p",[e._v("The module will make use of the Interblockchain Communication Standard "),t("a",{attrs:{href:"https://github.com/cosmos/ics/blob/master/ibc/2_IBC_ARCHITECTURE.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("IBC"),t("OutboundLink")],1),e._v(". With use of the IBC, the module can create order books for tokens to have multiple blockchains interact and exchange their tokens.\nYou will be able to create an order book pair with one token from one blockchain and another token from another blockchain. We will call the module you create in this tutorial "),t("code",[e._v("ibcdex")]),e._v(".\nBoth blockchains will need to have the "),t("code",[e._v("ibcdex")]),e._v(" module installed and running.")]),e._v(" "),t("p",[e._v("When a user exchanges a token with the "),t("code",[e._v("ibcdex")]),e._v(", you receive a "),t("code",[e._v("voucher")]),e._v(" of that token on the other blockchain.\nThis is similar to how a "),t("code",[e._v("ibc-transfer")]),e._v(" is constructed.\nSince a blockchain module does not have the rights to mint new token of a blockchain into existence, the token on the target chain would be locked up and the buyer would receive a "),t("code",[e._v("voucher")]),e._v(" of that token.\nThis process can be reversed when the "),t("code",[e._v("voucher")]),e._v(" get burned again to unlock the original token. This will be explained throghout the tutorial in more detail.")]),e._v(" "),t("h2",{attrs:{id:"assumption"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#assumption"}},[e._v("#")]),e._v(" Assumption")]),e._v(" "),t("p",[e._v("An order book can be created for the exchange of any tokens between any pair of chains. The requirement is to have the "),t("code",[e._v("ibcdex")]),e._v(" module available. There can only be one order book for a pair of token at the same time.\n"),e._v("\nA specific chain cannot mint new of its native token.\n")]),e._v(" "),t("p",[e._v("This module is inspired by the "),t("a",{attrs:{href:"https://github.com/cosmos/cosmos-sdk/tree/v0.42.1/x/ibc/applications/transfer",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("ibc-transfer")]),t("OutboundLink")],1),e._v(" module and will have some similarities, like the "),t("code",[e._v("voucher")]),e._v(" creation. It will be more complex but it will display how to create:")]),e._v(" "),t("ul",[t("li",[e._v("Several types of packets to send")]),e._v(" "),t("li",[e._v("Several types of acknowledgments to treat")]),e._v(" "),t("li",[e._v("Some more complex logic on how to treat a packet on receipt, on timeout and more")])]),e._v(" "),t("h2",{attrs:{id:"overview"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#overview"}},[e._v("#")]),e._v(" Overview")]),e._v(" "),t("p",[e._v("Assume you have two blockchains: "),t("code",[e._v("Venus")]),e._v(" and "),t("code",[e._v("Mars")]),e._v(". The native token on Venus is called "),t("code",[e._v("vcx")]),e._v(", the token on Mars is "),t("code",[e._v("mcx")]),e._v(".\nWhen exchanging a token from Mars to Venus, on the Venus blockchain you would end up with an IBC "),t("code",[e._v("voucher")]),e._v(" token with a denom that looks like "),t("code",[e._v("ibc/B5CB286...A7B21307F")]),e._v(". The long string of characters after "),t("code",[e._v("ibc/")]),e._v(" is a denom trace hash of a token transferred through IBC. Using the blockchain's API you can get a denom trace from that hash. Denom trace consists of a "),t("code",[e._v("base_denom")]),e._v(" and a "),t("code",[e._v("path")]),e._v(". In our example, "),t("code",[e._v("base_denom")]),e._v(" will be "),t("code",[e._v("mcx")]),e._v(" and the "),t("code",[e._v("path")]),e._v(" will contain pairs of ports and channels through which the token has been transferred. For a single-hop transfer "),t("code",[e._v("path")]),e._v(" will look like "),t("code",[e._v("transfer/channel-0")]),e._v(". Learn more about token paths in "),t("a",{attrs:{href:"https://github.com/cosmos/ibc/tree/master/spec/app/ics-020-fungible-token-transfer",target:"_blank",rel:"noopener noreferrer"}},[e._v("ICS 20"),t("OutboundLink")],1),e._v(".\nThis token "),t("code",[e._v("ibc/Venus/mcx")]),e._v(' cannot be sold back using the same order book. If you want to "reverse" the exchange and receive back the Mars token, a new order book '),t("code",[e._v("ibc/Venux/mcx")]),e._v(" to "),t("code",[e._v("mcx")]),e._v(" needs to be created.")]),e._v(" "),t("h2",{attrs:{id:"order-books"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#order-books"}},[e._v("#")]),e._v(" Order books")]),e._v(" "),t("p",[e._v("As a typical exchange, a new pair implies the creation of an order book with orders to sell "),t("code",[e._v("MCX")]),e._v(" or orders to buy "),t("code",[e._v("VCX")]),e._v(". Here, you have two chains and this data-structure must be split between "),t("code",[e._v("Mars")]),e._v(" and "),t("code",[e._v("Venus")]),e._v(".")]),e._v(" "),t("p",[e._v("Users from chain "),t("code",[e._v("Mars")]),e._v(" will sell "),t("code",[e._v("MCX")]),e._v(" and users from chain "),t("code",[e._v("Venus")]),e._v(" will buy "),t("code",[e._v("MCX")]),e._v(". Therefore, we represent all orders to sell "),t("code",[e._v("MCX")]),e._v(" on chain "),t("code",[e._v("Mars")]),e._v(" and all the orders to buy "),t("code",[e._v("MCX")]),e._v(" on chain "),t("code",[e._v("Venus")]),e._v(".")]),e._v(" "),t("p",[e._v("In this example blockchain "),t("code",[e._v("Mars")]),e._v(" holds the sell oders and blockchain "),t("code",[e._v("Venus")]),e._v(" holds the buy orders.")]),e._v(" "),t("h2",{attrs:{id:"exchanging-tokens-back"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#exchanging-tokens-back"}},[e._v("#")]),e._v(" Exchanging tokens back")]),e._v(" "),t("p",[e._v("Like "),t("code",[e._v("ibc-transfer")]),e._v(" each blockchain keep a trace of the token voucher created on the other blockchain.")]),e._v(" "),t("p",[e._v("If a blockchain "),t("code",[e._v("Mars")]),e._v(" sells "),t("code",[e._v("MCX")]),e._v(" to "),t("code",[e._v("Venus")]),e._v(" and "),t("code",[e._v("ibc/Venus/mcx")]),e._v(" is minted on "),t("code",[e._v("Venus")]),e._v(" then, if "),t("code",[e._v("ibc/Venus/mcx")]),e._v(" is sold back on "),t("code",[e._v("Mars")]),e._v(" the token unlocked and received will be "),t("code",[e._v("MCX")]),e._v(".")]),e._v(" "),t("h2",{attrs:{id:"features"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#features"}},[e._v("#")]),e._v(" Features")]),e._v(" "),t("p",[e._v("The features supported by the module are:")]),e._v(" "),t("ul",[t("li",[e._v("Creating an exchange order book for a token pair between two chains")]),e._v(" "),t("li",[e._v("Send sell orders on source chain")]),e._v(" "),t("li",[e._v("Send buy orders on target chain")]),e._v(" "),t("li",[e._v("Cancel sell or buy orders")])])])}),[],!1,null,null,null);o.default=n.exports}}]);